{"ast":null,"code":"/**\n * @fileoverview A rule to disallow `this` keywords outside of classes or class-like objects.\n * @author Toru Nagashima\n */\n\"use strict\"; //------------------------------------------------------------------------------\n// Requirements\n//------------------------------------------------------------------------------\n\nconst astUtils = require(\"./utils/ast-utils\"); //------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\n\n\nmodule.exports = {\n  meta: {\n    type: \"suggestion\",\n    docs: {\n      description: \"disallow `this` keywords outside of classes or class-like objects\",\n      category: \"Best Practices\",\n      recommended: false,\n      url: \"https://eslint.org/docs/rules/no-invalid-this\"\n    },\n    schema: [{\n      type: \"object\",\n      properties: {\n        capIsConstructor: {\n          type: \"boolean\",\n          default: true\n        }\n      },\n      additionalProperties: false\n    }]\n  },\n\n  create(context) {\n    const options = context.options[0] || {};\n    const capIsConstructor = options.capIsConstructor !== false;\n    const stack = [],\n          sourceCode = context.getSourceCode();\n    /**\n     * Gets the current checking context.\n     *\n     * The return value has a flag that whether or not `this` keyword is valid.\n     * The flag is initialized when got at the first time.\n     * @returns {{valid: boolean}}\n     *   an object which has a flag that whether or not `this` keyword is valid.\n     */\n\n    stack.getCurrent = function () {\n      const current = this[this.length - 1];\n\n      if (!current.init) {\n        current.init = true;\n        current.valid = !astUtils.isDefaultThisBinding(current.node, sourceCode, {\n          capIsConstructor\n        });\n      }\n\n      return current;\n    };\n    /**\n     * Pushs new checking context into the stack.\n     *\n     * The checking context is not initialized yet.\n     * Because most functions don't have `this` keyword.\n     * When `this` keyword was found, the checking context is initialized.\n     * @param {ASTNode} node A function node that was entered.\n     * @returns {void}\n     */\n\n\n    function enterFunction(node) {\n      // `this` can be invalid only under strict mode.\n      stack.push({\n        init: !context.getScope().isStrict,\n        node,\n        valid: true\n      });\n    }\n    /**\n     * Pops the current checking context from the stack.\n     * @returns {void}\n     */\n\n\n    function exitFunction() {\n      stack.pop();\n    }\n\n    return {\n      /*\n       * `this` is invalid only under strict mode.\n       * Modules is always strict mode.\n       */\n      Program(node) {\n        const scope = context.getScope(),\n              features = context.parserOptions.ecmaFeatures || {};\n        stack.push({\n          init: true,\n          node,\n          valid: !(scope.isStrict || node.sourceType === \"module\" || features.globalReturn && scope.childScopes[0].isStrict)\n        });\n      },\n\n      \"Program:exit\"() {\n        stack.pop();\n      },\n\n      FunctionDeclaration: enterFunction,\n      \"FunctionDeclaration:exit\": exitFunction,\n      FunctionExpression: enterFunction,\n      \"FunctionExpression:exit\": exitFunction,\n\n      // Reports if `this` of the current context is invalid.\n      ThisExpression(node) {\n        const current = stack.getCurrent();\n\n        if (current && !current.valid) {\n          context.report({\n            node,\n            message: \"Unexpected 'this'.\"\n          });\n        }\n      }\n\n    };\n  }\n\n};","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/eslint/lib/rules/no-invalid-this.js"],"names":["astUtils","require","module","exports","meta","type","docs","description","category","recommended","url","schema","properties","capIsConstructor","default","additionalProperties","create","context","options","stack","sourceCode","getSourceCode","getCurrent","current","length","init","valid","isDefaultThisBinding","node","enterFunction","push","getScope","isStrict","exitFunction","pop","Program","scope","features","parserOptions","ecmaFeatures","sourceType","globalReturn","childScopes","FunctionDeclaration","FunctionExpression","ThisExpression","report","message"],"mappings":"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","sourcesContent":["/**\n * @fileoverview A rule to disallow `this` keywords outside of classes or class-like objects.\n * @author Toru Nagashima\n */\n\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Requirements\n//------------------------------------------------------------------------------\n\nconst astUtils = require(\"./utils/ast-utils\");\n\n//------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\n\nmodule.exports = {\n    meta: {\n        type: \"suggestion\",\n\n        docs: {\n            description: \"disallow `this` keywords outside of classes or class-like objects\",\n            category: \"Best Practices\",\n            recommended: false,\n            url: \"https://eslint.org/docs/rules/no-invalid-this\"\n        },\n\n        schema: [\n            {\n                type: \"object\",\n                properties: {\n                    capIsConstructor: {\n                        type: \"boolean\",\n                        default: true\n                    }\n                },\n                additionalProperties: false\n            }\n        ]\n    },\n\n    create(context) {\n        const options = context.options[0] || {};\n        const capIsConstructor = options.capIsConstructor !== false;\n        const stack = [],\n            sourceCode = context.getSourceCode();\n\n        /**\n         * Gets the current checking context.\n         *\n         * The return value has a flag that whether or not `this` keyword is valid.\n         * The flag is initialized when got at the first time.\n         * @returns {{valid: boolean}}\n         *   an object which has a flag that whether or not `this` keyword is valid.\n         */\n        stack.getCurrent = function() {\n            const current = this[this.length - 1];\n\n            if (!current.init) {\n                current.init = true;\n                current.valid = !astUtils.isDefaultThisBinding(\n                    current.node,\n                    sourceCode,\n                    { capIsConstructor }\n                );\n            }\n            return current;\n        };\n\n        /**\n         * Pushs new checking context into the stack.\n         *\n         * The checking context is not initialized yet.\n         * Because most functions don't have `this` keyword.\n         * When `this` keyword was found, the checking context is initialized.\n         * @param {ASTNode} node A function node that was entered.\n         * @returns {void}\n         */\n        function enterFunction(node) {\n\n            // `this` can be invalid only under strict mode.\n            stack.push({\n                init: !context.getScope().isStrict,\n                node,\n                valid: true\n            });\n        }\n\n        /**\n         * Pops the current checking context from the stack.\n         * @returns {void}\n         */\n        function exitFunction() {\n            stack.pop();\n        }\n\n        return {\n\n            /*\n             * `this` is invalid only under strict mode.\n             * Modules is always strict mode.\n             */\n            Program(node) {\n                const scope = context.getScope(),\n                    features = context.parserOptions.ecmaFeatures || {};\n\n                stack.push({\n                    init: true,\n                    node,\n                    valid: !(\n                        scope.isStrict ||\n                        node.sourceType === \"module\" ||\n                        (features.globalReturn && scope.childScopes[0].isStrict)\n                    )\n                });\n            },\n\n            \"Program:exit\"() {\n                stack.pop();\n            },\n\n            FunctionDeclaration: enterFunction,\n            \"FunctionDeclaration:exit\": exitFunction,\n            FunctionExpression: enterFunction,\n            \"FunctionExpression:exit\": exitFunction,\n\n            // Reports if `this` of the current context is invalid.\n            ThisExpression(node) {\n                const current = stack.getCurrent();\n\n                if (current && !current.valid) {\n                    context.report({ node, message: \"Unexpected 'this'.\" });\n                }\n            }\n        };\n    }\n};\n"]},"metadata":{},"sourceType":"script"}