{"ast":null,"code":"var mergeAdjacent = require('./merge-adjacent');\n\nvar mergeMediaQueries = require('./merge-media-queries');\n\nvar mergeNonAdjacentByBody = require('./merge-non-adjacent-by-body');\n\nvar mergeNonAdjacentBySelector = require('./merge-non-adjacent-by-selector');\n\nvar reduceNonAdjacent = require('./reduce-non-adjacent');\n\nvar removeDuplicateFontAtRules = require('./remove-duplicate-font-at-rules');\n\nvar removeDuplicateMediaQueries = require('./remove-duplicate-media-queries');\n\nvar removeDuplicates = require('./remove-duplicates');\n\nvar removeUnusedAtRules = require('./remove-unused-at-rules');\n\nvar restructure = require('./restructure');\n\nvar optimizeProperties = require('./properties/optimize');\n\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\n\nvar Token = require('../../tokenizer/token');\n\nfunction removeEmpty(tokens) {\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n    var isEmpty = false;\n\n    switch (token[0]) {\n      case Token.RULE:\n        isEmpty = token[1].length === 0 || token[2].length === 0;\n        break;\n\n      case Token.NESTED_BLOCK:\n        removeEmpty(token[2]);\n        isEmpty = token[2].length === 0;\n        break;\n\n      case Token.AT_RULE:\n        isEmpty = token[1].length === 0;\n        break;\n\n      case Token.AT_RULE_BLOCK:\n        isEmpty = token[2].length === 0;\n    }\n\n    if (isEmpty) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    }\n  }\n}\n\nfunction recursivelyOptimizeBlocks(tokens, context) {\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n\n    if (token[0] == Token.NESTED_BLOCK) {\n      var isKeyframes = /@(-moz-|-o-|-webkit-)?keyframes/.test(token[1][0][1]);\n      level2Optimize(token[2], context, !isKeyframes);\n    }\n  }\n}\n\nfunction recursivelyOptimizeProperties(tokens, context) {\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n\n    switch (token[0]) {\n      case Token.RULE:\n        optimizeProperties(token[2], true, true, context);\n        break;\n\n      case Token.NESTED_BLOCK:\n        recursivelyOptimizeProperties(token[2], context);\n    }\n  }\n}\n\nfunction level2Optimize(tokens, context, withRestructuring) {\n  var levelOptions = context.options.level[OptimizationLevel.Two];\n  var reduced;\n  var i;\n  recursivelyOptimizeBlocks(tokens, context);\n  recursivelyOptimizeProperties(tokens, context);\n\n  if (levelOptions.removeDuplicateRules) {\n    removeDuplicates(tokens, context);\n  }\n\n  if (levelOptions.mergeAdjacentRules) {\n    mergeAdjacent(tokens, context);\n  }\n\n  if (levelOptions.reduceNonAdjacentRules) {\n    reduceNonAdjacent(tokens, context);\n  }\n\n  if (levelOptions.mergeNonAdjacentRules && levelOptions.mergeNonAdjacentRules != 'body') {\n    mergeNonAdjacentBySelector(tokens, context);\n  }\n\n  if (levelOptions.mergeNonAdjacentRules && levelOptions.mergeNonAdjacentRules != 'selector') {\n    mergeNonAdjacentByBody(tokens, context);\n  }\n\n  if (levelOptions.restructureRules && levelOptions.mergeAdjacentRules && withRestructuring) {\n    restructure(tokens, context);\n    mergeAdjacent(tokens, context);\n  }\n\n  if (levelOptions.restructureRules && !levelOptions.mergeAdjacentRules && withRestructuring) {\n    restructure(tokens, context);\n  }\n\n  if (levelOptions.removeDuplicateFontRules) {\n    removeDuplicateFontAtRules(tokens, context);\n  }\n\n  if (levelOptions.removeDuplicateMediaBlocks) {\n    removeDuplicateMediaQueries(tokens, context);\n  }\n\n  if (levelOptions.removeUnusedAtRules) {\n    removeUnusedAtRules(tokens, context);\n  }\n\n  if (levelOptions.mergeMedia) {\n    reduced = mergeMediaQueries(tokens, context);\n\n    for (i = reduced.length - 1; i >= 0; i--) {\n      level2Optimize(reduced[i][2], context, false);\n    }\n  }\n\n  if (levelOptions.removeEmpty) {\n    removeEmpty(tokens);\n  }\n\n  return tokens;\n}\n\nmodule.exports = level2Optimize;","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/clean-css/lib/optimizer/level-2/optimize.js"],"names":["mergeAdjacent","require","mergeMediaQueries","mergeNonAdjacentByBody","mergeNonAdjacentBySelector","reduceNonAdjacent","removeDuplicateFontAtRules","removeDuplicateMediaQueries","removeDuplicates","removeUnusedAtRules","restructure","optimizeProperties","OptimizationLevel","Token","removeEmpty","tokens","i","l","length","token","isEmpty","RULE","NESTED_BLOCK","AT_RULE","AT_RULE_BLOCK","splice","recursivelyOptimizeBlocks","context","isKeyframes","test","level2Optimize","recursivelyOptimizeProperties","withRestructuring","levelOptions","options","level","Two","reduced","removeDuplicateRules","mergeAdjacentRules","reduceNonAdjacentRules","mergeNonAdjacentRules","restructureRules","removeDuplicateFontRules","removeDuplicateMediaBlocks","mergeMedia","module","exports"],"mappings":"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","sourcesContent":["var mergeAdjacent = require('./merge-adjacent');\nvar mergeMediaQueries = require('./merge-media-queries');\nvar mergeNonAdjacentByBody = require('./merge-non-adjacent-by-body');\nvar mergeNonAdjacentBySelector = require('./merge-non-adjacent-by-selector');\nvar reduceNonAdjacent = require('./reduce-non-adjacent');\nvar removeDuplicateFontAtRules = require('./remove-duplicate-font-at-rules');\nvar removeDuplicateMediaQueries = require('./remove-duplicate-media-queries');\nvar removeDuplicates = require('./remove-duplicates');\nvar removeUnusedAtRules = require('./remove-unused-at-rules');\nvar restructure = require('./restructure');\n\nvar optimizeProperties = require('./properties/optimize');\n\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\n\nvar Token = require('../../tokenizer/token');\n\nfunction removeEmpty(tokens) {\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n    var isEmpty = false;\n\n    switch (token[0]) {\n      case Token.RULE:\n        isEmpty = token[1].length === 0 || token[2].length === 0;\n        break;\n      case Token.NESTED_BLOCK:\n        removeEmpty(token[2]);\n        isEmpty = token[2].length === 0;\n        break;\n      case Token.AT_RULE:\n        isEmpty = token[1].length === 0;\n        break;\n      case Token.AT_RULE_BLOCK:\n        isEmpty = token[2].length === 0;\n    }\n\n    if (isEmpty) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    }\n  }\n}\n\nfunction recursivelyOptimizeBlocks(tokens, context) {\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n\n    if (token[0] == Token.NESTED_BLOCK) {\n      var isKeyframes = /@(-moz-|-o-|-webkit-)?keyframes/.test(token[1][0][1]);\n      level2Optimize(token[2], context, !isKeyframes);\n    }\n  }\n}\n\nfunction recursivelyOptimizeProperties(tokens, context) {\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n\n    switch (token[0]) {\n      case Token.RULE:\n        optimizeProperties(token[2], true, true, context);\n        break;\n      case Token.NESTED_BLOCK:\n        recursivelyOptimizeProperties(token[2], context);\n    }\n  }\n}\n\nfunction level2Optimize(tokens, context, withRestructuring) {\n  var levelOptions = context.options.level[OptimizationLevel.Two];\n  var reduced;\n  var i;\n\n  recursivelyOptimizeBlocks(tokens, context);\n  recursivelyOptimizeProperties(tokens, context);\n\n  if (levelOptions.removeDuplicateRules) {\n    removeDuplicates(tokens, context);\n  }\n\n  if (levelOptions.mergeAdjacentRules) {\n    mergeAdjacent(tokens, context);\n  }\n\n  if (levelOptions.reduceNonAdjacentRules) {\n    reduceNonAdjacent(tokens, context);\n  }\n\n  if (levelOptions.mergeNonAdjacentRules && levelOptions.mergeNonAdjacentRules != 'body') {\n    mergeNonAdjacentBySelector(tokens, context);\n  }\n\n  if (levelOptions.mergeNonAdjacentRules && levelOptions.mergeNonAdjacentRules != 'selector') {\n    mergeNonAdjacentByBody(tokens, context);\n  }\n\n  if (levelOptions.restructureRules && levelOptions.mergeAdjacentRules && withRestructuring) {\n    restructure(tokens, context);\n    mergeAdjacent(tokens, context);\n  }\n\n  if (levelOptions.restructureRules && !levelOptions.mergeAdjacentRules && withRestructuring) {\n    restructure(tokens, context);\n  }\n\n  if (levelOptions.removeDuplicateFontRules) {\n    removeDuplicateFontAtRules(tokens, context);\n  }\n\n  if (levelOptions.removeDuplicateMediaBlocks) {\n    removeDuplicateMediaQueries(tokens, context);\n  }\n\n  if (levelOptions.removeUnusedAtRules) {\n    removeUnusedAtRules(tokens, context);\n  }\n\n  if (levelOptions.mergeMedia) {\n    reduced = mergeMediaQueries(tokens, context);\n    for (i = reduced.length - 1; i >= 0; i--) {\n      level2Optimize(reduced[i][2], context, false);\n    }\n  }\n\n  if (levelOptions.removeEmpty) {\n    removeEmpty(tokens);\n  }\n\n  return tokens;\n}\n\nmodule.exports = level2Optimize;\n"]},"metadata":{},"sourceType":"script"}