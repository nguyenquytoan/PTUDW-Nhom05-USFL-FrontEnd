{"ast":null,"code":"var path = require('path');\n\nvar url = require('url');\n\nvar isRemoteResource = require('../utils/is-remote-resource');\n\nvar hasProtocol = require('../utils/has-protocol');\n\nvar HTTP_PROTOCOL = 'http:';\n\nfunction isAllowedResource(uri, isRemote, rules) {\n  var match;\n  var absoluteUri;\n  var allowed = isRemote ? false : true;\n  var rule;\n  var isNegated;\n  var normalizedRule;\n  var i;\n\n  if (rules.length === 0) {\n    return false;\n  }\n\n  if (isRemote && !hasProtocol(uri)) {\n    uri = HTTP_PROTOCOL + uri;\n  }\n\n  match = isRemote ? url.parse(uri).host : uri;\n  absoluteUri = isRemote ? uri : path.resolve(uri);\n\n  for (i = 0; i < rules.length; i++) {\n    rule = rules[i];\n    isNegated = rule[0] == '!';\n    normalizedRule = rule.substring(1);\n\n    if (isNegated && isRemote && isRemoteRule(normalizedRule)) {\n      allowed = allowed && !isAllowedResource(uri, true, [normalizedRule]);\n    } else if (isNegated && !isRemote && !isRemoteRule(normalizedRule)) {\n      allowed = allowed && !isAllowedResource(uri, false, [normalizedRule]);\n    } else if (isNegated) {\n      allowed = allowed && true;\n    } else if (rule == 'all') {\n      allowed = true;\n    } else if (isRemote && rule == 'local') {\n      allowed = allowed || false;\n    } else if (isRemote && rule == 'remote') {\n      allowed = true;\n    } else if (!isRemote && rule == 'remote') {\n      allowed = false;\n    } else if (!isRemote && rule == 'local') {\n      allowed = true;\n    } else if (rule === match) {\n      allowed = true;\n    } else if (rule === uri) {\n      allowed = true;\n    } else if (isRemote && absoluteUri.indexOf(rule) === 0) {\n      allowed = true;\n    } else if (!isRemote && absoluteUri.indexOf(path.resolve(rule)) === 0) {\n      allowed = true;\n    } else if (isRemote != isRemoteRule(normalizedRule)) {\n      allowed = allowed && true;\n    } else {\n      allowed = false;\n    }\n  }\n\n  return allowed;\n}\n\nfunction isRemoteRule(rule) {\n  return isRemoteResource(rule) || url.parse(HTTP_PROTOCOL + '//' + rule).host == rule;\n}\n\nmodule.exports = isAllowedResource;","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/clean-css/lib/reader/is-allowed-resource.js"],"names":["path","require","url","isRemoteResource","hasProtocol","HTTP_PROTOCOL","isAllowedResource","uri","isRemote","rules","match","absoluteUri","allowed","rule","isNegated","normalizedRule","i","length","parse","host","resolve","substring","isRemoteRule","indexOf","module","exports"],"mappings":"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","sourcesContent":["var path = require('path');\nvar url = require('url');\n\nvar isRemoteResource = require('../utils/is-remote-resource');\nvar hasProtocol = require('../utils/has-protocol');\n\nvar HTTP_PROTOCOL = 'http:';\n\nfunction isAllowedResource(uri, isRemote, rules) {\n  var match;\n  var absoluteUri;\n  var allowed = isRemote ? false : true;\n  var rule;\n  var isNegated;\n  var normalizedRule;\n  var i;\n\n  if (rules.length === 0) {\n    return false;\n  }\n\n  if (isRemote && !hasProtocol(uri)) {\n    uri = HTTP_PROTOCOL + uri;\n  }\n\n  match = isRemote ?\n    url.parse(uri).host :\n    uri;\n\n  absoluteUri = isRemote ?\n    uri :\n    path.resolve(uri);\n\n  for (i = 0; i < rules.length; i++) {\n    rule = rules[i];\n    isNegated = rule[0] == '!';\n    normalizedRule = rule.substring(1);\n\n    if (isNegated && isRemote && isRemoteRule(normalizedRule)) {\n      allowed = allowed && !isAllowedResource(uri, true, [normalizedRule]);\n    } else if (isNegated && !isRemote && !isRemoteRule(normalizedRule)) {\n      allowed = allowed && !isAllowedResource(uri, false, [normalizedRule]);\n    } else if (isNegated) {\n      allowed = allowed && true;\n    } else if (rule == 'all') {\n      allowed = true;\n    } else if (isRemote && rule == 'local') {\n      allowed = allowed || false;\n    } else if (isRemote && rule == 'remote') {\n      allowed = true;\n    } else if (!isRemote && rule == 'remote') {\n      allowed = false;\n    } else if (!isRemote && rule == 'local') {\n      allowed = true;\n    } else if (rule === match) {\n      allowed = true;\n    } else if (rule === uri) {\n      allowed = true;\n    } else if (isRemote && absoluteUri.indexOf(rule) === 0) {\n      allowed = true;\n    } else if (!isRemote && absoluteUri.indexOf(path.resolve(rule)) === 0) {\n      allowed = true;\n    } else if (isRemote != isRemoteRule(normalizedRule)) {\n      allowed = allowed && true;\n    } else {\n      allowed = false;\n    }\n  }\n\n  return allowed;\n}\n\nfunction isRemoteRule(rule) {\n  return isRemoteResource(rule) || url.parse(HTTP_PROTOCOL + '//' + rule).host == rule;\n}\n\nmodule.exports = isAllowedResource;\n"]},"metadata":{},"sourceType":"script"}