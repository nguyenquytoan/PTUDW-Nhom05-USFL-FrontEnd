{"ast":null,"code":"// @remove-file-on-eject\n\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict'; // Makes the script crash on unhandled rejections instead of silently\n// ignoring them. In the future, promise rejections that are not handled will\n// terminate the Node.js process with a non-zero exit code.\n\nprocess.on('unhandledRejection', err => {\n  throw err;\n});\n\nconst fs = require('fs-extra');\n\nconst path = require('path');\n\nconst execSync = require('child_process').execSync;\n\nconst chalk = require('react-dev-utils/chalk');\n\nconst paths = require('../config/paths');\n\nconst createJestConfig = require('./utils/createJestConfig');\n\nconst inquirer = require('react-dev-utils/inquirer');\n\nconst spawnSync = require('react-dev-utils/crossSpawn').sync;\n\nconst os = require('os');\n\nconst green = chalk.green;\nconst cyan = chalk.cyan;\n\nfunction getGitStatus() {\n  try {\n    let stdout = execSync(`git status --porcelain`, {\n      stdio: ['pipe', 'pipe', 'ignore']\n    }).toString();\n    return stdout.trim();\n  } catch (e) {\n    return '';\n  }\n}\n\nfunction tryGitAdd(appPath) {\n  try {\n    spawnSync('git', ['add', path.join(appPath, 'config'), path.join(appPath, 'scripts')], {\n      stdio: 'inherit'\n    });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nconsole.log(chalk.cyan.bold('NOTE: Create React App 2+ supports TypeScript, Sass, CSS Modules and more without ejecting: ' + 'https://reactjs.org/blog/2018/10/01/create-react-app-v2.html'));\nconsole.log();\ninquirer.prompt({\n  type: 'confirm',\n  name: 'shouldEject',\n  message: 'Are you sure you want to eject? This action is permanent.',\n  default: false\n}).then(answer => {\n  if (!answer.shouldEject) {\n    console.log(cyan('Close one! Eject aborted.'));\n    return;\n  }\n\n  const gitStatus = getGitStatus();\n\n  if (gitStatus) {\n    console.error(chalk.red('This git repository has untracked files or uncommitted changes:') + '\\n\\n' + gitStatus.split('\\n').map(line => line.match(/ .*/g)[0].trim()).join('\\n') + '\\n\\n' + chalk.red('Remove untracked files, stash or commit any changes, and try again.'));\n    process.exit(1);\n  }\n\n  console.log('Ejecting...');\n  const ownPath = paths.ownPath;\n  const appPath = paths.appPath;\n\n  function verifyAbsent(file) {\n    if (fs.existsSync(path.join(appPath, file))) {\n      console.error(`\\`${file}\\` already exists in your app folder. We cannot ` + 'continue as you would lose all the changes in that file or directory. ' + 'Please move or delete it (maybe make a copy for backup) and run this ' + 'command again.');\n      process.exit(1);\n    }\n  }\n\n  const folders = ['config', 'config/jest', 'scripts']; // Make shallow array of files paths\n\n  const files = folders.reduce((files, folder) => {\n    return files.concat(fs.readdirSync(path.join(ownPath, folder)) // set full path\n    .map(file => path.join(ownPath, folder, file)) // omit dirs from file list\n    .filter(file => fs.lstatSync(file).isFile()));\n  }, []); // Ensure that the app folder is clean and we won't override any files\n\n  folders.forEach(verifyAbsent);\n  files.forEach(verifyAbsent); // Prepare Jest config early in case it throws\n\n  const jestConfig = createJestConfig(filePath => path.posix.join('<rootDir>', filePath), null, true);\n  console.log();\n  console.log(cyan(`Copying files into ${appPath}`));\n  folders.forEach(folder => {\n    fs.mkdirSync(path.join(appPath, folder));\n  });\n  files.forEach(file => {\n    let content = fs.readFileSync(file, 'utf8'); // Skip flagged files\n\n    if (content.match(/\\/\\/ @remove-file-on-eject/)) {\n      return;\n    }\n\n    content = content // Remove dead code from .js files on eject\n    .replace(/\\/\\/ @remove-on-eject-begin([\\s\\S]*?)\\/\\/ @remove-on-eject-end/gm, '') // Remove dead code from .applescript files on eject\n    .replace(/-- @remove-on-eject-begin([\\s\\S]*?)-- @remove-on-eject-end/gm, '').trim() + '\\n';\n    console.log(`  Adding ${cyan(file.replace(ownPath, ''))} to the project`);\n    fs.writeFileSync(file.replace(ownPath, appPath), content);\n  });\n  console.log();\n\n  const ownPackage = require(path.join(ownPath, 'package.json'));\n\n  const appPackage = require(path.join(appPath, 'package.json'));\n\n  console.log(cyan('Updating the dependencies'));\n  const ownPackageName = ownPackage.name;\n\n  if (appPackage.devDependencies) {\n    // We used to put react-scripts in devDependencies\n    if (appPackage.devDependencies[ownPackageName]) {\n      console.log(`  Removing ${cyan(ownPackageName)} from devDependencies`);\n      delete appPackage.devDependencies[ownPackageName];\n    }\n  }\n\n  appPackage.dependencies = appPackage.dependencies || {};\n\n  if (appPackage.dependencies[ownPackageName]) {\n    console.log(`  Removing ${cyan(ownPackageName)} from dependencies`);\n    delete appPackage.dependencies[ownPackageName];\n  }\n\n  Object.keys(ownPackage.dependencies).forEach(key => {\n    // For some reason optionalDependencies end up in dependencies after install\n    if (ownPackage.optionalDependencies && ownPackage.optionalDependencies[key]) {\n      return;\n    }\n\n    console.log(`  Adding ${cyan(key)} to dependencies`);\n    appPackage.dependencies[key] = ownPackage.dependencies[key];\n  }); // Sort the deps\n\n  const unsortedDependencies = appPackage.dependencies;\n  appPackage.dependencies = {};\n  Object.keys(unsortedDependencies).sort().forEach(key => {\n    appPackage.dependencies[key] = unsortedDependencies[key];\n  });\n  console.log();\n  console.log(cyan('Updating the scripts'));\n  delete appPackage.scripts['eject'];\n  Object.keys(appPackage.scripts).forEach(key => {\n    Object.keys(ownPackage.bin).forEach(binKey => {\n      const regex = new RegExp(binKey + ' (\\\\w+)', 'g');\n\n      if (!regex.test(appPackage.scripts[key])) {\n        return;\n      }\n\n      appPackage.scripts[key] = appPackage.scripts[key].replace(regex, 'node scripts/$1.js');\n      console.log(`  Replacing ${cyan(`\"${binKey} ${key}\"`)} with ${cyan(`\"node scripts/${key}.js\"`)}`);\n    });\n  });\n  console.log();\n  console.log(cyan('Configuring package.json')); // Add Jest config\n\n  console.log(`  Adding ${cyan('Jest')} configuration`);\n  appPackage.jest = jestConfig; // Add Babel config\n\n  console.log(`  Adding ${cyan('Babel')} preset`);\n  appPackage.babel = {\n    presets: ['react-app']\n  }; // Add ESlint config\n\n  if (!appPackage.eslintConfig) {\n    console.log(`  Adding ${cyan('ESLint')} configuration`);\n    appPackage.eslintConfig = {\n      extends: 'react-app'\n    };\n  }\n\n  fs.writeFileSync(path.join(appPath, 'package.json'), JSON.stringify(appPackage, null, 2) + os.EOL);\n  console.log();\n\n  if (fs.existsSync(paths.appTypeDeclarations)) {\n    try {\n      // Read app declarations file\n      let content = fs.readFileSync(paths.appTypeDeclarations, 'utf8');\n      const ownContent = fs.readFileSync(paths.ownTypeDeclarations, 'utf8').trim() + os.EOL; // Remove react-scripts reference since they're getting a copy of the types in their project\n\n      content = content // Remove react-scripts types\n      .replace(/^\\s*\\/\\/\\/\\s*<reference\\s+types.+?\"react-scripts\".*\\/>.*(?:\\n|$)/gm, '').trim() + os.EOL;\n      fs.writeFileSync(paths.appTypeDeclarations, (ownContent + os.EOL + content).trim() + os.EOL);\n    } catch (e) {// It's not essential that this succeeds, the TypeScript user should\n      // be able to re-create these types with ease.\n    }\n  } // \"Don't destroy what isn't ours\"\n\n\n  if (ownPath.indexOf(appPath) === 0) {\n    try {\n      // remove react-scripts and react-scripts binaries from app node_modules\n      Object.keys(ownPackage.bin).forEach(binKey => {\n        fs.removeSync(path.join(appPath, 'node_modules', '.bin', binKey));\n      });\n      fs.removeSync(ownPath);\n    } catch (e) {// It's not essential that this succeeds\n    }\n  }\n\n  if (fs.existsSync(paths.yarnLockFile)) {\n    const windowsCmdFilePath = path.join(appPath, 'node_modules', '.bin', 'react-scripts.cmd');\n    let windowsCmdFileContent;\n\n    if (process.platform === 'win32') {\n      // https://github.com/facebook/create-react-app/pull/3806#issuecomment-357781035\n      // Yarn is diligent about cleaning up after itself, but this causes the react-scripts.cmd file\n      // to be deleted while it is running. This trips Windows up after the eject completes.\n      // We'll read the batch file and later \"write it back\" to match npm behavior.\n      try {\n        windowsCmdFileContent = fs.readFileSync(windowsCmdFilePath);\n      } catch (err) {// If this fails we're not worse off than if we didn't try to fix it.\n      }\n    }\n\n    console.log(cyan('Running yarn...'));\n    spawnSync('yarnpkg', ['--cwd', process.cwd()], {\n      stdio: 'inherit'\n    });\n\n    if (windowsCmdFileContent && !fs.existsSync(windowsCmdFilePath)) {\n      try {\n        fs.writeFileSync(windowsCmdFilePath, windowsCmdFileContent);\n      } catch (err) {// If this fails we're not worse off than if we didn't try to fix it.\n      }\n    }\n  } else {\n    console.log(cyan('Running npm install...'));\n    spawnSync('npm', ['install', '--loglevel', 'error'], {\n      stdio: 'inherit'\n    });\n  }\n\n  console.log(green('Ejected successfully!'));\n  console.log();\n\n  if (tryGitAdd(appPath)) {\n    console.log(cyan('Staged ejected files for commit.'));\n    console.log();\n  }\n\n  console.log(green('Please consider sharing why you ejected in this survey:'));\n  console.log(green('  http://goo.gl/forms/Bi6CZjk1EqsdelXk1'));\n  console.log();\n});","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/react-scripts/scripts/eject.js"],"names":["process","on","err","fs","require","path","execSync","chalk","paths","createJestConfig","inquirer","spawnSync","sync","os","green","cyan","getGitStatus","stdout","stdio","toString","trim","e","tryGitAdd","appPath","join","console","log","bold","prompt","type","name","message","default","then","answer","shouldEject","gitStatus","error","red","split","map","line","match","exit","ownPath","verifyAbsent","file","existsSync","folders","files","reduce","folder","concat","readdirSync","filter","lstatSync","isFile","forEach","jestConfig","filePath","posix","mkdirSync","content","readFileSync","replace","writeFileSync","ownPackage","appPackage","ownPackageName","devDependencies","dependencies","Object","keys","key","optionalDependencies","unsortedDependencies","sort","scripts","bin","binKey","regex","RegExp","test","jest","babel","presets","eslintConfig","extends","JSON","stringify","EOL","appTypeDeclarations","ownContent","ownTypeDeclarations","indexOf","removeSync","yarnLockFile","windowsCmdFilePath","windowsCmdFileContent","platform","cwd"],"mappings":"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","sourcesContent":["// @remove-file-on-eject\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';\n\n// Makes the script crash on unhandled rejections instead of silently\n// ignoring them. In the future, promise rejections that are not handled will\n// terminate the Node.js process with a non-zero exit code.\nprocess.on('unhandledRejection', err => {\n  throw err;\n});\n\nconst fs = require('fs-extra');\nconst path = require('path');\nconst execSync = require('child_process').execSync;\nconst chalk = require('react-dev-utils/chalk');\nconst paths = require('../config/paths');\nconst createJestConfig = require('./utils/createJestConfig');\nconst inquirer = require('react-dev-utils/inquirer');\nconst spawnSync = require('react-dev-utils/crossSpawn').sync;\nconst os = require('os');\n\nconst green = chalk.green;\nconst cyan = chalk.cyan;\n\nfunction getGitStatus() {\n  try {\n    let stdout = execSync(`git status --porcelain`, {\n      stdio: ['pipe', 'pipe', 'ignore'],\n    }).toString();\n    return stdout.trim();\n  } catch (e) {\n    return '';\n  }\n}\n\nfunction tryGitAdd(appPath) {\n  try {\n    spawnSync(\n      'git',\n      ['add', path.join(appPath, 'config'), path.join(appPath, 'scripts')],\n      {\n        stdio: 'inherit',\n      }\n    );\n\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nconsole.log(\n  chalk.cyan.bold(\n    'NOTE: Create React App 2+ supports TypeScript, Sass, CSS Modules and more without ejecting: ' +\n      'https://reactjs.org/blog/2018/10/01/create-react-app-v2.html'\n  )\n);\nconsole.log();\n\ninquirer\n  .prompt({\n    type: 'confirm',\n    name: 'shouldEject',\n    message: 'Are you sure you want to eject? This action is permanent.',\n    default: false,\n  })\n  .then(answer => {\n    if (!answer.shouldEject) {\n      console.log(cyan('Close one! Eject aborted.'));\n      return;\n    }\n\n    const gitStatus = getGitStatus();\n    if (gitStatus) {\n      console.error(\n        chalk.red(\n          'This git repository has untracked files or uncommitted changes:'\n        ) +\n          '\\n\\n' +\n          gitStatus\n            .split('\\n')\n            .map(line => line.match(/ .*/g)[0].trim())\n            .join('\\n') +\n          '\\n\\n' +\n          chalk.red(\n            'Remove untracked files, stash or commit any changes, and try again.'\n          )\n      );\n      process.exit(1);\n    }\n\n    console.log('Ejecting...');\n\n    const ownPath = paths.ownPath;\n    const appPath = paths.appPath;\n\n    function verifyAbsent(file) {\n      if (fs.existsSync(path.join(appPath, file))) {\n        console.error(\n          `\\`${file}\\` already exists in your app folder. We cannot ` +\n            'continue as you would lose all the changes in that file or directory. ' +\n            'Please move or delete it (maybe make a copy for backup) and run this ' +\n            'command again.'\n        );\n        process.exit(1);\n      }\n    }\n\n    const folders = ['config', 'config/jest', 'scripts'];\n\n    // Make shallow array of files paths\n    const files = folders.reduce((files, folder) => {\n      return files.concat(\n        fs\n          .readdirSync(path.join(ownPath, folder))\n          // set full path\n          .map(file => path.join(ownPath, folder, file))\n          // omit dirs from file list\n          .filter(file => fs.lstatSync(file).isFile())\n      );\n    }, []);\n\n    // Ensure that the app folder is clean and we won't override any files\n    folders.forEach(verifyAbsent);\n    files.forEach(verifyAbsent);\n\n    // Prepare Jest config early in case it throws\n    const jestConfig = createJestConfig(\n      filePath => path.posix.join('<rootDir>', filePath),\n      null,\n      true\n    );\n\n    console.log();\n    console.log(cyan(`Copying files into ${appPath}`));\n\n    folders.forEach(folder => {\n      fs.mkdirSync(path.join(appPath, folder));\n    });\n\n    files.forEach(file => {\n      let content = fs.readFileSync(file, 'utf8');\n\n      // Skip flagged files\n      if (content.match(/\\/\\/ @remove-file-on-eject/)) {\n        return;\n      }\n      content =\n        content\n          // Remove dead code from .js files on eject\n          .replace(\n            /\\/\\/ @remove-on-eject-begin([\\s\\S]*?)\\/\\/ @remove-on-eject-end/gm,\n            ''\n          )\n          // Remove dead code from .applescript files on eject\n          .replace(\n            /-- @remove-on-eject-begin([\\s\\S]*?)-- @remove-on-eject-end/gm,\n            ''\n          )\n          .trim() + '\\n';\n      console.log(`  Adding ${cyan(file.replace(ownPath, ''))} to the project`);\n      fs.writeFileSync(file.replace(ownPath, appPath), content);\n    });\n    console.log();\n\n    const ownPackage = require(path.join(ownPath, 'package.json'));\n    const appPackage = require(path.join(appPath, 'package.json'));\n\n    console.log(cyan('Updating the dependencies'));\n    const ownPackageName = ownPackage.name;\n    if (appPackage.devDependencies) {\n      // We used to put react-scripts in devDependencies\n      if (appPackage.devDependencies[ownPackageName]) {\n        console.log(`  Removing ${cyan(ownPackageName)} from devDependencies`);\n        delete appPackage.devDependencies[ownPackageName];\n      }\n    }\n    appPackage.dependencies = appPackage.dependencies || {};\n    if (appPackage.dependencies[ownPackageName]) {\n      console.log(`  Removing ${cyan(ownPackageName)} from dependencies`);\n      delete appPackage.dependencies[ownPackageName];\n    }\n    Object.keys(ownPackage.dependencies).forEach(key => {\n      // For some reason optionalDependencies end up in dependencies after install\n      if (\n        ownPackage.optionalDependencies &&\n        ownPackage.optionalDependencies[key]\n      ) {\n        return;\n      }\n      console.log(`  Adding ${cyan(key)} to dependencies`);\n      appPackage.dependencies[key] = ownPackage.dependencies[key];\n    });\n    // Sort the deps\n    const unsortedDependencies = appPackage.dependencies;\n    appPackage.dependencies = {};\n    Object.keys(unsortedDependencies)\n      .sort()\n      .forEach(key => {\n        appPackage.dependencies[key] = unsortedDependencies[key];\n      });\n    console.log();\n\n    console.log(cyan('Updating the scripts'));\n    delete appPackage.scripts['eject'];\n    Object.keys(appPackage.scripts).forEach(key => {\n      Object.keys(ownPackage.bin).forEach(binKey => {\n        const regex = new RegExp(binKey + ' (\\\\w+)', 'g');\n        if (!regex.test(appPackage.scripts[key])) {\n          return;\n        }\n        appPackage.scripts[key] = appPackage.scripts[key].replace(\n          regex,\n          'node scripts/$1.js'\n        );\n        console.log(\n          `  Replacing ${cyan(`\"${binKey} ${key}\"`)} with ${cyan(\n            `\"node scripts/${key}.js\"`\n          )}`\n        );\n      });\n    });\n\n    console.log();\n    console.log(cyan('Configuring package.json'));\n    // Add Jest config\n    console.log(`  Adding ${cyan('Jest')} configuration`);\n    appPackage.jest = jestConfig;\n\n    // Add Babel config\n    console.log(`  Adding ${cyan('Babel')} preset`);\n    appPackage.babel = {\n      presets: ['react-app'],\n    };\n\n    // Add ESlint config\n    if (!appPackage.eslintConfig) {\n      console.log(`  Adding ${cyan('ESLint')} configuration`);\n      appPackage.eslintConfig = {\n        extends: 'react-app',\n      };\n    }\n\n    fs.writeFileSync(\n      path.join(appPath, 'package.json'),\n      JSON.stringify(appPackage, null, 2) + os.EOL\n    );\n    console.log();\n\n    if (fs.existsSync(paths.appTypeDeclarations)) {\n      try {\n        // Read app declarations file\n        let content = fs.readFileSync(paths.appTypeDeclarations, 'utf8');\n        const ownContent =\n          fs.readFileSync(paths.ownTypeDeclarations, 'utf8').trim() + os.EOL;\n\n        // Remove react-scripts reference since they're getting a copy of the types in their project\n        content =\n          content\n            // Remove react-scripts types\n            .replace(\n              /^\\s*\\/\\/\\/\\s*<reference\\s+types.+?\"react-scripts\".*\\/>.*(?:\\n|$)/gm,\n              ''\n            )\n            .trim() + os.EOL;\n\n        fs.writeFileSync(\n          paths.appTypeDeclarations,\n          (ownContent + os.EOL + content).trim() + os.EOL\n        );\n      } catch (e) {\n        // It's not essential that this succeeds, the TypeScript user should\n        // be able to re-create these types with ease.\n      }\n    }\n\n    // \"Don't destroy what isn't ours\"\n    if (ownPath.indexOf(appPath) === 0) {\n      try {\n        // remove react-scripts and react-scripts binaries from app node_modules\n        Object.keys(ownPackage.bin).forEach(binKey => {\n          fs.removeSync(path.join(appPath, 'node_modules', '.bin', binKey));\n        });\n        fs.removeSync(ownPath);\n      } catch (e) {\n        // It's not essential that this succeeds\n      }\n    }\n\n    if (fs.existsSync(paths.yarnLockFile)) {\n      const windowsCmdFilePath = path.join(\n        appPath,\n        'node_modules',\n        '.bin',\n        'react-scripts.cmd'\n      );\n      let windowsCmdFileContent;\n      if (process.platform === 'win32') {\n        // https://github.com/facebook/create-react-app/pull/3806#issuecomment-357781035\n        // Yarn is diligent about cleaning up after itself, but this causes the react-scripts.cmd file\n        // to be deleted while it is running. This trips Windows up after the eject completes.\n        // We'll read the batch file and later \"write it back\" to match npm behavior.\n        try {\n          windowsCmdFileContent = fs.readFileSync(windowsCmdFilePath);\n        } catch (err) {\n          // If this fails we're not worse off than if we didn't try to fix it.\n        }\n      }\n\n      console.log(cyan('Running yarn...'));\n      spawnSync('yarnpkg', ['--cwd', process.cwd()], { stdio: 'inherit' });\n\n      if (windowsCmdFileContent && !fs.existsSync(windowsCmdFilePath)) {\n        try {\n          fs.writeFileSync(windowsCmdFilePath, windowsCmdFileContent);\n        } catch (err) {\n          // If this fails we're not worse off than if we didn't try to fix it.\n        }\n      }\n    } else {\n      console.log(cyan('Running npm install...'));\n      spawnSync('npm', ['install', '--loglevel', 'error'], {\n        stdio: 'inherit',\n      });\n    }\n    console.log(green('Ejected successfully!'));\n    console.log();\n\n    if (tryGitAdd(appPath)) {\n      console.log(cyan('Staged ejected files for commit.'));\n      console.log();\n    }\n\n    console.log(\n      green('Please consider sharing why you ejected in this survey:')\n    );\n    console.log(green('  http://goo.gl/forms/Bi6CZjk1EqsdelXk1'));\n    console.log();\n  });\n"]},"metadata":{},"sourceType":"script"}