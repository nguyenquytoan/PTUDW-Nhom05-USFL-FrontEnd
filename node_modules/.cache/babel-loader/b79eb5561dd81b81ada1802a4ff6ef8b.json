{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"@babel/core\");\n\nconst buildClassDecorator = (0, _core.template)(`\n  DECORATOR(CLASS_REF = INNER) || CLASS_REF;\n`);\nconst buildClassPrototype = (0, _core.template)(`\n  CLASS_REF.prototype;\n`);\nconst buildGetDescriptor = (0, _core.template)(`\n    Object.getOwnPropertyDescriptor(TARGET, PROPERTY);\n`);\nconst buildGetObjectInitializer = (0, _core.template)(`\n    (TEMP = Object.getOwnPropertyDescriptor(TARGET, PROPERTY), (TEMP = TEMP ? TEMP.value : undefined), {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        initializer: function(){\n            return TEMP;\n        }\n    })\n`);\nconst WARNING_CALLS = new WeakSet();\n\nfunction applyEnsureOrdering(path) {\n  const decorators = (path.isClass() ? [path].concat(path.get(\"body.body\")) : path.get(\"properties\")).reduce((acc, prop) => acc.concat(prop.node.decorators || []), []);\n  const identDecorators = decorators.filter(decorator => !_core.types.isIdentifier(decorator.expression));\n  if (identDecorators.length === 0) return;\n  return _core.types.sequenceExpression(identDecorators.map(decorator => {\n    const expression = decorator.expression;\n    const id = decorator.expression = path.scope.generateDeclaredUidIdentifier(\"dec\");\n    return _core.types.assignmentExpression(\"=\", id, expression);\n  }).concat([path.node]));\n}\n\nfunction applyClassDecorators(classPath) {\n  if (!hasClassDecorators(classPath.node)) return;\n  const decorators = classPath.node.decorators || [];\n  classPath.node.decorators = null;\n  const name = classPath.scope.generateDeclaredUidIdentifier(\"class\");\n  return decorators.map(dec => dec.expression).reverse().reduce(function (acc, decorator) {\n    return buildClassDecorator({\n      CLASS_REF: _core.types.cloneNode(name),\n      DECORATOR: _core.types.cloneNode(decorator),\n      INNER: acc\n    }).expression;\n  }, classPath.node);\n}\n\nfunction hasClassDecorators(classNode) {\n  return !!(classNode.decorators && classNode.decorators.length);\n}\n\nfunction applyMethodDecorators(path, state) {\n  if (!hasMethodDecorators(path.node.body.body)) return;\n  return applyTargetDecorators(path, state, path.node.body.body);\n}\n\nfunction hasMethodDecorators(body) {\n  return body.some(node => node.decorators && node.decorators.length);\n}\n\nfunction applyObjectDecorators(path, state) {\n  if (!hasMethodDecorators(path.node.properties)) return;\n  return applyTargetDecorators(path, state, path.node.properties);\n}\n\nfunction applyTargetDecorators(path, state, decoratedProps) {\n  const name = path.scope.generateDeclaredUidIdentifier(path.isClass() ? \"class\" : \"obj\");\n  const exprs = decoratedProps.reduce(function (acc, node) {\n    const decorators = node.decorators || [];\n    node.decorators = null;\n    if (decorators.length === 0) return acc;\n\n    if (node.computed) {\n      throw path.buildCodeFrameError(\"Computed method/property decorators are not yet supported.\");\n    }\n\n    const property = _core.types.isLiteral(node.key) ? node.key : _core.types.stringLiteral(node.key.name);\n    const target = path.isClass() && !node.static ? buildClassPrototype({\n      CLASS_REF: name\n    }).expression : name;\n\n    if (_core.types.isClassProperty(node, {\n      static: false\n    })) {\n      const descriptor = path.scope.generateDeclaredUidIdentifier(\"descriptor\");\n      const initializer = node.value ? _core.types.functionExpression(null, [], _core.types.blockStatement([_core.types.returnStatement(node.value)])) : _core.types.nullLiteral();\n      node.value = _core.types.callExpression(state.addHelper(\"initializerWarningHelper\"), [descriptor, _core.types.thisExpression()]);\n      WARNING_CALLS.add(node.value);\n      acc = acc.concat([_core.types.assignmentExpression(\"=\", descriptor, _core.types.callExpression(state.addHelper(\"applyDecoratedDescriptor\"), [_core.types.cloneNode(target), _core.types.cloneNode(property), _core.types.arrayExpression(decorators.map(dec => _core.types.cloneNode(dec.expression))), _core.types.objectExpression([_core.types.objectProperty(_core.types.identifier(\"configurable\"), _core.types.booleanLiteral(true)), _core.types.objectProperty(_core.types.identifier(\"enumerable\"), _core.types.booleanLiteral(true)), _core.types.objectProperty(_core.types.identifier(\"writable\"), _core.types.booleanLiteral(true)), _core.types.objectProperty(_core.types.identifier(\"initializer\"), initializer)])]))]);\n    } else {\n      acc = acc.concat(_core.types.callExpression(state.addHelper(\"applyDecoratedDescriptor\"), [_core.types.cloneNode(target), _core.types.cloneNode(property), _core.types.arrayExpression(decorators.map(dec => _core.types.cloneNode(dec.expression))), _core.types.isObjectProperty(node) || _core.types.isClassProperty(node, {\n        static: true\n      }) ? buildGetObjectInitializer({\n        TEMP: path.scope.generateDeclaredUidIdentifier(\"init\"),\n        TARGET: _core.types.cloneNode(target),\n        PROPERTY: _core.types.cloneNode(property)\n      }).expression : buildGetDescriptor({\n        TARGET: _core.types.cloneNode(target),\n        PROPERTY: _core.types.cloneNode(property)\n      }).expression, _core.types.cloneNode(target)]));\n    }\n\n    return acc;\n  }, []);\n  return _core.types.sequenceExpression([_core.types.assignmentExpression(\"=\", _core.types.cloneNode(name), path.node), _core.types.sequenceExpression(exprs), _core.types.cloneNode(name)]);\n}\n\nfunction decoratedClassToExpression({\n  node,\n  scope\n}) {\n  if (!hasClassDecorators(node) && !hasMethodDecorators(node.body.body)) {\n    return;\n  }\n\n  const ref = node.id ? _core.types.cloneNode(node.id) : scope.generateUidIdentifier(\"class\");\n  return _core.types.variableDeclaration(\"let\", [_core.types.variableDeclarator(ref, _core.types.toExpression(node))]);\n}\n\nvar _default = {\n  ExportDefaultDeclaration(path) {\n    const decl = path.get(\"declaration\");\n    if (!decl.isClassDeclaration()) return;\n    const replacement = decoratedClassToExpression(decl);\n\n    if (replacement) {\n      const [varDeclPath] = path.replaceWithMultiple([replacement, _core.types.exportNamedDeclaration(null, [_core.types.exportSpecifier(_core.types.cloneNode(replacement.declarations[0].id), _core.types.identifier(\"default\"))])]);\n\n      if (!decl.node.id) {\n        path.scope.registerDeclaration(varDeclPath);\n      }\n    }\n  },\n\n  ClassDeclaration(path) {\n    const replacement = decoratedClassToExpression(path);\n\n    if (replacement) {\n      path.replaceWith(replacement);\n    }\n  },\n\n  ClassExpression(path, state) {\n    const decoratedClass = applyEnsureOrdering(path) || applyClassDecorators(path, state) || applyMethodDecorators(path, state);\n    if (decoratedClass) path.replaceWith(decoratedClass);\n  },\n\n  ObjectExpression(path, state) {\n    const decoratedObject = applyEnsureOrdering(path) || applyObjectDecorators(path, state);\n    if (decoratedObject) path.replaceWith(decoratedObject);\n  },\n\n  AssignmentExpression(path, state) {\n    if (!WARNING_CALLS.has(path.node.right)) return;\n    path.replaceWith(_core.types.callExpression(state.addHelper(\"initializerDefineProperty\"), [_core.types.cloneNode(path.get(\"left.object\").node), _core.types.stringLiteral(path.get(\"left.property\").node.name || path.get(\"left.property\").node.value), _core.types.cloneNode(path.get(\"right.arguments\")[0].node), _core.types.cloneNode(path.get(\"right.arguments\")[1].node)]));\n  },\n\n  CallExpression(path, state) {\n    if (path.node.arguments.length !== 3) return;\n    if (!WARNING_CALLS.has(path.node.arguments[2])) return;\n\n    if (path.node.callee.name !== state.addHelper(\"defineProperty\").name) {\n      return;\n    }\n\n    path.replaceWith(_core.types.callExpression(state.addHelper(\"initializerDefineProperty\"), [_core.types.cloneNode(path.get(\"arguments\")[0].node), _core.types.cloneNode(path.get(\"arguments\")[1].node), _core.types.cloneNode(path.get(\"arguments.2.arguments\")[0].node), _core.types.cloneNode(path.get(\"arguments.2.arguments\")[1].node)]));\n  }\n\n};\nexports.default = _default;","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/@babel/plugin-proposal-decorators/lib/transformer-legacy.js"],"names":["Object","defineProperty","exports","value","default","_core","require","buildClassDecorator","template","buildClassPrototype","buildGetDescriptor","buildGetObjectInitializer","WARNING_CALLS","WeakSet","applyEnsureOrdering","path","decorators","isClass","concat","get","reduce","acc","prop","node","identDecorators","filter","decorator","types","isIdentifier","expression","length","sequenceExpression","map","id","scope","generateDeclaredUidIdentifier","assignmentExpression","applyClassDecorators","classPath","hasClassDecorators","name","dec","reverse","CLASS_REF","cloneNode","DECORATOR","INNER","classNode","applyMethodDecorators","state","hasMethodDecorators","body","applyTargetDecorators","some","applyObjectDecorators","properties","decoratedProps","exprs","computed","buildCodeFrameError","property","isLiteral","key","stringLiteral","target","static","isClassProperty","descriptor","initializer","functionExpression","blockStatement","returnStatement","nullLiteral","callExpression","addHelper","thisExpression","add","arrayExpression","objectExpression","objectProperty","identifier","booleanLiteral","isObjectProperty","TEMP","TARGET","PROPERTY","decoratedClassToExpression","ref","generateUidIdentifier","variableDeclaration","variableDeclarator","toExpression","_default","ExportDefaultDeclaration","decl","isClassDeclaration","replacement","varDeclPath","replaceWithMultiple","exportNamedDeclaration","exportSpecifier","declarations","registerDeclaration","ClassDeclaration","replaceWith","ClassExpression","decoratedClass","ObjectExpression","decoratedObject","AssignmentExpression","has","right","CallExpression","arguments","callee"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,KAAK,GAAGC,OAAO,CAAC,aAAD,CAAnB;;AAEA,MAAMC,mBAAmB,GAAG,CAAC,GAAGF,KAAK,CAACG,QAAV,EAAqB;;CAArB,CAA5B;AAGA,MAAMC,mBAAmB,GAAG,CAAC,GAAGJ,KAAK,CAACG,QAAV,EAAqB;;CAArB,CAA5B;AAGA,MAAME,kBAAkB,GAAG,CAAC,GAAGL,KAAK,CAACG,QAAV,EAAqB;;CAArB,CAA3B;AAGA,MAAMG,yBAAyB,GAAG,CAAC,GAAGN,KAAK,CAACG,QAAV,EAAqB;;;;;;;;;CAArB,CAAlC;AAUA,MAAMI,aAAa,GAAG,IAAIC,OAAJ,EAAtB;;AAEA,SAASC,mBAAT,CAA6BC,IAA7B,EAAmC;AACjC,QAAMC,UAAU,GAAG,CAACD,IAAI,CAACE,OAAL,KAAiB,CAACF,IAAD,EAAOG,MAAP,CAAcH,IAAI,CAACI,GAAL,CAAS,WAAT,CAAd,CAAjB,GAAwDJ,IAAI,CAACI,GAAL,CAAS,YAAT,CAAzD,EAAiFC,MAAjF,CAAwF,CAACC,GAAD,EAAMC,IAAN,KAAeD,GAAG,CAACH,MAAJ,CAAWI,IAAI,CAACC,IAAL,CAAUP,UAAV,IAAwB,EAAnC,CAAvG,EAA+I,EAA/I,CAAnB;AACA,QAAMQ,eAAe,GAAGR,UAAU,CAACS,MAAX,CAAkBC,SAAS,IAAI,CAACrB,KAAK,CAACsB,KAAN,CAAYC,YAAZ,CAAyBF,SAAS,CAACG,UAAnC,CAAhC,CAAxB;AACA,MAAIL,eAAe,CAACM,MAAhB,KAA2B,CAA/B,EAAkC;AAClC,SAAOzB,KAAK,CAACsB,KAAN,CAAYI,kBAAZ,CAA+BP,eAAe,CAACQ,GAAhB,CAAoBN,SAAS,IAAI;AACrE,UAAMG,UAAU,GAAGH,SAAS,CAACG,UAA7B;AACA,UAAMI,EAAE,GAAGP,SAAS,CAACG,UAAV,GAAuBd,IAAI,CAACmB,KAAL,CAAWC,6BAAX,CAAyC,KAAzC,CAAlC;AACA,WAAO9B,KAAK,CAACsB,KAAN,CAAYS,oBAAZ,CAAiC,GAAjC,EAAsCH,EAAtC,EAA0CJ,UAA1C,CAAP;AACD,GAJqC,EAInCX,MAJmC,CAI5B,CAACH,IAAI,CAACQ,IAAN,CAJ4B,CAA/B,CAAP;AAKD;;AAED,SAASc,oBAAT,CAA8BC,SAA9B,EAAyC;AACvC,MAAI,CAACC,kBAAkB,CAACD,SAAS,CAACf,IAAX,CAAvB,EAAyC;AACzC,QAAMP,UAAU,GAAGsB,SAAS,CAACf,IAAV,CAAeP,UAAf,IAA6B,EAAhD;AACAsB,EAAAA,SAAS,CAACf,IAAV,CAAeP,UAAf,GAA4B,IAA5B;AACA,QAAMwB,IAAI,GAAGF,SAAS,CAACJ,KAAV,CAAgBC,6BAAhB,CAA8C,OAA9C,CAAb;AACA,SAAOnB,UAAU,CAACgB,GAAX,CAAeS,GAAG,IAAIA,GAAG,CAACZ,UAA1B,EAAsCa,OAAtC,GAAgDtB,MAAhD,CAAuD,UAAUC,GAAV,EAAeK,SAAf,EAA0B;AACtF,WAAOnB,mBAAmB,CAAC;AACzBoC,MAAAA,SAAS,EAAEtC,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBJ,IAAtB,CADc;AAEzBK,MAAAA,SAAS,EAAExC,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBlB,SAAtB,CAFc;AAGzBoB,MAAAA,KAAK,EAAEzB;AAHkB,KAAD,CAAnB,CAIJQ,UAJH;AAKD,GANM,EAMJS,SAAS,CAACf,IANN,CAAP;AAOD;;AAED,SAASgB,kBAAT,CAA4BQ,SAA5B,EAAuC;AACrC,SAAO,CAAC,EAAEA,SAAS,CAAC/B,UAAV,IAAwB+B,SAAS,CAAC/B,UAAV,CAAqBc,MAA/C,CAAR;AACD;;AAED,SAASkB,qBAAT,CAA+BjC,IAA/B,EAAqCkC,KAArC,EAA4C;AAC1C,MAAI,CAACC,mBAAmB,CAACnC,IAAI,CAACQ,IAAL,CAAU4B,IAAV,CAAeA,IAAhB,CAAxB,EAA+C;AAC/C,SAAOC,qBAAqB,CAACrC,IAAD,EAAOkC,KAAP,EAAclC,IAAI,CAACQ,IAAL,CAAU4B,IAAV,CAAeA,IAA7B,CAA5B;AACD;;AAED,SAASD,mBAAT,CAA6BC,IAA7B,EAAmC;AACjC,SAAOA,IAAI,CAACE,IAAL,CAAU9B,IAAI,IAAIA,IAAI,CAACP,UAAL,IAAmBO,IAAI,CAACP,UAAL,CAAgBc,MAArD,CAAP;AACD;;AAED,SAASwB,qBAAT,CAA+BvC,IAA/B,EAAqCkC,KAArC,EAA4C;AAC1C,MAAI,CAACC,mBAAmB,CAACnC,IAAI,CAACQ,IAAL,CAAUgC,UAAX,CAAxB,EAAgD;AAChD,SAAOH,qBAAqB,CAACrC,IAAD,EAAOkC,KAAP,EAAclC,IAAI,CAACQ,IAAL,CAAUgC,UAAxB,CAA5B;AACD;;AAED,SAASH,qBAAT,CAA+BrC,IAA/B,EAAqCkC,KAArC,EAA4CO,cAA5C,EAA4D;AAC1D,QAAMhB,IAAI,GAAGzB,IAAI,CAACmB,KAAL,CAAWC,6BAAX,CAAyCpB,IAAI,CAACE,OAAL,KAAiB,OAAjB,GAA2B,KAApE,CAAb;AACA,QAAMwC,KAAK,GAAGD,cAAc,CAACpC,MAAf,CAAsB,UAAUC,GAAV,EAAeE,IAAf,EAAqB;AACvD,UAAMP,UAAU,GAAGO,IAAI,CAACP,UAAL,IAAmB,EAAtC;AACAO,IAAAA,IAAI,CAACP,UAAL,GAAkB,IAAlB;AACA,QAAIA,UAAU,CAACc,MAAX,KAAsB,CAA1B,EAA6B,OAAOT,GAAP;;AAE7B,QAAIE,IAAI,CAACmC,QAAT,EAAmB;AACjB,YAAM3C,IAAI,CAAC4C,mBAAL,CAAyB,4DAAzB,CAAN;AACD;;AAED,UAAMC,QAAQ,GAAGvD,KAAK,CAACsB,KAAN,CAAYkC,SAAZ,CAAsBtC,IAAI,CAACuC,GAA3B,IAAkCvC,IAAI,CAACuC,GAAvC,GAA6CzD,KAAK,CAACsB,KAAN,CAAYoC,aAAZ,CAA0BxC,IAAI,CAACuC,GAAL,CAAStB,IAAnC,CAA9D;AACA,UAAMwB,MAAM,GAAGjD,IAAI,CAACE,OAAL,MAAkB,CAACM,IAAI,CAAC0C,MAAxB,GAAiCxD,mBAAmB,CAAC;AAClEkC,MAAAA,SAAS,EAAEH;AADuD,KAAD,CAAnB,CAE7CX,UAFY,GAECW,IAFhB;;AAIA,QAAInC,KAAK,CAACsB,KAAN,CAAYuC,eAAZ,CAA4B3C,IAA5B,EAAkC;AACpC0C,MAAAA,MAAM,EAAE;AAD4B,KAAlC,CAAJ,EAEI;AACF,YAAME,UAAU,GAAGpD,IAAI,CAACmB,KAAL,CAAWC,6BAAX,CAAyC,YAAzC,CAAnB;AACA,YAAMiC,WAAW,GAAG7C,IAAI,CAACpB,KAAL,GAAaE,KAAK,CAACsB,KAAN,CAAY0C,kBAAZ,CAA+B,IAA/B,EAAqC,EAArC,EAAyChE,KAAK,CAACsB,KAAN,CAAY2C,cAAZ,CAA2B,CAACjE,KAAK,CAACsB,KAAN,CAAY4C,eAAZ,CAA4BhD,IAAI,CAACpB,KAAjC,CAAD,CAA3B,CAAzC,CAAb,GAA+HE,KAAK,CAACsB,KAAN,CAAY6C,WAAZ,EAAnJ;AACAjD,MAAAA,IAAI,CAACpB,KAAL,GAAaE,KAAK,CAACsB,KAAN,CAAY8C,cAAZ,CAA2BxB,KAAK,CAACyB,SAAN,CAAgB,0BAAhB,CAA3B,EAAwE,CAACP,UAAD,EAAa9D,KAAK,CAACsB,KAAN,CAAYgD,cAAZ,EAAb,CAAxE,CAAb;AACA/D,MAAAA,aAAa,CAACgE,GAAd,CAAkBrD,IAAI,CAACpB,KAAvB;AACAkB,MAAAA,GAAG,GAAGA,GAAG,CAACH,MAAJ,CAAW,CAACb,KAAK,CAACsB,KAAN,CAAYS,oBAAZ,CAAiC,GAAjC,EAAsC+B,UAAtC,EAAkD9D,KAAK,CAACsB,KAAN,CAAY8C,cAAZ,CAA2BxB,KAAK,CAACyB,SAAN,CAAgB,0BAAhB,CAA3B,EAAwE,CAACrE,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBoB,MAAtB,CAAD,EAAgC3D,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBgB,QAAtB,CAAhC,EAAiEvD,KAAK,CAACsB,KAAN,CAAYkD,eAAZ,CAA4B7D,UAAU,CAACgB,GAAX,CAAeS,GAAG,IAAIpC,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBH,GAAG,CAACZ,UAA1B,CAAtB,CAA5B,CAAjE,EAA4JxB,KAAK,CAACsB,KAAN,CAAYmD,gBAAZ,CAA6B,CAACzE,KAAK,CAACsB,KAAN,CAAYoD,cAAZ,CAA2B1E,KAAK,CAACsB,KAAN,CAAYqD,UAAZ,CAAuB,cAAvB,CAA3B,EAAmE3E,KAAK,CAACsB,KAAN,CAAYsD,cAAZ,CAA2B,IAA3B,CAAnE,CAAD,EAAuG5E,KAAK,CAACsB,KAAN,CAAYoD,cAAZ,CAA2B1E,KAAK,CAACsB,KAAN,CAAYqD,UAAZ,CAAuB,YAAvB,CAA3B,EAAiE3E,KAAK,CAACsB,KAAN,CAAYsD,cAAZ,CAA2B,IAA3B,CAAjE,CAAvG,EAA2M5E,KAAK,CAACsB,KAAN,CAAYoD,cAAZ,CAA2B1E,KAAK,CAACsB,KAAN,CAAYqD,UAAZ,CAAuB,UAAvB,CAA3B,EAA+D3E,KAAK,CAACsB,KAAN,CAAYsD,cAAZ,CAA2B,IAA3B,CAA/D,CAA3M,EAA6S5E,KAAK,CAACsB,KAAN,CAAYoD,cAAZ,CAA2B1E,KAAK,CAACsB,KAAN,CAAYqD,UAAZ,CAAuB,aAAvB,CAA3B,EAAkEZ,WAAlE,CAA7S,CAA7B,CAA5J,CAAxE,CAAlD,CAAD,CAAX,CAAN;AACD,KARD,MAQO;AACL/C,MAAAA,GAAG,GAAGA,GAAG,CAACH,MAAJ,CAAWb,KAAK,CAACsB,KAAN,CAAY8C,cAAZ,CAA2BxB,KAAK,CAACyB,SAAN,CAAgB,0BAAhB,CAA3B,EAAwE,CAACrE,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBoB,MAAtB,CAAD,EAAgC3D,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBgB,QAAtB,CAAhC,EAAiEvD,KAAK,CAACsB,KAAN,CAAYkD,eAAZ,CAA4B7D,UAAU,CAACgB,GAAX,CAAeS,GAAG,IAAIpC,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBH,GAAG,CAACZ,UAA1B,CAAtB,CAA5B,CAAjE,EAA4JxB,KAAK,CAACsB,KAAN,CAAYuD,gBAAZ,CAA6B3D,IAA7B,KAAsClB,KAAK,CAACsB,KAAN,CAAYuC,eAAZ,CAA4B3C,IAA5B,EAAkC;AAC3T0C,QAAAA,MAAM,EAAE;AADmT,OAAlC,CAAtC,GAEhPtD,yBAAyB,CAAC;AAC7BwE,QAAAA,IAAI,EAAEpE,IAAI,CAACmB,KAAL,CAAWC,6BAAX,CAAyC,MAAzC,CADuB;AAE7BiD,QAAAA,MAAM,EAAE/E,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBoB,MAAtB,CAFqB;AAG7BqB,QAAAA,QAAQ,EAAEhF,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBgB,QAAtB;AAHmB,OAAD,CAAzB,CAIF/B,UANkP,GAMrOnB,kBAAkB,CAAC;AACjC0E,QAAAA,MAAM,EAAE/E,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBoB,MAAtB,CADyB;AAEjCqB,QAAAA,QAAQ,EAAEhF,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBgB,QAAtB;AAFuB,OAAD,CAAlB,CAGb/B,UATsF,EAS1ExB,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBoB,MAAtB,CAT0E,CAAxE,CAAX,CAAN;AAUD;;AAED,WAAO3C,GAAP;AACD,GApCa,EAoCX,EApCW,CAAd;AAqCA,SAAOhB,KAAK,CAACsB,KAAN,CAAYI,kBAAZ,CAA+B,CAAC1B,KAAK,CAACsB,KAAN,CAAYS,oBAAZ,CAAiC,GAAjC,EAAsC/B,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBJ,IAAtB,CAAtC,EAAmEzB,IAAI,CAACQ,IAAxE,CAAD,EAAgFlB,KAAK,CAACsB,KAAN,CAAYI,kBAAZ,CAA+B0B,KAA/B,CAAhF,EAAuHpD,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBJ,IAAtB,CAAvH,CAA/B,CAAP;AACD;;AAED,SAAS8C,0BAAT,CAAoC;AAClC/D,EAAAA,IADkC;AAElCW,EAAAA;AAFkC,CAApC,EAGG;AACD,MAAI,CAACK,kBAAkB,CAAChB,IAAD,CAAnB,IAA6B,CAAC2B,mBAAmB,CAAC3B,IAAI,CAAC4B,IAAL,CAAUA,IAAX,CAArD,EAAuE;AACrE;AACD;;AAED,QAAMoC,GAAG,GAAGhE,IAAI,CAACU,EAAL,GAAU5B,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBrB,IAAI,CAACU,EAA3B,CAAV,GAA2CC,KAAK,CAACsD,qBAAN,CAA4B,OAA5B,CAAvD;AACA,SAAOnF,KAAK,CAACsB,KAAN,CAAY8D,mBAAZ,CAAgC,KAAhC,EAAuC,CAACpF,KAAK,CAACsB,KAAN,CAAY+D,kBAAZ,CAA+BH,GAA/B,EAAoClF,KAAK,CAACsB,KAAN,CAAYgE,YAAZ,CAAyBpE,IAAzB,CAApC,CAAD,CAAvC,CAAP;AACD;;AAED,IAAIqE,QAAQ,GAAG;AACbC,EAAAA,wBAAwB,CAAC9E,IAAD,EAAO;AAC7B,UAAM+E,IAAI,GAAG/E,IAAI,CAACI,GAAL,CAAS,aAAT,CAAb;AACA,QAAI,CAAC2E,IAAI,CAACC,kBAAL,EAAL,EAAgC;AAChC,UAAMC,WAAW,GAAGV,0BAA0B,CAACQ,IAAD,CAA9C;;AAEA,QAAIE,WAAJ,EAAiB;AACf,YAAM,CAACC,WAAD,IAAgBlF,IAAI,CAACmF,mBAAL,CAAyB,CAACF,WAAD,EAAc3F,KAAK,CAACsB,KAAN,CAAYwE,sBAAZ,CAAmC,IAAnC,EAAyC,CAAC9F,KAAK,CAACsB,KAAN,CAAYyE,eAAZ,CAA4B/F,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsBoD,WAAW,CAACK,YAAZ,CAAyB,CAAzB,EAA4BpE,EAAlD,CAA5B,EAAmF5B,KAAK,CAACsB,KAAN,CAAYqD,UAAZ,CAAuB,SAAvB,CAAnF,CAAD,CAAzC,CAAd,CAAzB,CAAtB;;AAEA,UAAI,CAACc,IAAI,CAACvE,IAAL,CAAUU,EAAf,EAAmB;AACjBlB,QAAAA,IAAI,CAACmB,KAAL,CAAWoE,mBAAX,CAA+BL,WAA/B;AACD;AACF;AACF,GAbY;;AAebM,EAAAA,gBAAgB,CAACxF,IAAD,EAAO;AACrB,UAAMiF,WAAW,GAAGV,0BAA0B,CAACvE,IAAD,CAA9C;;AAEA,QAAIiF,WAAJ,EAAiB;AACfjF,MAAAA,IAAI,CAACyF,WAAL,CAAiBR,WAAjB;AACD;AACF,GArBY;;AAuBbS,EAAAA,eAAe,CAAC1F,IAAD,EAAOkC,KAAP,EAAc;AAC3B,UAAMyD,cAAc,GAAG5F,mBAAmB,CAACC,IAAD,CAAnB,IAA6BsB,oBAAoB,CAACtB,IAAD,EAAOkC,KAAP,CAAjD,IAAkED,qBAAqB,CAACjC,IAAD,EAAOkC,KAAP,CAA9G;AACA,QAAIyD,cAAJ,EAAoB3F,IAAI,CAACyF,WAAL,CAAiBE,cAAjB;AACrB,GA1BY;;AA4BbC,EAAAA,gBAAgB,CAAC5F,IAAD,EAAOkC,KAAP,EAAc;AAC5B,UAAM2D,eAAe,GAAG9F,mBAAmB,CAACC,IAAD,CAAnB,IAA6BuC,qBAAqB,CAACvC,IAAD,EAAOkC,KAAP,CAA1E;AACA,QAAI2D,eAAJ,EAAqB7F,IAAI,CAACyF,WAAL,CAAiBI,eAAjB;AACtB,GA/BY;;AAiCbC,EAAAA,oBAAoB,CAAC9F,IAAD,EAAOkC,KAAP,EAAc;AAChC,QAAI,CAACrC,aAAa,CAACkG,GAAd,CAAkB/F,IAAI,CAACQ,IAAL,CAAUwF,KAA5B,CAAL,EAAyC;AACzChG,IAAAA,IAAI,CAACyF,WAAL,CAAiBnG,KAAK,CAACsB,KAAN,CAAY8C,cAAZ,CAA2BxB,KAAK,CAACyB,SAAN,CAAgB,2BAAhB,CAA3B,EAAyE,CAACrE,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsB7B,IAAI,CAACI,GAAL,CAAS,aAAT,EAAwBI,IAA9C,CAAD,EAAsDlB,KAAK,CAACsB,KAAN,CAAYoC,aAAZ,CAA0BhD,IAAI,CAACI,GAAL,CAAS,eAAT,EAA0BI,IAA1B,CAA+BiB,IAA/B,IAAuCzB,IAAI,CAACI,GAAL,CAAS,eAAT,EAA0BI,IAA1B,CAA+BpB,KAAhG,CAAtD,EAA8JE,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsB7B,IAAI,CAACI,GAAL,CAAS,iBAAT,EAA4B,CAA5B,EAA+BI,IAArD,CAA9J,EAA0NlB,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsB7B,IAAI,CAACI,GAAL,CAAS,iBAAT,EAA4B,CAA5B,EAA+BI,IAArD,CAA1N,CAAzE,CAAjB;AACD,GApCY;;AAsCbyF,EAAAA,cAAc,CAACjG,IAAD,EAAOkC,KAAP,EAAc;AAC1B,QAAIlC,IAAI,CAACQ,IAAL,CAAU0F,SAAV,CAAoBnF,MAApB,KAA+B,CAAnC,EAAsC;AACtC,QAAI,CAAClB,aAAa,CAACkG,GAAd,CAAkB/F,IAAI,CAACQ,IAAL,CAAU0F,SAAV,CAAoB,CAApB,CAAlB,CAAL,EAAgD;;AAEhD,QAAIlG,IAAI,CAACQ,IAAL,CAAU2F,MAAV,CAAiB1E,IAAjB,KAA0BS,KAAK,CAACyB,SAAN,CAAgB,gBAAhB,EAAkClC,IAAhE,EAAsE;AACpE;AACD;;AAEDzB,IAAAA,IAAI,CAACyF,WAAL,CAAiBnG,KAAK,CAACsB,KAAN,CAAY8C,cAAZ,CAA2BxB,KAAK,CAACyB,SAAN,CAAgB,2BAAhB,CAA3B,EAAyE,CAACrE,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsB7B,IAAI,CAACI,GAAL,CAAS,WAAT,EAAsB,CAAtB,EAAyBI,IAA/C,CAAD,EAAuDlB,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsB7B,IAAI,CAACI,GAAL,CAAS,WAAT,EAAsB,CAAtB,EAAyBI,IAA/C,CAAvD,EAA6GlB,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsB7B,IAAI,CAACI,GAAL,CAAS,uBAAT,EAAkC,CAAlC,EAAqCI,IAA3D,CAA7G,EAA+KlB,KAAK,CAACsB,KAAN,CAAYiB,SAAZ,CAAsB7B,IAAI,CAACI,GAAL,CAAS,uBAAT,EAAkC,CAAlC,EAAqCI,IAA3D,CAA/K,CAAzE,CAAjB;AACD;;AA/CY,CAAf;AAkDArB,OAAO,CAACE,OAAR,GAAkBwF,QAAlB","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"@babel/core\");\n\nconst buildClassDecorator = (0, _core.template)(`\n  DECORATOR(CLASS_REF = INNER) || CLASS_REF;\n`);\nconst buildClassPrototype = (0, _core.template)(`\n  CLASS_REF.prototype;\n`);\nconst buildGetDescriptor = (0, _core.template)(`\n    Object.getOwnPropertyDescriptor(TARGET, PROPERTY);\n`);\nconst buildGetObjectInitializer = (0, _core.template)(`\n    (TEMP = Object.getOwnPropertyDescriptor(TARGET, PROPERTY), (TEMP = TEMP ? TEMP.value : undefined), {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        initializer: function(){\n            return TEMP;\n        }\n    })\n`);\nconst WARNING_CALLS = new WeakSet();\n\nfunction applyEnsureOrdering(path) {\n  const decorators = (path.isClass() ? [path].concat(path.get(\"body.body\")) : path.get(\"properties\")).reduce((acc, prop) => acc.concat(prop.node.decorators || []), []);\n  const identDecorators = decorators.filter(decorator => !_core.types.isIdentifier(decorator.expression));\n  if (identDecorators.length === 0) return;\n  return _core.types.sequenceExpression(identDecorators.map(decorator => {\n    const expression = decorator.expression;\n    const id = decorator.expression = path.scope.generateDeclaredUidIdentifier(\"dec\");\n    return _core.types.assignmentExpression(\"=\", id, expression);\n  }).concat([path.node]));\n}\n\nfunction applyClassDecorators(classPath) {\n  if (!hasClassDecorators(classPath.node)) return;\n  const decorators = classPath.node.decorators || [];\n  classPath.node.decorators = null;\n  const name = classPath.scope.generateDeclaredUidIdentifier(\"class\");\n  return decorators.map(dec => dec.expression).reverse().reduce(function (acc, decorator) {\n    return buildClassDecorator({\n      CLASS_REF: _core.types.cloneNode(name),\n      DECORATOR: _core.types.cloneNode(decorator),\n      INNER: acc\n    }).expression;\n  }, classPath.node);\n}\n\nfunction hasClassDecorators(classNode) {\n  return !!(classNode.decorators && classNode.decorators.length);\n}\n\nfunction applyMethodDecorators(path, state) {\n  if (!hasMethodDecorators(path.node.body.body)) return;\n  return applyTargetDecorators(path, state, path.node.body.body);\n}\n\nfunction hasMethodDecorators(body) {\n  return body.some(node => node.decorators && node.decorators.length);\n}\n\nfunction applyObjectDecorators(path, state) {\n  if (!hasMethodDecorators(path.node.properties)) return;\n  return applyTargetDecorators(path, state, path.node.properties);\n}\n\nfunction applyTargetDecorators(path, state, decoratedProps) {\n  const name = path.scope.generateDeclaredUidIdentifier(path.isClass() ? \"class\" : \"obj\");\n  const exprs = decoratedProps.reduce(function (acc, node) {\n    const decorators = node.decorators || [];\n    node.decorators = null;\n    if (decorators.length === 0) return acc;\n\n    if (node.computed) {\n      throw path.buildCodeFrameError(\"Computed method/property decorators are not yet supported.\");\n    }\n\n    const property = _core.types.isLiteral(node.key) ? node.key : _core.types.stringLiteral(node.key.name);\n    const target = path.isClass() && !node.static ? buildClassPrototype({\n      CLASS_REF: name\n    }).expression : name;\n\n    if (_core.types.isClassProperty(node, {\n      static: false\n    })) {\n      const descriptor = path.scope.generateDeclaredUidIdentifier(\"descriptor\");\n      const initializer = node.value ? _core.types.functionExpression(null, [], _core.types.blockStatement([_core.types.returnStatement(node.value)])) : _core.types.nullLiteral();\n      node.value = _core.types.callExpression(state.addHelper(\"initializerWarningHelper\"), [descriptor, _core.types.thisExpression()]);\n      WARNING_CALLS.add(node.value);\n      acc = acc.concat([_core.types.assignmentExpression(\"=\", descriptor, _core.types.callExpression(state.addHelper(\"applyDecoratedDescriptor\"), [_core.types.cloneNode(target), _core.types.cloneNode(property), _core.types.arrayExpression(decorators.map(dec => _core.types.cloneNode(dec.expression))), _core.types.objectExpression([_core.types.objectProperty(_core.types.identifier(\"configurable\"), _core.types.booleanLiteral(true)), _core.types.objectProperty(_core.types.identifier(\"enumerable\"), _core.types.booleanLiteral(true)), _core.types.objectProperty(_core.types.identifier(\"writable\"), _core.types.booleanLiteral(true)), _core.types.objectProperty(_core.types.identifier(\"initializer\"), initializer)])]))]);\n    } else {\n      acc = acc.concat(_core.types.callExpression(state.addHelper(\"applyDecoratedDescriptor\"), [_core.types.cloneNode(target), _core.types.cloneNode(property), _core.types.arrayExpression(decorators.map(dec => _core.types.cloneNode(dec.expression))), _core.types.isObjectProperty(node) || _core.types.isClassProperty(node, {\n        static: true\n      }) ? buildGetObjectInitializer({\n        TEMP: path.scope.generateDeclaredUidIdentifier(\"init\"),\n        TARGET: _core.types.cloneNode(target),\n        PROPERTY: _core.types.cloneNode(property)\n      }).expression : buildGetDescriptor({\n        TARGET: _core.types.cloneNode(target),\n        PROPERTY: _core.types.cloneNode(property)\n      }).expression, _core.types.cloneNode(target)]));\n    }\n\n    return acc;\n  }, []);\n  return _core.types.sequenceExpression([_core.types.assignmentExpression(\"=\", _core.types.cloneNode(name), path.node), _core.types.sequenceExpression(exprs), _core.types.cloneNode(name)]);\n}\n\nfunction decoratedClassToExpression({\n  node,\n  scope\n}) {\n  if (!hasClassDecorators(node) && !hasMethodDecorators(node.body.body)) {\n    return;\n  }\n\n  const ref = node.id ? _core.types.cloneNode(node.id) : scope.generateUidIdentifier(\"class\");\n  return _core.types.variableDeclaration(\"let\", [_core.types.variableDeclarator(ref, _core.types.toExpression(node))]);\n}\n\nvar _default = {\n  ExportDefaultDeclaration(path) {\n    const decl = path.get(\"declaration\");\n    if (!decl.isClassDeclaration()) return;\n    const replacement = decoratedClassToExpression(decl);\n\n    if (replacement) {\n      const [varDeclPath] = path.replaceWithMultiple([replacement, _core.types.exportNamedDeclaration(null, [_core.types.exportSpecifier(_core.types.cloneNode(replacement.declarations[0].id), _core.types.identifier(\"default\"))])]);\n\n      if (!decl.node.id) {\n        path.scope.registerDeclaration(varDeclPath);\n      }\n    }\n  },\n\n  ClassDeclaration(path) {\n    const replacement = decoratedClassToExpression(path);\n\n    if (replacement) {\n      path.replaceWith(replacement);\n    }\n  },\n\n  ClassExpression(path, state) {\n    const decoratedClass = applyEnsureOrdering(path) || applyClassDecorators(path, state) || applyMethodDecorators(path, state);\n    if (decoratedClass) path.replaceWith(decoratedClass);\n  },\n\n  ObjectExpression(path, state) {\n    const decoratedObject = applyEnsureOrdering(path) || applyObjectDecorators(path, state);\n    if (decoratedObject) path.replaceWith(decoratedObject);\n  },\n\n  AssignmentExpression(path, state) {\n    if (!WARNING_CALLS.has(path.node.right)) return;\n    path.replaceWith(_core.types.callExpression(state.addHelper(\"initializerDefineProperty\"), [_core.types.cloneNode(path.get(\"left.object\").node), _core.types.stringLiteral(path.get(\"left.property\").node.name || path.get(\"left.property\").node.value), _core.types.cloneNode(path.get(\"right.arguments\")[0].node), _core.types.cloneNode(path.get(\"right.arguments\")[1].node)]));\n  },\n\n  CallExpression(path, state) {\n    if (path.node.arguments.length !== 3) return;\n    if (!WARNING_CALLS.has(path.node.arguments[2])) return;\n\n    if (path.node.callee.name !== state.addHelper(\"defineProperty\").name) {\n      return;\n    }\n\n    path.replaceWith(_core.types.callExpression(state.addHelper(\"initializerDefineProperty\"), [_core.types.cloneNode(path.get(\"arguments\")[0].node), _core.types.cloneNode(path.get(\"arguments\")[1].node), _core.types.cloneNode(path.get(\"arguments.2.arguments\")[0].node), _core.types.cloneNode(path.get(\"arguments.2.arguments\")[1].node)]));\n  }\n\n};\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}