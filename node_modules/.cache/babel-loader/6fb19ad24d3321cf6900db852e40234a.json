{"ast":null,"code":"var shortenHex = require('./shorten-hex');\n\nvar shortenHsl = require('./shorten-hsl');\n\nvar shortenRgb = require('./shorten-rgb');\n\nvar sortSelectors = require('./sort-selectors');\n\nvar tidyRules = require('./tidy-rules');\n\nvar tidyBlock = require('./tidy-block');\n\nvar tidyAtRule = require('./tidy-at-rule');\n\nvar Hack = require('../hack');\n\nvar removeUnused = require('../remove-unused');\n\nvar restoreFromOptimizing = require('../restore-from-optimizing');\n\nvar wrapForOptimizing = require('../wrap-for-optimizing').all;\n\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\n\nvar Token = require('../../tokenizer/token');\n\nvar Marker = require('../../tokenizer/marker');\n\nvar formatPosition = require('../../utils/format-position');\n\nvar split = require('../../utils/split');\n\nvar serializeRules = require('../../writer/one-time').rules;\n\nvar IgnoreProperty = 'ignore-property';\nvar CHARSET_TOKEN = '@charset';\nvar CHARSET_REGEXP = new RegExp('^' + CHARSET_TOKEN, 'i');\n\nvar DEFAULT_ROUNDING_PRECISION = require('../../options/rounding-precision').DEFAULT;\n\nvar WHOLE_PIXEL_VALUE = /(?:^|\\s|\\()(-?\\d+)px/;\nvar TIME_VALUE = /^(\\-?[\\d\\.]+)(m?s)$/;\nvar HEX_VALUE_PATTERN = /[0-9a-f]/i;\nvar PROPERTY_NAME_PATTERN = /^(?:\\-chrome\\-|\\-[\\w\\-]+\\w|\\w[\\w\\-]+\\w|\\-\\-\\S+)$/;\nvar IMPORT_PREFIX_PATTERN = /^@import/i;\nvar QUOTED_PATTERN = /^('.*'|\".*\")$/;\nvar QUOTED_BUT_SAFE_PATTERN = /^['\"][a-zA-Z][a-zA-Z\\d\\-_]+['\"]$/;\nvar URL_PREFIX_PATTERN = /^url\\(/i;\nvar LOCAL_PREFIX_PATTERN = /^local\\(/i;\nvar VARIABLE_NAME_PATTERN = /^--\\S+$/;\n\nfunction isLocal(value) {\n  return LOCAL_PREFIX_PATTERN.test(value);\n}\n\nfunction isNegative(value) {\n  return value && value[1][0] == '-' && parseFloat(value[1]) < 0;\n}\n\nfunction isQuoted(value) {\n  return QUOTED_PATTERN.test(value);\n}\n\nfunction isUrl(value) {\n  return URL_PREFIX_PATTERN.test(value);\n}\n\nfunction normalizeUrl(value) {\n  return value.replace(URL_PREFIX_PATTERN, 'url(').replace(/\\\\?\\n|\\\\?\\r\\n/g, '');\n}\n\nfunction optimizeBackground(property) {\n  var values = property.value;\n\n  if (values.length == 1 && values[0][1] == 'none') {\n    values[0][1] = '0 0';\n  }\n\n  if (values.length == 1 && values[0][1] == 'transparent') {\n    values[0][1] = '0 0';\n  }\n}\n\nfunction optimizeBorderRadius(property) {\n  var values = property.value;\n  var spliceAt;\n\n  if (values.length == 3 && values[1][1] == '/' && values[0][1] == values[2][1]) {\n    spliceAt = 1;\n  } else if (values.length == 5 && values[2][1] == '/' && values[0][1] == values[3][1] && values[1][1] == values[4][1]) {\n    spliceAt = 2;\n  } else if (values.length == 7 && values[3][1] == '/' && values[0][1] == values[4][1] && values[1][1] == values[5][1] && values[2][1] == values[6][1]) {\n    spliceAt = 3;\n  } else if (values.length == 9 && values[4][1] == '/' && values[0][1] == values[5][1] && values[1][1] == values[6][1] && values[2][1] == values[7][1] && values[3][1] == values[8][1]) {\n    spliceAt = 4;\n  }\n\n  if (spliceAt) {\n    property.value.splice(spliceAt);\n    property.dirty = true;\n  }\n}\n/**\n * @param {string} name\n * @param {string} value\n * @param {Object} compatibility\n * @return {string}\n */\n\n\nfunction optimizeColors(name, value, compatibility) {\n  if (!value.match(/#|rgb|hsl/gi)) {\n    return shortenHex(value);\n  }\n\n  value = value.replace(/(rgb|hsl)a?\\((\\-?\\d+),(\\-?\\d+\\%?),(\\-?\\d+\\%?),(0*[1-9]+[0-9]*(\\.?\\d*)?)\\)/gi, function (match, colorFn, p1, p2, p3, alpha) {\n    return parseInt(alpha, 10) >= 1 ? colorFn + '(' + [p1, p2, p3].join(',') + ')' : match;\n  }).replace(/rgb\\((\\-?\\d+),(\\-?\\d+),(\\-?\\d+)\\)/gi, function (match, red, green, blue) {\n    return shortenRgb(red, green, blue);\n  }).replace(/hsl\\((-?\\d+),(-?\\d+)%?,(-?\\d+)%?\\)/gi, function (match, hue, saturation, lightness) {\n    return shortenHsl(hue, saturation, lightness);\n  }).replace(/(^|[^='\"])#([0-9a-f]{6})/gi, function (match, prefix, color, at, inputValue) {\n    var suffix = inputValue[at + match.length];\n\n    if (suffix && HEX_VALUE_PATTERN.test(suffix)) {\n      return match;\n    } else if (color[0] == color[1] && color[2] == color[3] && color[4] == color[5]) {\n      return (prefix + '#' + color[0] + color[2] + color[4]).toLowerCase();\n    } else {\n      return (prefix + '#' + color).toLowerCase();\n    }\n  }).replace(/(^|[^='\"])#([0-9a-f]{3})/gi, function (match, prefix, color) {\n    return prefix + '#' + color.toLowerCase();\n  }).replace(/(rgb|rgba|hsl|hsla)\\(([^\\)]+)\\)/gi, function (match, colorFunction, colorDef) {\n    var tokens = colorDef.split(',');\n    var colorFnLowercase = colorFunction && colorFunction.toLowerCase();\n    var applies = colorFnLowercase == 'hsl' && tokens.length == 3 || colorFnLowercase == 'hsla' && tokens.length == 4 || colorFnLowercase == 'rgb' && tokens.length === 3 && colorDef.indexOf('%') > 0 || colorFnLowercase == 'rgba' && tokens.length == 4 && colorDef.indexOf('%') > 0;\n\n    if (!applies) {\n      return match;\n    }\n\n    if (tokens[1].indexOf('%') == -1) {\n      tokens[1] += '%';\n    }\n\n    if (tokens[2].indexOf('%') == -1) {\n      tokens[2] += '%';\n    }\n\n    return colorFunction + '(' + tokens.join(',') + ')';\n  });\n\n  if (compatibility.colors.opacity && name.indexOf('background') == -1) {\n    value = value.replace(/(?:rgba|hsla)\\(0,0%?,0%?,0\\)/g, function (match) {\n      if (split(value, ',').pop().indexOf('gradient(') > -1) {\n        return match;\n      }\n\n      return 'transparent';\n    });\n  }\n\n  return shortenHex(value);\n}\n\nfunction optimizeFilter(property) {\n  if (property.value.length == 1) {\n    property.value[0][1] = property.value[0][1].replace(/progid:DXImageTransform\\.Microsoft\\.(Alpha|Chroma)(\\W)/, function (match, filter, suffix) {\n      return filter.toLowerCase() + suffix;\n    });\n  }\n\n  property.value[0][1] = property.value[0][1].replace(/,(\\S)/g, ', $1').replace(/ ?= ?/g, '=');\n}\n\nfunction optimizeFontWeight(property, atIndex) {\n  var value = property.value[atIndex][1];\n\n  if (value == 'normal') {\n    value = '400';\n  } else if (value == 'bold') {\n    value = '700';\n  }\n\n  property.value[atIndex][1] = value;\n}\n\nfunction optimizeMultipleZeros(property) {\n  var values = property.value;\n  var spliceAt;\n\n  if (values.length == 4 && values[0][1] === '0' && values[1][1] === '0' && values[2][1] === '0' && values[3][1] === '0') {\n    if (property.name.indexOf('box-shadow') > -1) {\n      spliceAt = 2;\n    } else {\n      spliceAt = 1;\n    }\n  }\n\n  if (spliceAt) {\n    property.value.splice(spliceAt);\n    property.dirty = true;\n  }\n}\n\nfunction optimizeOutline(property) {\n  var values = property.value;\n\n  if (values.length == 1 && values[0][1] == 'none') {\n    values[0][1] = '0';\n  }\n}\n\nfunction optimizePixelLengths(_, value, compatibility) {\n  if (!WHOLE_PIXEL_VALUE.test(value)) {\n    return value;\n  }\n\n  return value.replace(WHOLE_PIXEL_VALUE, function (match, val) {\n    var newValue;\n    var intVal = parseInt(val);\n\n    if (intVal === 0) {\n      return match;\n    }\n\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.pt && intVal * 3 % 4 === 0) {\n      newValue = intVal * 3 / 4 + 'pt';\n    }\n\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.pc && intVal % 16 === 0) {\n      newValue = intVal / 16 + 'pc';\n    }\n\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.in && intVal % 96 === 0) {\n      newValue = intVal / 96 + 'in';\n    }\n\n    if (newValue) {\n      newValue = match.substring(0, match.indexOf(val)) + newValue;\n    }\n\n    return newValue && newValue.length < match.length ? newValue : match;\n  });\n}\n\nfunction optimizePrecision(_, value, precisionOptions) {\n  if (!precisionOptions.enabled || value.indexOf('.') === -1) {\n    return value;\n  }\n\n  return value.replace(precisionOptions.decimalPointMatcher, '$1$2$3').replace(precisionOptions.zeroMatcher, function (match, integerPart, fractionPart, unit) {\n    var multiplier = precisionOptions.units[unit].multiplier;\n    var parsedInteger = parseInt(integerPart);\n    var integer = isNaN(parsedInteger) ? 0 : parsedInteger;\n    var fraction = parseFloat(fractionPart);\n    return Math.round((integer + fraction) * multiplier) / multiplier + unit;\n  });\n}\n\nfunction optimizeTimeUnits(_, value) {\n  if (!TIME_VALUE.test(value)) return value;\n  return value.replace(TIME_VALUE, function (match, val, unit) {\n    var newValue;\n\n    if (unit == 'ms') {\n      newValue = parseInt(val) / 1000 + 's';\n    } else if (unit == 's') {\n      newValue = parseFloat(val) * 1000 + 'ms';\n    }\n\n    return newValue.length < match.length ? newValue : match;\n  });\n}\n\nfunction optimizeUnits(name, value, unitsRegexp) {\n  if (/^(?:\\-moz\\-calc|\\-webkit\\-calc|calc|rgb|hsl|rgba|hsla)\\(/.test(value)) {\n    return value;\n  }\n\n  if (name == 'flex' || name == '-ms-flex' || name == '-webkit-flex' || name == 'flex-basis' || name == '-webkit-flex-basis') {\n    return value;\n  }\n\n  if (value.indexOf('%') > 0 && (name == 'height' || name == 'max-height' || name == 'width' || name == 'max-width')) {\n    return value;\n  }\n\n  return value.replace(unitsRegexp, '$1' + '0' + '$2').replace(unitsRegexp, '$1' + '0' + '$2');\n}\n\nfunction optimizeWhitespace(name, value) {\n  if (name.indexOf('filter') > -1 || value.indexOf(' ') == -1 || value.indexOf('expression') === 0) {\n    return value;\n  }\n\n  if (value.indexOf(Marker.SINGLE_QUOTE) > -1 || value.indexOf(Marker.DOUBLE_QUOTE) > -1) {\n    return value;\n  }\n\n  value = value.replace(/\\s+/g, ' ');\n\n  if (value.indexOf('calc') > -1) {\n    value = value.replace(/\\) ?\\/ ?/g, ')/ ');\n  }\n\n  return value.replace(/(\\(;?)\\s+/g, '$1').replace(/\\s+(;?\\))/g, '$1').replace(/, /g, ',');\n}\n\nfunction optimizeZeroDegUnit(_, value) {\n  if (value.indexOf('0deg') == -1) {\n    return value;\n  }\n\n  return value.replace(/\\(0deg\\)/g, '(0)');\n}\n\nfunction optimizeZeroUnits(name, value) {\n  if (value.indexOf('0') == -1) {\n    return value;\n  }\n\n  if (value.indexOf('-') > -1) {\n    value = value.replace(/([^\\w\\d\\-]|^)\\-0([^\\.]|$)/g, '$10$2').replace(/([^\\w\\d\\-]|^)\\-0([^\\.]|$)/g, '$10$2');\n  }\n\n  return value.replace(/(^|\\s)0+([1-9])/g, '$1$2').replace(/(^|\\D)\\.0+(\\D|$)/g, '$10$2').replace(/(^|\\D)\\.0+(\\D|$)/g, '$10$2').replace(/\\.([1-9]*)0+(\\D|$)/g, function (match, nonZeroPart, suffix) {\n    return (nonZeroPart.length > 0 ? '.' : '') + nonZeroPart + suffix;\n  }).replace(/(^|\\D)0\\.(\\d)/g, '$1.$2');\n}\n\nfunction removeQuotes(name, value) {\n  if (name == 'content' || name.indexOf('font-variation-settings') > -1 || name.indexOf('font-feature-settings') > -1 || name == 'grid' || name.indexOf('grid-') > -1) {\n    return value;\n  }\n\n  return QUOTED_BUT_SAFE_PATTERN.test(value) ? value.substring(1, value.length - 1) : value;\n}\n\nfunction removeUrlQuotes(value) {\n  return /^url\\(['\"].+['\"]\\)$/.test(value) && !/^url\\(['\"].*[\\*\\s\\(\\)'\"].*['\"]\\)$/.test(value) && !/^url\\(['\"]data:[^;]+;charset/.test(value) ? value.replace(/[\"']/g, '') : value;\n}\n\nfunction transformValue(propertyName, propertyValue, rule, transformCallback) {\n  var selector = serializeRules(rule);\n  var transformedValue = transformCallback(propertyName, propertyValue, selector);\n\n  if (transformedValue === undefined) {\n    return propertyValue;\n  } else if (transformedValue === false) {\n    return IgnoreProperty;\n  } else {\n    return transformedValue;\n  }\n} //\n\n\nfunction optimizeBody(rule, properties, context) {\n  var options = context.options;\n  var levelOptions = options.level[OptimizationLevel.One];\n  var property, name, type, value;\n  var valueIsUrl;\n  var propertyToken;\n\n  var _properties = wrapForOptimizing(properties, true);\n\n  propertyLoop: for (var i = 0, l = _properties.length; i < l; i++) {\n    property = _properties[i];\n    name = property.name;\n\n    if (!PROPERTY_NAME_PATTERN.test(name)) {\n      propertyToken = property.all[property.position];\n      context.warnings.push('Invalid property name \\'' + name + '\\' at ' + formatPosition(propertyToken[1][2][0]) + '. Ignoring.');\n      property.unused = true;\n    }\n\n    if (property.value.length === 0) {\n      propertyToken = property.all[property.position];\n      context.warnings.push('Empty property \\'' + name + '\\' at ' + formatPosition(propertyToken[1][2][0]) + '. Ignoring.');\n      property.unused = true;\n    }\n\n    if (property.hack && ((property.hack[0] == Hack.ASTERISK || property.hack[0] == Hack.UNDERSCORE) && !options.compatibility.properties.iePrefixHack || property.hack[0] == Hack.BACKSLASH && !options.compatibility.properties.ieSuffixHack || property.hack[0] == Hack.BANG && !options.compatibility.properties.ieBangHack)) {\n      property.unused = true;\n    }\n\n    if (levelOptions.removeNegativePaddings && name.indexOf('padding') === 0 && (isNegative(property.value[0]) || isNegative(property.value[1]) || isNegative(property.value[2]) || isNegative(property.value[3]))) {\n      property.unused = true;\n    }\n\n    if (!options.compatibility.properties.ieFilters && isLegacyFilter(property)) {\n      property.unused = true;\n    }\n\n    if (property.unused) {\n      continue;\n    }\n\n    if (property.block) {\n      optimizeBody(rule, property.value[0][1], context);\n      continue;\n    }\n\n    if (VARIABLE_NAME_PATTERN.test(name)) {\n      continue;\n    }\n\n    for (var j = 0, m = property.value.length; j < m; j++) {\n      type = property.value[j][0];\n      value = property.value[j][1];\n      valueIsUrl = isUrl(value);\n\n      if (type == Token.PROPERTY_BLOCK) {\n        property.unused = true;\n        context.warnings.push('Invalid value token at ' + formatPosition(value[0][1][2][0]) + '. Ignoring.');\n        break;\n      }\n\n      if (valueIsUrl && !context.validator.isUrl(value)) {\n        property.unused = true;\n        context.warnings.push('Broken URL \\'' + value + '\\' at ' + formatPosition(property.value[j][2][0]) + '. Ignoring.');\n        break;\n      }\n\n      if (valueIsUrl) {\n        value = levelOptions.normalizeUrls ? normalizeUrl(value) : value;\n        value = !options.compatibility.properties.urlQuotes ? removeUrlQuotes(value) : value;\n      } else if (isQuoted(value) || isLocal(value)) {\n        value = levelOptions.removeQuotes ? removeQuotes(name, value) : value;\n      } else {\n        value = levelOptions.removeWhitespace ? optimizeWhitespace(name, value) : value;\n        value = optimizePrecision(name, value, options.precision);\n        value = optimizePixelLengths(name, value, options.compatibility);\n        value = levelOptions.replaceTimeUnits ? optimizeTimeUnits(name, value) : value;\n        value = levelOptions.replaceZeroUnits ? optimizeZeroUnits(name, value) : value;\n\n        if (options.compatibility.properties.zeroUnits) {\n          value = optimizeZeroDegUnit(name, value);\n          value = optimizeUnits(name, value, options.unitsRegexp);\n        }\n\n        if (options.compatibility.properties.colors) {\n          value = optimizeColors(name, value, options.compatibility);\n        }\n      }\n\n      value = transformValue(name, value, rule, levelOptions.transform);\n\n      if (value === IgnoreProperty) {\n        property.unused = true;\n        continue propertyLoop;\n      }\n\n      property.value[j][1] = value;\n    }\n\n    if (levelOptions.replaceMultipleZeros) {\n      optimizeMultipleZeros(property);\n    }\n\n    if (name == 'background' && levelOptions.optimizeBackground) {\n      optimizeBackground(property);\n    } else if (name.indexOf('border') === 0 && name.indexOf('radius') > 0 && levelOptions.optimizeBorderRadius) {\n      optimizeBorderRadius(property);\n    } else if (name == 'filter' && levelOptions.optimizeFilter && options.compatibility.properties.ieFilters) {\n      optimizeFilter(property);\n    } else if (name == 'font-weight' && levelOptions.optimizeFontWeight) {\n      optimizeFontWeight(property, 0);\n    } else if (name == 'outline' && levelOptions.optimizeOutline) {\n      optimizeOutline(property);\n    }\n  }\n\n  restoreFromOptimizing(_properties);\n  removeUnused(_properties);\n  removeComments(properties, options);\n}\n\nfunction removeComments(tokens, options) {\n  var token;\n  var i;\n\n  for (i = 0; i < tokens.length; i++) {\n    token = tokens[i];\n\n    if (token[0] != Token.COMMENT) {\n      continue;\n    }\n\n    optimizeComment(token, options);\n\n    if (token[1].length === 0) {\n      tokens.splice(i, 1);\n      i--;\n    }\n  }\n}\n\nfunction optimizeComment(token, options) {\n  if (token[1][2] == Marker.EXCLAMATION && (options.level[OptimizationLevel.One].specialComments == 'all' || options.commentsKept < options.level[OptimizationLevel.One].specialComments)) {\n    options.commentsKept++;\n    return;\n  }\n\n  token[1] = [];\n}\n\nfunction cleanupCharsets(tokens) {\n  var hasCharset = false;\n\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n    if (token[0] != Token.AT_RULE) continue;\n    if (!CHARSET_REGEXP.test(token[1])) continue;\n\n    if (hasCharset || token[1].indexOf(CHARSET_TOKEN) == -1) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    } else {\n      hasCharset = true;\n      tokens.splice(i, 1);\n      tokens.unshift([Token.AT_RULE, token[1].replace(CHARSET_REGEXP, CHARSET_TOKEN)]);\n    }\n  }\n}\n\nfunction buildUnitRegexp(options) {\n  var units = ['px', 'em', 'ex', 'cm', 'mm', 'in', 'pt', 'pc', '%'];\n  var otherUnits = ['ch', 'rem', 'vh', 'vm', 'vmax', 'vmin', 'vw'];\n  otherUnits.forEach(function (unit) {\n    if (options.compatibility.units[unit]) {\n      units.push(unit);\n    }\n  });\n  return new RegExp('(^|\\\\s|\\\\(|,)0(?:' + units.join('|') + ')(\\\\W|$)', 'g');\n}\n\nfunction buildPrecisionOptions(roundingPrecision) {\n  var precisionOptions = {\n    matcher: null,\n    units: {}\n  };\n  var optimizable = [];\n  var unit;\n  var value;\n\n  for (unit in roundingPrecision) {\n    value = roundingPrecision[unit];\n\n    if (value != DEFAULT_ROUNDING_PRECISION) {\n      precisionOptions.units[unit] = {};\n      precisionOptions.units[unit].value = value;\n      precisionOptions.units[unit].multiplier = Math.pow(10, value);\n      optimizable.push(unit);\n    }\n  }\n\n  if (optimizable.length > 0) {\n    precisionOptions.enabled = true;\n    precisionOptions.decimalPointMatcher = new RegExp('(\\\\d)\\\\.($|' + optimizable.join('|') + ')($|\\W)', 'g');\n    precisionOptions.zeroMatcher = new RegExp('(\\\\d*)(\\\\.\\\\d+)(' + optimizable.join('|') + ')', 'g');\n  }\n\n  return precisionOptions;\n}\n\nfunction isImport(token) {\n  return IMPORT_PREFIX_PATTERN.test(token[1]);\n}\n\nfunction isLegacyFilter(property) {\n  var value;\n\n  if (property.name == 'filter' || property.name == '-ms-filter') {\n    value = property.value[0][1];\n    return value.indexOf('progid') > -1 || value.indexOf('alpha') === 0 || value.indexOf('chroma') === 0;\n  } else {\n    return false;\n  }\n}\n\nfunction level1Optimize(tokens, context) {\n  var options = context.options;\n  var levelOptions = options.level[OptimizationLevel.One];\n  var ie7Hack = options.compatibility.selectors.ie7Hack;\n  var adjacentSpace = options.compatibility.selectors.adjacentSpace;\n  var spaceAfterClosingBrace = options.compatibility.properties.spaceAfterClosingBrace;\n  var format = options.format;\n  var mayHaveCharset = false;\n  var afterRules = false;\n  options.unitsRegexp = options.unitsRegexp || buildUnitRegexp(options);\n  options.precision = options.precision || buildPrecisionOptions(levelOptions.roundingPrecision);\n  options.commentsKept = options.commentsKept || 0;\n\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n\n    switch (token[0]) {\n      case Token.AT_RULE:\n        token[1] = isImport(token) && afterRules ? '' : token[1];\n        token[1] = levelOptions.tidyAtRules ? tidyAtRule(token[1]) : token[1];\n        mayHaveCharset = true;\n        break;\n\n      case Token.AT_RULE_BLOCK:\n        optimizeBody(token[1], token[2], context);\n        afterRules = true;\n        break;\n\n      case Token.NESTED_BLOCK:\n        token[1] = levelOptions.tidyBlockScopes ? tidyBlock(token[1], spaceAfterClosingBrace) : token[1];\n        level1Optimize(token[2], context);\n        afterRules = true;\n        break;\n\n      case Token.COMMENT:\n        optimizeComment(token, options);\n        break;\n\n      case Token.RULE:\n        token[1] = levelOptions.tidySelectors ? tidyRules(token[1], !ie7Hack, adjacentSpace, format, context.warnings) : token[1];\n        token[1] = token[1].length > 1 ? sortSelectors(token[1], levelOptions.selectorsSortingMethod) : token[1];\n        optimizeBody(token[1], token[2], context);\n        afterRules = true;\n        break;\n    }\n\n    if (token[0] == Token.COMMENT && token[1].length === 0 || levelOptions.removeEmpty && (token[1].length === 0 || token[2] && token[2].length === 0)) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    }\n  }\n\n  if (levelOptions.cleanupCharsets && mayHaveCharset) {\n    cleanupCharsets(tokens);\n  }\n\n  return tokens;\n}\n\nmodule.exports = level1Optimize;","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/clean-css/lib/optimizer/level-1/optimize.js"],"names":["shortenHex","require","shortenHsl","shortenRgb","sortSelectors","tidyRules","tidyBlock","tidyAtRule","Hack","removeUnused","restoreFromOptimizing","wrapForOptimizing","all","OptimizationLevel","Token","Marker","formatPosition","split","serializeRules","rules","IgnoreProperty","CHARSET_TOKEN","CHARSET_REGEXP","RegExp","DEFAULT_ROUNDING_PRECISION","DEFAULT","WHOLE_PIXEL_VALUE","TIME_VALUE","HEX_VALUE_PATTERN","PROPERTY_NAME_PATTERN","IMPORT_PREFIX_PATTERN","QUOTED_PATTERN","QUOTED_BUT_SAFE_PATTERN","URL_PREFIX_PATTERN","LOCAL_PREFIX_PATTERN","VARIABLE_NAME_PATTERN","isLocal","value","test","isNegative","parseFloat","isQuoted","isUrl","normalizeUrl","replace","optimizeBackground","property","values","length","optimizeBorderRadius","spliceAt","splice","dirty","optimizeColors","name","compatibility","match","colorFn","p1","p2","p3","alpha","parseInt","join","red","green","blue","hue","saturation","lightness","prefix","color","at","inputValue","suffix","toLowerCase","colorFunction","colorDef","tokens","colorFnLowercase","applies","indexOf","colors","opacity","pop","optimizeFilter","filter","optimizeFontWeight","atIndex","optimizeMultipleZeros","optimizeOutline","optimizePixelLengths","_","val","newValue","intVal","properties","shorterLengthUnits","units","pt","pc","in","substring","optimizePrecision","precisionOptions","enabled","decimalPointMatcher","zeroMatcher","integerPart","fractionPart","unit","multiplier","parsedInteger","integer","isNaN","fraction","Math","round","optimizeTimeUnits","optimizeUnits","unitsRegexp","optimizeWhitespace","SINGLE_QUOTE","DOUBLE_QUOTE","optimizeZeroDegUnit","optimizeZeroUnits","nonZeroPart","removeQuotes","removeUrlQuotes","transformValue","propertyName","propertyValue","rule","transformCallback","selector","transformedValue","undefined","optimizeBody","context","options","levelOptions","level","One","type","valueIsUrl","propertyToken","_properties","propertyLoop","i","l","position","warnings","push","unused","hack","ASTERISK","UNDERSCORE","iePrefixHack","BACKSLASH","ieSuffixHack","BANG","ieBangHack","removeNegativePaddings","ieFilters","isLegacyFilter","block","j","m","PROPERTY_BLOCK","validator","normalizeUrls","urlQuotes","removeWhitespace","precision","replaceTimeUnits","replaceZeroUnits","zeroUnits","transform","replaceMultipleZeros","removeComments","token","COMMENT","optimizeComment","EXCLAMATION","specialComments","commentsKept","cleanupCharsets","hasCharset","AT_RULE","unshift","buildUnitRegexp","otherUnits","forEach","buildPrecisionOptions","roundingPrecision","matcher","optimizable","pow","isImport","level1Optimize","ie7Hack","selectors","adjacentSpace","spaceAfterClosingBrace","format","mayHaveCharset","afterRules","tidyAtRules","AT_RULE_BLOCK","NESTED_BLOCK","tidyBlockScopes","RULE","tidySelectors","selectorsSortingMethod","removeEmpty","module","exports"],"mappings":"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","sourcesContent":["var shortenHex = require('./shorten-hex');\nvar shortenHsl = require('./shorten-hsl');\nvar shortenRgb = require('./shorten-rgb');\nvar sortSelectors = require('./sort-selectors');\nvar tidyRules = require('./tidy-rules');\nvar tidyBlock = require('./tidy-block');\nvar tidyAtRule = require('./tidy-at-rule');\n\nvar Hack = require('../hack');\nvar removeUnused = require('../remove-unused');\nvar restoreFromOptimizing = require('../restore-from-optimizing');\nvar wrapForOptimizing = require('../wrap-for-optimizing').all;\n\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\n\nvar Token = require('../../tokenizer/token');\nvar Marker = require('../../tokenizer/marker');\n\nvar formatPosition = require('../../utils/format-position');\nvar split = require('../../utils/split');\n\nvar serializeRules = require('../../writer/one-time').rules;\n\nvar IgnoreProperty = 'ignore-property';\n\nvar CHARSET_TOKEN = '@charset';\nvar CHARSET_REGEXP = new RegExp('^' + CHARSET_TOKEN, 'i');\n\nvar DEFAULT_ROUNDING_PRECISION = require('../../options/rounding-precision').DEFAULT;\n\nvar WHOLE_PIXEL_VALUE = /(?:^|\\s|\\()(-?\\d+)px/;\nvar TIME_VALUE = /^(\\-?[\\d\\.]+)(m?s)$/;\n\nvar HEX_VALUE_PATTERN = /[0-9a-f]/i;\nvar PROPERTY_NAME_PATTERN = /^(?:\\-chrome\\-|\\-[\\w\\-]+\\w|\\w[\\w\\-]+\\w|\\-\\-\\S+)$/;\nvar IMPORT_PREFIX_PATTERN = /^@import/i;\nvar QUOTED_PATTERN = /^('.*'|\".*\")$/;\nvar QUOTED_BUT_SAFE_PATTERN = /^['\"][a-zA-Z][a-zA-Z\\d\\-_]+['\"]$/;\nvar URL_PREFIX_PATTERN = /^url\\(/i;\nvar LOCAL_PREFIX_PATTERN = /^local\\(/i;\nvar VARIABLE_NAME_PATTERN = /^--\\S+$/;\n\nfunction isLocal(value){\n  return LOCAL_PREFIX_PATTERN.test(value);\n}\n\nfunction isNegative(value) {\n  return value && value[1][0] == '-' && parseFloat(value[1]) < 0;\n}\n\nfunction isQuoted(value) {\n  return QUOTED_PATTERN.test(value);\n}\n\nfunction isUrl(value) {\n  return URL_PREFIX_PATTERN.test(value);\n}\n\nfunction normalizeUrl(value) {\n  return value\n    .replace(URL_PREFIX_PATTERN, 'url(')\n    .replace(/\\\\?\\n|\\\\?\\r\\n/g, '');\n}\n\nfunction optimizeBackground(property) {\n  var values = property.value;\n\n  if (values.length == 1 && values[0][1] == 'none') {\n    values[0][1] = '0 0';\n  }\n\n  if (values.length == 1 && values[0][1] == 'transparent') {\n    values[0][1] = '0 0';\n  }\n}\n\nfunction optimizeBorderRadius(property) {\n  var values = property.value;\n  var spliceAt;\n\n  if (values.length == 3 && values[1][1] == '/' && values[0][1] == values[2][1]) {\n    spliceAt = 1;\n  } else if (values.length == 5 && values[2][1] == '/' && values[0][1] == values[3][1] && values[1][1] == values[4][1]) {\n    spliceAt = 2;\n  } else if (values.length == 7 && values[3][1] == '/' && values[0][1] == values[4][1] && values[1][1] == values[5][1] && values[2][1] == values[6][1]) {\n    spliceAt = 3;\n  } else if (values.length == 9 && values[4][1] == '/' && values[0][1] == values[5][1] && values[1][1] == values[6][1] && values[2][1] == values[7][1] && values[3][1] == values[8][1]) {\n    spliceAt = 4;\n  }\n\n  if (spliceAt) {\n    property.value.splice(spliceAt);\n    property.dirty = true;\n  }\n}\n\n/**\n * @param {string} name\n * @param {string} value\n * @param {Object} compatibility\n * @return {string}\n */\nfunction optimizeColors(name, value, compatibility) {\n  if (!value.match(/#|rgb|hsl/gi)) {\n    return shortenHex(value);\n  }\n\n  value = value\n    .replace(/(rgb|hsl)a?\\((\\-?\\d+),(\\-?\\d+\\%?),(\\-?\\d+\\%?),(0*[1-9]+[0-9]*(\\.?\\d*)?)\\)/gi, function (match, colorFn, p1, p2, p3, alpha) {\n      return (parseInt(alpha, 10) >= 1 ? colorFn + '(' + [p1,p2,p3].join(',') + ')' : match);\n    })\n    .replace(/rgb\\((\\-?\\d+),(\\-?\\d+),(\\-?\\d+)\\)/gi, function (match, red, green, blue) {\n      return shortenRgb(red, green, blue);\n    })\n    .replace(/hsl\\((-?\\d+),(-?\\d+)%?,(-?\\d+)%?\\)/gi, function (match, hue, saturation, lightness) {\n      return shortenHsl(hue, saturation, lightness);\n    })\n    .replace(/(^|[^='\"])#([0-9a-f]{6})/gi, function (match, prefix, color, at, inputValue) {\n      var suffix = inputValue[at + match.length];\n\n      if (suffix && HEX_VALUE_PATTERN.test(suffix)) {\n        return match;\n      } else if (color[0] == color[1] && color[2] == color[3] && color[4] == color[5]) {\n        return (prefix + '#' + color[0] + color[2] + color[4]).toLowerCase();\n      } else {\n        return (prefix + '#' + color).toLowerCase();\n      }\n    })\n    .replace(/(^|[^='\"])#([0-9a-f]{3})/gi, function (match, prefix, color) {\n      return prefix + '#' + color.toLowerCase();\n    })\n    .replace(/(rgb|rgba|hsl|hsla)\\(([^\\)]+)\\)/gi, function (match, colorFunction, colorDef) {\n      var tokens = colorDef.split(',');\n      var colorFnLowercase = colorFunction && colorFunction.toLowerCase();\n      var applies = (colorFnLowercase == 'hsl' && tokens.length == 3) ||\n        (colorFnLowercase == 'hsla' && tokens.length == 4) ||\n        (colorFnLowercase == 'rgb' && tokens.length === 3 && colorDef.indexOf('%') > 0) ||\n        (colorFnLowercase == 'rgba' && tokens.length == 4 && colorDef.indexOf('%') > 0);\n\n      if (!applies) {\n        return match;\n      }\n\n      if (tokens[1].indexOf('%') == -1) {\n        tokens[1] += '%';\n      }\n\n      if (tokens[2].indexOf('%') == -1) {\n        tokens[2] += '%';\n      }\n\n      return colorFunction + '(' + tokens.join(',') + ')';\n    });\n\n  if (compatibility.colors.opacity && name.indexOf('background') == -1) {\n    value = value.replace(/(?:rgba|hsla)\\(0,0%?,0%?,0\\)/g, function (match) {\n      if (split(value, ',').pop().indexOf('gradient(') > -1) {\n        return match;\n      }\n\n      return 'transparent';\n    });\n  }\n\n  return shortenHex(value);\n}\n\nfunction optimizeFilter(property) {\n  if (property.value.length == 1) {\n    property.value[0][1] = property.value[0][1].replace(/progid:DXImageTransform\\.Microsoft\\.(Alpha|Chroma)(\\W)/, function (match, filter, suffix) {\n      return filter.toLowerCase() + suffix;\n    });\n  }\n\n  property.value[0][1] = property.value[0][1]\n    .replace(/,(\\S)/g, ', $1')\n    .replace(/ ?= ?/g, '=');\n}\n\nfunction optimizeFontWeight(property, atIndex) {\n  var value = property.value[atIndex][1];\n\n  if (value == 'normal') {\n    value = '400';\n  } else if (value == 'bold') {\n    value = '700';\n  }\n\n  property.value[atIndex][1] = value;\n}\n\nfunction optimizeMultipleZeros(property) {\n  var values = property.value;\n  var spliceAt;\n\n  if (values.length == 4 && values[0][1] === '0' && values[1][1] === '0' && values[2][1] === '0' && values[3][1] === '0') {\n    if (property.name.indexOf('box-shadow') > -1) {\n      spliceAt = 2;\n    } else {\n      spliceAt = 1;\n    }\n  }\n\n  if (spliceAt) {\n    property.value.splice(spliceAt);\n    property.dirty = true;\n  }\n}\n\nfunction optimizeOutline(property) {\n  var values = property.value;\n\n  if (values.length == 1 && values[0][1] == 'none') {\n    values[0][1] = '0';\n  }\n}\n\nfunction optimizePixelLengths(_, value, compatibility) {\n  if (!WHOLE_PIXEL_VALUE.test(value)) {\n    return value;\n  }\n\n  return value.replace(WHOLE_PIXEL_VALUE, function (match, val) {\n    var newValue;\n    var intVal = parseInt(val);\n\n    if (intVal === 0) {\n      return match;\n    }\n\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.pt && intVal * 3 % 4 === 0) {\n      newValue = intVal * 3 / 4 + 'pt';\n    }\n\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.pc && intVal % 16 === 0) {\n      newValue = intVal / 16 + 'pc';\n    }\n\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.in && intVal % 96 === 0) {\n      newValue = intVal / 96 + 'in';\n    }\n\n    if (newValue) {\n      newValue = match.substring(0, match.indexOf(val)) + newValue;\n    }\n\n    return newValue && newValue.length < match.length ? newValue : match;\n  });\n}\n\nfunction optimizePrecision(_, value, precisionOptions) {\n  if (!precisionOptions.enabled || value.indexOf('.') === -1) {\n    return value;\n  }\n\n  return value\n    .replace(precisionOptions.decimalPointMatcher, '$1$2$3')\n    .replace(precisionOptions.zeroMatcher, function (match, integerPart, fractionPart, unit) {\n      var multiplier = precisionOptions.units[unit].multiplier;\n      var parsedInteger = parseInt(integerPart);\n      var integer = isNaN(parsedInteger) ? 0 : parsedInteger;\n      var fraction = parseFloat(fractionPart);\n\n      return Math.round((integer + fraction) * multiplier) / multiplier + unit;\n    });\n}\n\nfunction optimizeTimeUnits(_, value) {\n  if (!TIME_VALUE.test(value))\n    return value;\n\n  return value.replace(TIME_VALUE, function (match, val, unit) {\n    var newValue;\n\n    if (unit == 'ms') {\n      newValue = parseInt(val) / 1000 + 's';\n    } else if (unit == 's') {\n      newValue = parseFloat(val) * 1000 + 'ms';\n    }\n\n    return newValue.length < match.length ? newValue : match;\n  });\n}\n\nfunction optimizeUnits(name, value, unitsRegexp) {\n  if (/^(?:\\-moz\\-calc|\\-webkit\\-calc|calc|rgb|hsl|rgba|hsla)\\(/.test(value)) {\n    return value;\n  }\n\n  if (name == 'flex' || name == '-ms-flex' || name == '-webkit-flex' || name == 'flex-basis' || name == '-webkit-flex-basis') {\n    return value;\n  }\n\n  if (value.indexOf('%') > 0 && (name == 'height' || name == 'max-height' || name == 'width' || name == 'max-width')) {\n    return value;\n  }\n\n  return value\n    .replace(unitsRegexp, '$1' + '0' + '$2')\n    .replace(unitsRegexp, '$1' + '0' + '$2');\n}\n\nfunction optimizeWhitespace(name, value) {\n  if (name.indexOf('filter') > -1 || value.indexOf(' ') == -1 || value.indexOf('expression') === 0) {\n    return value;\n  }\n\n  if (value.indexOf(Marker.SINGLE_QUOTE) > -1 || value.indexOf(Marker.DOUBLE_QUOTE) > -1) {\n    return value;\n  }\n\n  value = value.replace(/\\s+/g, ' ');\n\n  if (value.indexOf('calc') > -1) {\n    value = value.replace(/\\) ?\\/ ?/g, ')/ ');\n  }\n\n  return value\n    .replace(/(\\(;?)\\s+/g, '$1')\n    .replace(/\\s+(;?\\))/g, '$1')\n    .replace(/, /g, ',');\n}\n\nfunction optimizeZeroDegUnit(_, value) {\n  if (value.indexOf('0deg') == -1) {\n    return value;\n  }\n\n  return value.replace(/\\(0deg\\)/g, '(0)');\n}\n\nfunction optimizeZeroUnits(name, value) {\n  if (value.indexOf('0') == -1) {\n    return value;\n  }\n\n  if (value.indexOf('-') > -1) {\n    value = value\n      .replace(/([^\\w\\d\\-]|^)\\-0([^\\.]|$)/g, '$10$2')\n      .replace(/([^\\w\\d\\-]|^)\\-0([^\\.]|$)/g, '$10$2');\n  }\n\n  return value\n    .replace(/(^|\\s)0+([1-9])/g, '$1$2')\n    .replace(/(^|\\D)\\.0+(\\D|$)/g, '$10$2')\n    .replace(/(^|\\D)\\.0+(\\D|$)/g, '$10$2')\n    .replace(/\\.([1-9]*)0+(\\D|$)/g, function (match, nonZeroPart, suffix) {\n      return (nonZeroPart.length > 0 ? '.' : '') + nonZeroPart + suffix;\n    })\n    .replace(/(^|\\D)0\\.(\\d)/g, '$1.$2');\n}\n\nfunction removeQuotes(name, value) {\n  if (name == 'content' || name.indexOf('font-variation-settings') > -1 || name.indexOf('font-feature-settings') > -1 || name == 'grid' || name.indexOf('grid-') > -1) {\n    return value;\n  }\n\n  return QUOTED_BUT_SAFE_PATTERN.test(value) ?\n    value.substring(1, value.length - 1) :\n    value;\n}\n\nfunction removeUrlQuotes(value) {\n  return /^url\\(['\"].+['\"]\\)$/.test(value) && !/^url\\(['\"].*[\\*\\s\\(\\)'\"].*['\"]\\)$/.test(value) && !/^url\\(['\"]data:[^;]+;charset/.test(value) ?\n    value.replace(/[\"']/g, '') :\n    value;\n}\n\nfunction transformValue(propertyName, propertyValue, rule, transformCallback) {\n  var selector = serializeRules(rule);\n  var transformedValue = transformCallback(propertyName, propertyValue, selector);\n\n  if (transformedValue === undefined) {\n    return propertyValue;\n  } else if (transformedValue === false) {\n    return IgnoreProperty;\n  } else {\n    return transformedValue;\n  }\n}\n\n//\n\nfunction optimizeBody(rule, properties, context) {\n  var options = context.options;\n  var levelOptions = options.level[OptimizationLevel.One];\n  var property, name, type, value;\n  var valueIsUrl;\n  var propertyToken;\n  var _properties = wrapForOptimizing(properties, true);\n\n  propertyLoop:\n  for (var i = 0, l = _properties.length; i < l; i++) {\n    property = _properties[i];\n    name = property.name;\n\n    if (!PROPERTY_NAME_PATTERN.test(name)) {\n      propertyToken = property.all[property.position];\n      context.warnings.push('Invalid property name \\'' + name + '\\' at ' + formatPosition(propertyToken[1][2][0]) + '. Ignoring.');\n      property.unused = true;\n    }\n\n    if (property.value.length === 0) {\n      propertyToken = property.all[property.position];\n      context.warnings.push('Empty property \\'' + name + '\\' at ' + formatPosition(propertyToken[1][2][0]) + '. Ignoring.');\n      property.unused = true;\n    }\n\n    if (property.hack && (\n        (property.hack[0] == Hack.ASTERISK || property.hack[0] == Hack.UNDERSCORE) && !options.compatibility.properties.iePrefixHack ||\n        property.hack[0] == Hack.BACKSLASH && !options.compatibility.properties.ieSuffixHack ||\n        property.hack[0] == Hack.BANG && !options.compatibility.properties.ieBangHack)) {\n      property.unused = true;\n    }\n\n    if (levelOptions.removeNegativePaddings && name.indexOf('padding') === 0 && (isNegative(property.value[0]) || isNegative(property.value[1]) || isNegative(property.value[2]) || isNegative(property.value[3]))) {\n      property.unused = true;\n    }\n\n    if (!options.compatibility.properties.ieFilters && isLegacyFilter(property)) {\n      property.unused = true;\n    }\n\n    if (property.unused) {\n      continue;\n    }\n\n    if (property.block) {\n      optimizeBody(rule, property.value[0][1], context);\n      continue;\n    }\n\n    if (VARIABLE_NAME_PATTERN.test(name)) {\n      continue;\n    }\n\n    for (var j = 0, m = property.value.length; j < m; j++) {\n      type = property.value[j][0];\n      value = property.value[j][1];\n      valueIsUrl = isUrl(value);\n\n      if (type == Token.PROPERTY_BLOCK) {\n        property.unused = true;\n        context.warnings.push('Invalid value token at ' + formatPosition(value[0][1][2][0]) + '. Ignoring.');\n        break;\n      }\n\n      if (valueIsUrl && !context.validator.isUrl(value)) {\n        property.unused = true;\n        context.warnings.push('Broken URL \\'' + value + '\\' at ' + formatPosition(property.value[j][2][0]) + '. Ignoring.');\n        break;\n      }\n\n      if (valueIsUrl) {\n        value = levelOptions.normalizeUrls ?\n          normalizeUrl(value) :\n          value;\n        value = !options.compatibility.properties.urlQuotes ?\n          removeUrlQuotes(value) :\n          value;\n      } else if (isQuoted(value) || isLocal(value)) {\n        value = levelOptions.removeQuotes ?\n          removeQuotes(name, value) :\n          value;\n      } else {\n        value = levelOptions.removeWhitespace ?\n          optimizeWhitespace(name, value) :\n          value;\n        value = optimizePrecision(name, value, options.precision);\n        value = optimizePixelLengths(name, value, options.compatibility);\n        value = levelOptions.replaceTimeUnits ?\n          optimizeTimeUnits(name, value) :\n          value;\n        value = levelOptions.replaceZeroUnits ?\n          optimizeZeroUnits(name, value) :\n          value;\n\n        if (options.compatibility.properties.zeroUnits) {\n          value = optimizeZeroDegUnit(name, value);\n          value = optimizeUnits(name, value, options.unitsRegexp);\n        }\n\n        if (options.compatibility.properties.colors) {\n          value = optimizeColors(name, value, options.compatibility);\n        }\n      }\n\n      value = transformValue(name, value, rule, levelOptions.transform);\n\n      if (value === IgnoreProperty) {\n        property.unused = true;\n        continue propertyLoop;\n      }\n\n      property.value[j][1] = value;\n    }\n\n    if (levelOptions.replaceMultipleZeros) {\n      optimizeMultipleZeros(property);\n    }\n\n    if (name == 'background' && levelOptions.optimizeBackground) {\n      optimizeBackground(property);\n    } else if (name.indexOf('border') === 0 && name.indexOf('radius') > 0 && levelOptions.optimizeBorderRadius) {\n      optimizeBorderRadius(property);\n    } else if (name == 'filter'&& levelOptions.optimizeFilter && options.compatibility.properties.ieFilters) {\n      optimizeFilter(property);\n    } else if (name == 'font-weight' && levelOptions.optimizeFontWeight) {\n      optimizeFontWeight(property, 0);\n    } else if (name == 'outline' && levelOptions.optimizeOutline) {\n      optimizeOutline(property);\n    }\n  }\n\n  restoreFromOptimizing(_properties);\n  removeUnused(_properties);\n  removeComments(properties, options);\n}\n\nfunction removeComments(tokens, options) {\n  var token;\n  var i;\n\n  for (i = 0; i < tokens.length; i++) {\n    token = tokens[i];\n\n    if (token[0] != Token.COMMENT) {\n      continue;\n    }\n\n    optimizeComment(token, options);\n\n    if (token[1].length === 0) {\n      tokens.splice(i, 1);\n      i--;\n    }\n  }\n}\n\nfunction optimizeComment(token, options) {\n  if (token[1][2] == Marker.EXCLAMATION && (options.level[OptimizationLevel.One].specialComments == 'all' || options.commentsKept < options.level[OptimizationLevel.One].specialComments)) {\n    options.commentsKept++;\n    return;\n  }\n\n  token[1] = [];\n}\n\nfunction cleanupCharsets(tokens) {\n  var hasCharset = false;\n\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n\n    if (token[0] != Token.AT_RULE)\n      continue;\n\n    if (!CHARSET_REGEXP.test(token[1]))\n      continue;\n\n    if (hasCharset || token[1].indexOf(CHARSET_TOKEN) == -1) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    } else {\n      hasCharset = true;\n      tokens.splice(i, 1);\n      tokens.unshift([Token.AT_RULE, token[1].replace(CHARSET_REGEXP, CHARSET_TOKEN)]);\n    }\n  }\n}\n\nfunction buildUnitRegexp(options) {\n  var units = ['px', 'em', 'ex', 'cm', 'mm', 'in', 'pt', 'pc', '%'];\n  var otherUnits = ['ch', 'rem', 'vh', 'vm', 'vmax', 'vmin', 'vw'];\n\n  otherUnits.forEach(function (unit) {\n    if (options.compatibility.units[unit]) {\n      units.push(unit);\n    }\n  });\n\n  return new RegExp('(^|\\\\s|\\\\(|,)0(?:' + units.join('|') + ')(\\\\W|$)', 'g');\n}\n\nfunction buildPrecisionOptions(roundingPrecision) {\n  var precisionOptions = {\n    matcher: null,\n    units: {},\n  };\n  var optimizable = [];\n  var unit;\n  var value;\n\n  for (unit in roundingPrecision) {\n    value = roundingPrecision[unit];\n\n    if (value != DEFAULT_ROUNDING_PRECISION) {\n      precisionOptions.units[unit] = {};\n      precisionOptions.units[unit].value = value;\n      precisionOptions.units[unit].multiplier = Math.pow(10, value);\n\n      optimizable.push(unit);\n    }\n  }\n\n  if (optimizable.length > 0) {\n    precisionOptions.enabled = true;\n    precisionOptions.decimalPointMatcher = new RegExp('(\\\\d)\\\\.($|' + optimizable.join('|') + ')($|\\W)', 'g');\n    precisionOptions.zeroMatcher = new RegExp('(\\\\d*)(\\\\.\\\\d+)(' + optimizable.join('|') + ')', 'g');\n  }\n\n  return precisionOptions;\n}\n\nfunction isImport(token) {\n  return IMPORT_PREFIX_PATTERN.test(token[1]);\n}\n\nfunction isLegacyFilter(property) {\n  var value;\n\n  if (property.name == 'filter' || property.name == '-ms-filter') {\n    value = property.value[0][1];\n\n    return value.indexOf('progid') > -1 ||\n      value.indexOf('alpha') === 0 ||\n      value.indexOf('chroma') === 0;\n  } else {\n    return false;\n  }\n}\n\nfunction level1Optimize(tokens, context) {\n  var options = context.options;\n  var levelOptions = options.level[OptimizationLevel.One];\n  var ie7Hack = options.compatibility.selectors.ie7Hack;\n  var adjacentSpace = options.compatibility.selectors.adjacentSpace;\n  var spaceAfterClosingBrace = options.compatibility.properties.spaceAfterClosingBrace;\n  var format = options.format;\n  var mayHaveCharset = false;\n  var afterRules = false;\n\n  options.unitsRegexp = options.unitsRegexp || buildUnitRegexp(options);\n  options.precision = options.precision || buildPrecisionOptions(levelOptions.roundingPrecision);\n  options.commentsKept = options.commentsKept || 0;\n\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n\n    switch (token[0]) {\n      case Token.AT_RULE:\n        token[1] = isImport(token) && afterRules ? '' : token[1];\n        token[1] = levelOptions.tidyAtRules ? tidyAtRule(token[1]) : token[1];\n        mayHaveCharset = true;\n        break;\n      case Token.AT_RULE_BLOCK:\n        optimizeBody(token[1], token[2], context);\n        afterRules = true;\n        break;\n      case Token.NESTED_BLOCK:\n        token[1] = levelOptions.tidyBlockScopes ? tidyBlock(token[1], spaceAfterClosingBrace) : token[1];\n        level1Optimize(token[2], context);\n        afterRules = true;\n        break;\n      case Token.COMMENT:\n        optimizeComment(token, options);\n        break;\n      case Token.RULE:\n        token[1] = levelOptions.tidySelectors ? tidyRules(token[1], !ie7Hack, adjacentSpace, format, context.warnings) : token[1];\n        token[1] = token[1].length > 1 ? sortSelectors(token[1], levelOptions.selectorsSortingMethod) : token[1];\n        optimizeBody(token[1], token[2], context);\n        afterRules = true;\n        break;\n    }\n\n    if (token[0] == Token.COMMENT && token[1].length === 0 || levelOptions.removeEmpty && (token[1].length === 0 || (token[2] && token[2].length === 0))) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    }\n  }\n\n  if (levelOptions.cleanupCharsets && mayHaveCharset) {\n    cleanupCharsets(tokens);\n  }\n\n  return tokens;\n}\n\nmodule.exports = level1Optimize;\n"]},"metadata":{},"sourceType":"script"}