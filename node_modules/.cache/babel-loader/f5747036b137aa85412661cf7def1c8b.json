{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar schematics_1 = require(\"@angular-devkit/schematics\");\n\nvar tasks_1 = require(\"@angular-devkit/schematics/tasks\");\n\nvar rxjsCompatVersion = '^6.0.0-rc.0';\n\nfunction rxjsV6MigrationSchematic(_options) {\n  return function (tree, context) {\n    var pkgPath = '/package.json';\n    var buffer = tree.read(pkgPath);\n\n    if (buffer == null) {\n      throw new schematics_1.SchematicsException('Could not read package.json');\n    }\n\n    var content = buffer.toString();\n    var pkg = JSON.parse(content);\n\n    if (pkg === null || typeof pkg !== 'object' || Array.isArray(pkg)) {\n      throw new schematics_1.SchematicsException('Error reading package.json');\n    }\n\n    if (!pkg.dependencies) {\n      pkg.dependencies = {};\n    }\n\n    pkg.dependencies['rxjs-compat'] = rxjsCompatVersion;\n    tree.overwrite(pkgPath, JSON.stringify(pkg, null, 2));\n    context.addTask(new tasks_1.NodePackageInstallTask());\n    return tree;\n  };\n}\n\nexports.rxjsV6MigrationSchematic = rxjsV6MigrationSchematic;","map":{"version":3,"sources":["../../../migrations/update-6_0_0/index.ts"],"names":[],"mappings":";;;;;;AAAA,IAAA,YAAA,GAAA,OAAA,CAAA,4BAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,kCAAA,CAAA;;AAEA,IAAM,iBAAiB,GAAG,aAA1B;;AAEA,SAAgB,wBAAhB,CAAyC,QAAzC,EAAsD;AACpD,SAAO,UAAC,IAAD,EAAa,OAAb,EAAsC;AACzC,QAAM,OAAO,GAAG,eAAhB;AACA,QAAM,MAAM,GAAG,IAAI,CAAC,IAAL,CAAU,OAAV,CAAf;;AACA,QAAI,MAAM,IAAI,IAAd,EAAoB;AAClB,YAAM,IAAI,YAAA,CAAA,mBAAJ,CAAwB,6BAAxB,CAAN;AACD;;AACD,QAAM,OAAO,GAAG,MAAM,CAAC,QAAP,EAAhB;AACA,QAAM,GAAG,GAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAZ;;AAEA,QAAI,GAAG,KAAK,IAAR,IAAgB,OAAO,GAAP,KAAe,QAA/B,IAA2C,KAAK,CAAC,OAAN,CAAc,GAAd,CAA/C,EAAmE;AACjE,YAAM,IAAI,YAAA,CAAA,mBAAJ,CAAwB,4BAAxB,CAAN;AACD;;AAED,QAAI,CAAC,GAAG,CAAC,YAAT,EAAuB;AACrB,MAAA,GAAG,CAAC,YAAJ,GAAmB,EAAnB;AACD;;AAED,IAAA,GAAG,CAAC,YAAJ,CAAiB,aAAjB,IAAkC,iBAAlC;AAEA,IAAA,IAAI,CAAC,SAAL,CAAe,OAAf,EAAwB,IAAI,CAAC,SAAL,CAAe,GAAf,EAAoB,IAApB,EAA0B,CAA1B,CAAxB;AACA,IAAA,OAAO,CAAC,OAAR,CAAgB,IAAI,OAAA,CAAA,sBAAJ,EAAhB;AAEA,WAAO,IAAP;AACH,GAvBD;AAwBD;;AAzBD,OAAA,CAAA,wBAAA,GAAA,wBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar schematics_1 = require(\"@angular-devkit/schematics\");\nvar tasks_1 = require(\"@angular-devkit/schematics/tasks\");\nvar rxjsCompatVersion = '^6.0.0-rc.0';\nfunction rxjsV6MigrationSchematic(_options) {\n    return function (tree, context) {\n        var pkgPath = '/package.json';\n        var buffer = tree.read(pkgPath);\n        if (buffer == null) {\n            throw new schematics_1.SchematicsException('Could not read package.json');\n        }\n        var content = buffer.toString();\n        var pkg = JSON.parse(content);\n        if (pkg === null || typeof pkg !== 'object' || Array.isArray(pkg)) {\n            throw new schematics_1.SchematicsException('Error reading package.json');\n        }\n        if (!pkg.dependencies) {\n            pkg.dependencies = {};\n        }\n        pkg.dependencies['rxjs-compat'] = rxjsCompatVersion;\n        tree.overwrite(pkgPath, JSON.stringify(pkg, null, 2));\n        context.addTask(new tasks_1.NodePackageInstallTask());\n        return tree;\n    };\n}\nexports.rxjsV6MigrationSchematic = rxjsV6MigrationSchematic;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}