{"ast":null,"code":"// Generated by CoffeeScript 1.9.3\nvar Block, SpecialString, object, terminalWidth;\nSpecialString = require('./SpecialString');\nobject = require('utila').object;\nterminalWidth = require('../tools').getCols();\n\nmodule.exports = Block = function () {\n  var self;\n  self = Block;\n  Block.defaultConfig = {\n    blockPrependor: {\n      fn: require('./block/blockPrependor/Default'),\n      options: {\n        amount: 0\n      }\n    },\n    blockAppendor: {\n      fn: require('./block/blockAppendor/Default'),\n      options: {\n        amount: 0\n      }\n    },\n    linePrependor: {\n      fn: require('./block/linePrependor/Default'),\n      options: {\n        amount: 0\n      }\n    },\n    lineAppendor: {\n      fn: require('./block/lineAppendor/Default'),\n      options: {\n        amount: 0\n      }\n    },\n    lineWrapper: {\n      fn: require('./block/lineWrapper/Default'),\n      options: {\n        lineWidth: null\n      }\n    },\n    width: terminalWidth,\n    prefixRaw: '',\n    suffixRaw: ''\n  };\n\n  function Block(_layout, _parent, config, _name) {\n    this._layout = _layout;\n    this._parent = _parent;\n\n    if (config == null) {\n      config = {};\n    }\n\n    this._name = _name != null ? _name : '';\n    this._config = object.append(self.defaultConfig, config);\n    this._closed = false;\n    this._wasOpenOnce = false;\n    this._active = false;\n    this._buffer = '';\n    this._didSeparateBlock = false;\n    this._linePrependor = new this._config.linePrependor.fn(this._config.linePrependor.options);\n    this._lineAppendor = new this._config.lineAppendor.fn(this._config.lineAppendor.options);\n    this._blockPrependor = new this._config.blockPrependor.fn(this._config.blockPrependor.options);\n    this._blockAppendor = new this._config.blockAppendor.fn(this._config.blockAppendor.options);\n  }\n\n  Block.prototype._activate = function (deactivateParent) {\n    if (deactivateParent == null) {\n      deactivateParent = true;\n    }\n\n    if (this._active) {\n      throw Error(\"This block is already active. This is probably a bug in RenderKid itself\");\n    }\n\n    if (this._closed) {\n      throw Error(\"This block is closed and cannot be activated. This is probably a bug in RenderKid itself\");\n    }\n\n    this._active = true;\n    this._layout._activeBlock = this;\n\n    if (deactivateParent) {\n      if (this._parent != null) {\n        this._parent._deactivate(false);\n      }\n    }\n\n    return this;\n  };\n\n  Block.prototype._deactivate = function (activateParent) {\n    if (activateParent == null) {\n      activateParent = true;\n    }\n\n    this._ensureActive();\n\n    this._flushBuffer();\n\n    if (activateParent) {\n      if (this._parent != null) {\n        this._parent._activate(false);\n      }\n    }\n\n    this._active = false;\n    return this;\n  };\n\n  Block.prototype._ensureActive = function () {\n    if (!this._wasOpenOnce) {\n      throw Error(\"This block has never been open before. This is probably a bug in RenderKid itself.\");\n    }\n\n    if (!this._active) {\n      throw Error(\"This block is not active. This is probably a bug in RenderKid itself.\");\n    }\n\n    if (this._closed) {\n      throw Error(\"This block is already closed. This is probably a bug in RenderKid itself.\");\n    }\n  };\n\n  Block.prototype._open = function () {\n    if (this._wasOpenOnce) {\n      throw Error(\"Block._open() has been called twice. This is probably a RenderKid bug.\");\n    }\n\n    this._wasOpenOnce = true;\n\n    if (this._parent != null) {\n      this._parent.write(this._whatToPrependToBlock());\n    }\n\n    this._activate();\n\n    return this;\n  };\n\n  Block.prototype.close = function () {\n    this._deactivate();\n\n    this._closed = true;\n\n    if (this._parent != null) {\n      this._parent.write(this._whatToAppendToBlock());\n    }\n\n    return this;\n  };\n\n  Block.prototype.isOpen = function () {\n    return this._wasOpenOnce && !this._closed;\n  };\n\n  Block.prototype.write = function (str) {\n    this._ensureActive();\n\n    if (str === '') {\n      return;\n    }\n\n    str = String(str);\n    this._buffer += str;\n    return this;\n  };\n\n  Block.prototype.openBlock = function (config, name) {\n    var block;\n\n    this._ensureActive();\n\n    block = new Block(this._layout, this, config, name);\n\n    block._open();\n\n    return block;\n  };\n\n  Block.prototype._flushBuffer = function () {\n    var str;\n\n    if (this._buffer === '') {\n      return;\n    }\n\n    str = this._buffer;\n    this._buffer = '';\n\n    this._writeInline(str);\n  };\n\n  Block.prototype._toPrependToLine = function () {\n    var fromParent;\n    fromParent = '';\n\n    if (this._parent != null) {\n      fromParent = this._parent._toPrependToLine();\n    }\n\n    return this._linePrependor.render(fromParent);\n  };\n\n  Block.prototype._toAppendToLine = function () {\n    var fromParent;\n    fromParent = '';\n\n    if (this._parent != null) {\n      fromParent = this._parent._toAppendToLine();\n    }\n\n    return this._lineAppendor.render(fromParent);\n  };\n\n  Block.prototype._whatToPrependToBlock = function () {\n    return this._blockPrependor.render();\n  };\n\n  Block.prototype._whatToAppendToBlock = function () {\n    return this._blockAppendor.render();\n  };\n\n  Block.prototype._writeInline = function (str) {\n    var i, j, k, l, lineBreaksToAppend, m, ref, ref1, ref2, remaining;\n\n    if (SpecialString(str).isOnlySpecialChars()) {\n      this._layout._append(str);\n\n      return;\n    }\n\n    remaining = str;\n    lineBreaksToAppend = 0;\n\n    if (m = remaining.match(/^\\n+/)) {\n      for (i = j = 1, ref = m[0].length; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n        this._writeLine('');\n      }\n\n      remaining = remaining.substr(m[0].length, remaining.length);\n    }\n\n    if (m = remaining.match(/\\n+$/)) {\n      lineBreaksToAppend = m[0].length;\n      remaining = remaining.substr(0, remaining.length - m[0].length);\n    }\n\n    while (remaining.length > 0) {\n      if (m = remaining.match(/^[^\\n]+/)) {\n        this._writeLine(m[0]);\n\n        remaining = remaining.substr(m[0].length, remaining.length);\n      } else if (m = remaining.match(/^\\n+/)) {\n        for (i = k = 1, ref1 = m[0].length; 1 <= ref1 ? k < ref1 : k > ref1; i = 1 <= ref1 ? ++k : --k) {\n          this._writeLine('');\n        }\n\n        remaining = remaining.substr(m[0].length, remaining.length);\n      }\n    }\n\n    if (lineBreaksToAppend > 0) {\n      for (i = l = 1, ref2 = lineBreaksToAppend; 1 <= ref2 ? l <= ref2 : l >= ref2; i = 1 <= ref2 ? ++l : --l) {\n        this._writeLine('');\n      }\n    }\n  };\n\n  Block.prototype._writeLine = function (str) {\n    var line, lineContent, lineContentLength, remaining, roomLeft, toAppend, toAppendLength, toPrepend, toPrependLength;\n    remaining = SpecialString(str);\n\n    while (true) {\n      toPrepend = this._toPrependToLine();\n      toPrependLength = SpecialString(toPrepend).length;\n      toAppend = this._toAppendToLine();\n      toAppendLength = SpecialString(toAppend).length;\n      roomLeft = this._layout._config.terminalWidth - (toPrependLength + toAppendLength);\n      lineContentLength = Math.min(this._config.width, roomLeft);\n      lineContent = remaining.cut(0, lineContentLength, true);\n      line = toPrepend + lineContent.str + toAppend;\n\n      this._layout._appendLine(line);\n\n      if (remaining.isEmpty()) {\n        break;\n      }\n    }\n  };\n\n  return Block;\n}();","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/renderkid/lib/layout/Block.js"],"names":["Block","SpecialString","object","terminalWidth","require","getCols","module","exports","self","defaultConfig","blockPrependor","fn","options","amount","blockAppendor","linePrependor","lineAppendor","lineWrapper","lineWidth","width","prefixRaw","suffixRaw","_layout","_parent","config","_name","_config","append","_closed","_wasOpenOnce","_active","_buffer","_didSeparateBlock","_linePrependor","_lineAppendor","_blockPrependor","_blockAppendor","prototype","_activate","deactivateParent","Error","_activeBlock","_deactivate","activateParent","_ensureActive","_flushBuffer","_open","write","_whatToPrependToBlock","close","_whatToAppendToBlock","isOpen","str","String","openBlock","name","block","_writeInline","_toPrependToLine","fromParent","render","_toAppendToLine","i","j","k","l","lineBreaksToAppend","m","ref","ref1","ref2","remaining","isOnlySpecialChars","_append","match","length","_writeLine","substr","line","lineContent","lineContentLength","roomLeft","toAppend","toAppendLength","toPrepend","toPrependLength","Math","min","cut","_appendLine","isEmpty"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.9.3\nvar Block, SpecialString, object, terminalWidth;\n\nSpecialString = require('./SpecialString');\n\nobject = require('utila').object;\n\nterminalWidth = require('../tools').getCols();\n\nmodule.exports = Block = (function() {\n  var self;\n\n  self = Block;\n\n  Block.defaultConfig = {\n    blockPrependor: {\n      fn: require('./block/blockPrependor/Default'),\n      options: {\n        amount: 0\n      }\n    },\n    blockAppendor: {\n      fn: require('./block/blockAppendor/Default'),\n      options: {\n        amount: 0\n      }\n    },\n    linePrependor: {\n      fn: require('./block/linePrependor/Default'),\n      options: {\n        amount: 0\n      }\n    },\n    lineAppendor: {\n      fn: require('./block/lineAppendor/Default'),\n      options: {\n        amount: 0\n      }\n    },\n    lineWrapper: {\n      fn: require('./block/lineWrapper/Default'),\n      options: {\n        lineWidth: null\n      }\n    },\n    width: terminalWidth,\n    prefixRaw: '',\n    suffixRaw: ''\n  };\n\n  function Block(_layout, _parent, config, _name) {\n    this._layout = _layout;\n    this._parent = _parent;\n    if (config == null) {\n      config = {};\n    }\n    this._name = _name != null ? _name : '';\n    this._config = object.append(self.defaultConfig, config);\n    this._closed = false;\n    this._wasOpenOnce = false;\n    this._active = false;\n    this._buffer = '';\n    this._didSeparateBlock = false;\n    this._linePrependor = new this._config.linePrependor.fn(this._config.linePrependor.options);\n    this._lineAppendor = new this._config.lineAppendor.fn(this._config.lineAppendor.options);\n    this._blockPrependor = new this._config.blockPrependor.fn(this._config.blockPrependor.options);\n    this._blockAppendor = new this._config.blockAppendor.fn(this._config.blockAppendor.options);\n  }\n\n  Block.prototype._activate = function(deactivateParent) {\n    if (deactivateParent == null) {\n      deactivateParent = true;\n    }\n    if (this._active) {\n      throw Error(\"This block is already active. This is probably a bug in RenderKid itself\");\n    }\n    if (this._closed) {\n      throw Error(\"This block is closed and cannot be activated. This is probably a bug in RenderKid itself\");\n    }\n    this._active = true;\n    this._layout._activeBlock = this;\n    if (deactivateParent) {\n      if (this._parent != null) {\n        this._parent._deactivate(false);\n      }\n    }\n    return this;\n  };\n\n  Block.prototype._deactivate = function(activateParent) {\n    if (activateParent == null) {\n      activateParent = true;\n    }\n    this._ensureActive();\n    this._flushBuffer();\n    if (activateParent) {\n      if (this._parent != null) {\n        this._parent._activate(false);\n      }\n    }\n    this._active = false;\n    return this;\n  };\n\n  Block.prototype._ensureActive = function() {\n    if (!this._wasOpenOnce) {\n      throw Error(\"This block has never been open before. This is probably a bug in RenderKid itself.\");\n    }\n    if (!this._active) {\n      throw Error(\"This block is not active. This is probably a bug in RenderKid itself.\");\n    }\n    if (this._closed) {\n      throw Error(\"This block is already closed. This is probably a bug in RenderKid itself.\");\n    }\n  };\n\n  Block.prototype._open = function() {\n    if (this._wasOpenOnce) {\n      throw Error(\"Block._open() has been called twice. This is probably a RenderKid bug.\");\n    }\n    this._wasOpenOnce = true;\n    if (this._parent != null) {\n      this._parent.write(this._whatToPrependToBlock());\n    }\n    this._activate();\n    return this;\n  };\n\n  Block.prototype.close = function() {\n    this._deactivate();\n    this._closed = true;\n    if (this._parent != null) {\n      this._parent.write(this._whatToAppendToBlock());\n    }\n    return this;\n  };\n\n  Block.prototype.isOpen = function() {\n    return this._wasOpenOnce && !this._closed;\n  };\n\n  Block.prototype.write = function(str) {\n    this._ensureActive();\n    if (str === '') {\n      return;\n    }\n    str = String(str);\n    this._buffer += str;\n    return this;\n  };\n\n  Block.prototype.openBlock = function(config, name) {\n    var block;\n    this._ensureActive();\n    block = new Block(this._layout, this, config, name);\n    block._open();\n    return block;\n  };\n\n  Block.prototype._flushBuffer = function() {\n    var str;\n    if (this._buffer === '') {\n      return;\n    }\n    str = this._buffer;\n    this._buffer = '';\n    this._writeInline(str);\n  };\n\n  Block.prototype._toPrependToLine = function() {\n    var fromParent;\n    fromParent = '';\n    if (this._parent != null) {\n      fromParent = this._parent._toPrependToLine();\n    }\n    return this._linePrependor.render(fromParent);\n  };\n\n  Block.prototype._toAppendToLine = function() {\n    var fromParent;\n    fromParent = '';\n    if (this._parent != null) {\n      fromParent = this._parent._toAppendToLine();\n    }\n    return this._lineAppendor.render(fromParent);\n  };\n\n  Block.prototype._whatToPrependToBlock = function() {\n    return this._blockPrependor.render();\n  };\n\n  Block.prototype._whatToAppendToBlock = function() {\n    return this._blockAppendor.render();\n  };\n\n  Block.prototype._writeInline = function(str) {\n    var i, j, k, l, lineBreaksToAppend, m, ref, ref1, ref2, remaining;\n    if (SpecialString(str).isOnlySpecialChars()) {\n      this._layout._append(str);\n      return;\n    }\n    remaining = str;\n    lineBreaksToAppend = 0;\n    if (m = remaining.match(/^\\n+/)) {\n      for (i = j = 1, ref = m[0].length; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n        this._writeLine('');\n      }\n      remaining = remaining.substr(m[0].length, remaining.length);\n    }\n    if (m = remaining.match(/\\n+$/)) {\n      lineBreaksToAppend = m[0].length;\n      remaining = remaining.substr(0, remaining.length - m[0].length);\n    }\n    while (remaining.length > 0) {\n      if (m = remaining.match(/^[^\\n]+/)) {\n        this._writeLine(m[0]);\n        remaining = remaining.substr(m[0].length, remaining.length);\n      } else if (m = remaining.match(/^\\n+/)) {\n        for (i = k = 1, ref1 = m[0].length; 1 <= ref1 ? k < ref1 : k > ref1; i = 1 <= ref1 ? ++k : --k) {\n          this._writeLine('');\n        }\n        remaining = remaining.substr(m[0].length, remaining.length);\n      }\n    }\n    if (lineBreaksToAppend > 0) {\n      for (i = l = 1, ref2 = lineBreaksToAppend; 1 <= ref2 ? l <= ref2 : l >= ref2; i = 1 <= ref2 ? ++l : --l) {\n        this._writeLine('');\n      }\n    }\n  };\n\n  Block.prototype._writeLine = function(str) {\n    var line, lineContent, lineContentLength, remaining, roomLeft, toAppend, toAppendLength, toPrepend, toPrependLength;\n    remaining = SpecialString(str);\n    while (true) {\n      toPrepend = this._toPrependToLine();\n      toPrependLength = SpecialString(toPrepend).length;\n      toAppend = this._toAppendToLine();\n      toAppendLength = SpecialString(toAppend).length;\n      roomLeft = this._layout._config.terminalWidth - (toPrependLength + toAppendLength);\n      lineContentLength = Math.min(this._config.width, roomLeft);\n      lineContent = remaining.cut(0, lineContentLength, true);\n      line = toPrepend + lineContent.str + toAppend;\n      this._layout._appendLine(line);\n      if (remaining.isEmpty()) {\n        break;\n      }\n    }\n  };\n\n  return Block;\n\n})();\n"]},"metadata":{},"sourceType":"script"}