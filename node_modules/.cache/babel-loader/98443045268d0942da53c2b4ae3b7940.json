{"ast":null,"code":"/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';\n\nconst chalk = require('chalk');\n\nconst findUp = require('find-up');\n\nconst path = require('path');\n\nclass ModuleNotFoundPlugin {\n  constructor(appPath, yarnLockFile) {\n    this.appPath = appPath;\n    this.yarnLockFile = yarnLockFile;\n    this.useYarnCommand = this.useYarnCommand.bind(this);\n    this.getRelativePath = this.getRelativePath.bind(this);\n    this.prettierError = this.prettierError.bind(this);\n  }\n\n  useYarnCommand() {\n    try {\n      return findUp.sync('yarn.lock', {\n        cwd: this.appPath\n      }) != null;\n    } catch (_) {\n      return false;\n    }\n  }\n\n  getRelativePath(_file) {\n    let file = path.relative(this.appPath, _file);\n\n    if (file.startsWith('..')) {\n      file = _file;\n    } else if (!file.startsWith('.')) {\n      file = '.' + path.sep + file;\n    }\n\n    return file;\n  }\n\n  prettierError(err) {\n    let {\n      details: _details = '',\n      origin\n    } = err;\n\n    if (origin == null) {\n      const caseSensitivity = err.message && /\\[CaseSensitivePathsPlugin\\] `(.*?)` .* `(.*?)`/.exec(err.message);\n\n      if (caseSensitivity) {\n        const [, incorrectPath, actualName] = caseSensitivity;\n        const actualFile = this.getRelativePath(path.join(path.dirname(incorrectPath), actualName));\n        const incorrectName = path.basename(incorrectPath);\n        err.message = `Cannot find file: '${incorrectName}' does not match the corresponding name on disk: '${actualFile}'.`;\n      }\n\n      return err;\n    }\n\n    const file = this.getRelativePath(origin.resource);\n\n    let details = _details.split('\\n');\n\n    const request = /resolve '(.*?)' in '(.*?)'/.exec(details);\n\n    if (request) {\n      const isModule = details[1] && details[1].includes('module');\n      const isFile = details[1] && details[1].includes('file');\n      let [, target, context] = request;\n      context = this.getRelativePath(context);\n\n      if (isModule) {\n        const isYarn = this.useYarnCommand();\n        details = [`Cannot find module: '${target}'. Make sure this package is installed.`, '', 'You can install this package by running: ' + (isYarn ? chalk.bold(`yarn add ${target}`) : chalk.bold(`npm install ${target}`)) + '.'];\n      } else if (isFile) {\n        details = [`Cannot find file '${target}' in '${context}'.`];\n      } else {\n        details = [err.message];\n      }\n    } else {\n      details = [err.message];\n    }\n\n    err.message = [file, ...details].join('\\n').replace('Error: ', '');\n    const isModuleScopePluginError = err.error && err.error.__module_scope_plugin;\n\n    if (isModuleScopePluginError) {\n      err.message = err.message.replace('Module not found: ', '');\n    }\n\n    return err;\n  }\n\n  apply(compiler) {\n    const {\n      prettierError\n    } = this;\n    compiler.hooks.make.intercept({\n      register(tap) {\n        if (!(tap.name === 'MultiEntryPlugin' || tap.name === 'SingleEntryPlugin')) {\n          return tap;\n        }\n\n        return Object.assign({}, tap, {\n          fn: (compilation, callback) => {\n            tap.fn(compilation, (err, ...args) => {\n              if (err && err.name === 'ModuleNotFoundError') {\n                err = prettierError(err);\n              }\n\n              callback(err, ...args);\n            });\n          }\n        });\n      }\n\n    });\n    compiler.hooks.normalModuleFactory.tap('ModuleNotFoundPlugin', nmf => {\n      nmf.hooks.afterResolve.intercept({\n        register(tap) {\n          if (tap.name !== 'CaseSensitivePathsPlugin') {\n            return tap;\n          }\n\n          return Object.assign({}, tap, {\n            fn: (compilation, callback) => {\n              tap.fn(compilation, (err, ...args) => {\n                if (err && err.message && err.message.includes('CaseSensitivePathsPlugin')) {\n                  err = prettierError(err);\n                }\n\n                callback(err, ...args);\n              });\n            }\n          });\n        }\n\n      });\n    });\n  }\n\n}\n\nmodule.exports = ModuleNotFoundPlugin;","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/react-dev-utils/ModuleNotFoundPlugin.js"],"names":["chalk","require","findUp","path","ModuleNotFoundPlugin","constructor","appPath","yarnLockFile","useYarnCommand","bind","getRelativePath","prettierError","sync","cwd","_","_file","file","relative","startsWith","sep","err","details","_details","origin","caseSensitivity","message","exec","incorrectPath","actualName","actualFile","join","dirname","incorrectName","basename","resource","split","request","isModule","includes","isFile","target","context","isYarn","bold","replace","isModuleScopePluginError","error","__module_scope_plugin","apply","compiler","hooks","make","intercept","register","tap","name","Object","assign","fn","compilation","callback","args","normalModuleFactory","nmf","afterResolve","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nconst chalk = require('chalk');\nconst findUp = require('find-up');\nconst path = require('path');\n\nclass ModuleNotFoundPlugin {\n  constructor(appPath, yarnLockFile) {\n    this.appPath = appPath;\n    this.yarnLockFile = yarnLockFile;\n\n    this.useYarnCommand = this.useYarnCommand.bind(this);\n    this.getRelativePath = this.getRelativePath.bind(this);\n    this.prettierError = this.prettierError.bind(this);\n  }\n\n  useYarnCommand() {\n    try {\n      return findUp.sync('yarn.lock', { cwd: this.appPath }) != null;\n    } catch (_) {\n      return false;\n    }\n  }\n\n  getRelativePath(_file) {\n    let file = path.relative(this.appPath, _file);\n    if (file.startsWith('..')) {\n      file = _file;\n    } else if (!file.startsWith('.')) {\n      file = '.' + path.sep + file;\n    }\n    return file;\n  }\n\n  prettierError(err) {\n    let { details: _details = '', origin } = err;\n\n    if (origin == null) {\n      const caseSensitivity =\n        err.message &&\n        /\\[CaseSensitivePathsPlugin\\] `(.*?)` .* `(.*?)`/.exec(err.message);\n      if (caseSensitivity) {\n        const [, incorrectPath, actualName] = caseSensitivity;\n        const actualFile = this.getRelativePath(\n          path.join(path.dirname(incorrectPath), actualName)\n        );\n        const incorrectName = path.basename(incorrectPath);\n        err.message = `Cannot find file: '${incorrectName}' does not match the corresponding name on disk: '${actualFile}'.`;\n      }\n      return err;\n    }\n\n    const file = this.getRelativePath(origin.resource);\n    let details = _details.split('\\n');\n\n    const request = /resolve '(.*?)' in '(.*?)'/.exec(details);\n    if (request) {\n      const isModule = details[1] && details[1].includes('module');\n      const isFile = details[1] && details[1].includes('file');\n\n      let [, target, context] = request;\n      context = this.getRelativePath(context);\n      if (isModule) {\n        const isYarn = this.useYarnCommand();\n        details = [\n          `Cannot find module: '${target}'. Make sure this package is installed.`,\n          '',\n          'You can install this package by running: ' +\n            (isYarn\n              ? chalk.bold(`yarn add ${target}`)\n              : chalk.bold(`npm install ${target}`)) +\n            '.',\n        ];\n      } else if (isFile) {\n        details = [`Cannot find file '${target}' in '${context}'.`];\n      } else {\n        details = [err.message];\n      }\n    } else {\n      details = [err.message];\n    }\n    err.message = [file, ...details].join('\\n').replace('Error: ', '');\n\n    const isModuleScopePluginError =\n      err.error && err.error.__module_scope_plugin;\n    if (isModuleScopePluginError) {\n      err.message = err.message.replace('Module not found: ', '');\n    }\n    return err;\n  }\n\n  apply(compiler) {\n    const { prettierError } = this;\n    compiler.hooks.make.intercept({\n      register(tap) {\n        if (\n          !(tap.name === 'MultiEntryPlugin' || tap.name === 'SingleEntryPlugin')\n        ) {\n          return tap;\n        }\n        return Object.assign({}, tap, {\n          fn: (compilation, callback) => {\n            tap.fn(compilation, (err, ...args) => {\n              if (err && err.name === 'ModuleNotFoundError') {\n                err = prettierError(err);\n              }\n              callback(err, ...args);\n            });\n          },\n        });\n      },\n    });\n    compiler.hooks.normalModuleFactory.tap('ModuleNotFoundPlugin', nmf => {\n      nmf.hooks.afterResolve.intercept({\n        register(tap) {\n          if (tap.name !== 'CaseSensitivePathsPlugin') {\n            return tap;\n          }\n          return Object.assign({}, tap, {\n            fn: (compilation, callback) => {\n              tap.fn(compilation, (err, ...args) => {\n                if (\n                  err &&\n                  err.message &&\n                  err.message.includes('CaseSensitivePathsPlugin')\n                ) {\n                  err = prettierError(err);\n                }\n                callback(err, ...args);\n              });\n            },\n          });\n        },\n      });\n    });\n  }\n}\n\nmodule.exports = ModuleNotFoundPlugin;\n"]},"metadata":{},"sourceType":"script"}