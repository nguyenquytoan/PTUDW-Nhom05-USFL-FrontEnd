{"ast":null,"code":"\"use strict\";\n\nvar _ava = _interopRequireDefault(require(\"ava\"));\n\nvar _index = _interopRequireDefault(require(\"../index\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // Node creation\n\n\nvar nodeTypes = [['attribute', '[href]', {\n  attribute: 'href'\n}], ['className', '.classy', {\n  value: 'classy'\n}], ['combinator', ' >> ', {\n  value: '>>',\n  spaces: {\n    before: ' ',\n    after: ' '\n  }\n}], ['comment', '/* comment */', {\n  value: '/* comment */'\n}], ['id', '#test', {\n  value: 'test'\n}], ['nesting', '&'], ['pseudo', '::before', {\n  value: '::before'\n}], ['string', '\"wow\"', {\n  value: '\"wow\"'\n}], ['tag', 'button', {\n  value: 'button'\n}], ['universal', '*']];\nnodeTypes.forEach(function (type) {\n  (0, _ava.default)(\"parser#\" + type[0], function (t) {\n    var node = _index.default[type[0]](type[2] || {});\n\n    t.deepEqual(String(node), type[1]);\n  });\n});\n(0, _ava.default)('string constants', function (t) {\n  t.truthy(_index.default.TAG);\n  t.truthy(_index.default.STRING);\n  t.truthy(_index.default.SELECTOR);\n  t.truthy(_index.default.ROOT);\n  t.truthy(_index.default.PSEUDO);\n  t.truthy(_index.default.NESTING);\n  t.truthy(_index.default.ID);\n  t.truthy(_index.default.COMMENT);\n  t.truthy(_index.default.COMBINATOR);\n  t.truthy(_index.default.CLASS);\n  t.truthy(_index.default.ATTRIBUTE);\n  t.truthy(_index.default.UNIVERSAL);\n});\n(0, _ava.default)('construct a whole tree', function (t) {\n  var root = _index.default.root();\n\n  var selector = _index.default.selector();\n\n  selector.append(_index.default.id({\n    value: 'tree'\n  }));\n  root.append(selector);\n  t.deepEqual(String(root), '#tree');\n});\n(0, _ava.default)('no operation', function (t) {\n  t.notThrows(function () {\n    return (0, _index.default)().processSync('h1 h2 h3');\n  });\n});\n(0, _ava.default)('empty selector string', function (t) {\n  t.notThrows(function () {\n    return (0, _index.default)(function (selectors) {\n      selectors.walk(function (selector) {\n        selector.type = 'tag';\n      });\n    }).processSync('');\n  });\n});\n(0, _ava.default)('async parser', function (t) {\n  return (0, _index.default)(function (selectors) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        selectors.first.nodes[0].value = 'bar';\n        res();\n      }, 1);\n    });\n  }).process('foo').then(function (result) {\n    t.deepEqual(result, 'bar');\n  });\n});\n(0, _ava.default)('parse errors with the async parser', function (t) {\n  return (0, _index.default)(function (selectors) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        selectors.first.nodes[0].value = 'bar';\n        res();\n      }, 1);\n    });\n  }).process('a b: c').catch(function (err) {\n    return t.truthy(err);\n  });\n});\n(0, _ava.default)('parse errors within the async processor', function (t) {\n  return (0, _index.default)(function (selectors) {\n    return new Promise(function (res, rej) {\n      setTimeout(function () {\n        rej(selectors.error(\"async error\"));\n      }, 1);\n    });\n  }).process('.foo').catch(function (err) {\n    return t.truthy(err);\n  });\n});\n(0, _ava.default)('parse errors within the async processor before the promise returns', function (t) {\n  return (0, _index.default)(function (selectors) {\n    throw selectors.error(\"async error\");\n  }).process('.foo').catch(function (err) {\n    return t.truthy(err);\n  });\n});\n(0, _ava.default)('returning a promise to the sync processor fails', function (t) {\n  t.throws(function () {\n    return (0, _index.default)(function () {\n      return new Promise(function (res) {\n        setTimeout(function () {\n          res();\n        }, 1);\n      });\n    }).processSync('.foo');\n  });\n});\n(0, _ava.default)('Passing a rule works async', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  return (0, _index.default)(function (root) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        root.walkClasses(function (node) {\n          node.value = \"bar\";\n        });\n        res();\n      }, 1);\n    });\n  }).process(rule).then(function (newSel) {\n    t.deepEqual(newSel, \".bar\");\n    t.deepEqual(rule.selector, \".bar\");\n  });\n});\n(0, _ava.default)('Passing a rule with mutation disabled works async', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  return (0, _index.default)(function (root) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        root.walkClasses(function (node) {\n          node.value = \"bar\";\n        });\n        res();\n      }, 1);\n    });\n  }).process(rule, {\n    updateSelector: false\n  }).then(function (newSel) {\n    t.deepEqual(newSel, \".bar\");\n    t.deepEqual(rule.selector, \".foo\");\n  });\n});\n(0, _ava.default)('Passing a rule with mutation works sync', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  var newSel = (0, _index.default)(function (root) {\n    root.walkClasses(function (node) {\n      node.value = \"bar\";\n    });\n  }).processSync(rule, {\n    updateSelector: true\n  });\n  t.deepEqual(newSel, \".bar\");\n  t.deepEqual(rule.selector, \".bar\");\n});\n(0, _ava.default)('Transform a selector synchronously', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  var count = (0, _index.default)(function (root) {\n    var classCount = 0;\n    root.walkClasses(function (node) {\n      classCount++;\n      node.value = \"bar\";\n    });\n    return classCount;\n  }).transformSync(rule, {\n    updateSelector: true\n  });\n  t.deepEqual(count, 1);\n  t.deepEqual(rule.selector, \".bar\");\n});\n(0, _ava.default)('Transform a selector asynchronously', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  return (0, _index.default)(function (root) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        var classCount = 0;\n        root.walkClasses(function (node) {\n          classCount++;\n          node.value = \"bar\";\n        });\n        res(classCount);\n      }, 1);\n    });\n  }).transform(rule, {\n    updateSelector: true\n  }).then(function (count) {\n    t.deepEqual(count, 1);\n    t.deepEqual(rule.selector, \".bar\");\n  });\n});\n(0, _ava.default)('get AST of a selector synchronously', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  var ast = (0, _index.default)(function (root) {\n    var classCount = 0;\n    root.walkClasses(function (node) {\n      classCount++;\n      node.value = \"bar\";\n    });\n    return classCount;\n  }).astSync(rule, {\n    updateSelector: true\n  });\n  t.deepEqual(ast.nodes[0].nodes[0].value, \"bar\");\n  t.deepEqual(rule.selector, \".bar\");\n});\n(0, _ava.default)('get AST a selector asynchronously', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  return (0, _index.default)(function (root) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        var classCount = 0;\n        root.walkClasses(function (node) {\n          classCount++;\n          node.value = \"bar\";\n        });\n        res(classCount);\n      }, 1);\n    });\n  }).ast(rule, {\n    updateSelector: true\n  }).then(function (ast) {\n    t.deepEqual(ast.nodes[0].nodes[0].value, \"bar\");\n    t.deepEqual(rule.selector, \".bar\");\n  });\n});","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/postcss-selector-parser/dist/__tests__/parser.js"],"names":["_ava","_interopRequireDefault","require","_index","obj","__esModule","default","nodeTypes","attribute","value","spaces","before","after","forEach","type","t","node","deepEqual","String","truthy","TAG","STRING","SELECTOR","ROOT","PSEUDO","NESTING","ID","COMMENT","COMBINATOR","CLASS","ATTRIBUTE","UNIVERSAL","root","selector","append","id","notThrows","processSync","selectors","walk","Promise","res","setTimeout","first","nodes","process","then","result","catch","err","rej","error","throws","rule","walkClasses","newSel","updateSelector","count","classCount","transformSync","transform","ast","astSync"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _ava = _interopRequireDefault(require(\"ava\"));\n\nvar _index = _interopRequireDefault(require(\"../index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Node creation\nvar nodeTypes = [['attribute', '[href]', {\n  attribute: 'href'\n}], ['className', '.classy', {\n  value: 'classy'\n}], ['combinator', ' >> ', {\n  value: '>>',\n  spaces: {\n    before: ' ',\n    after: ' '\n  }\n}], ['comment', '/* comment */', {\n  value: '/* comment */'\n}], ['id', '#test', {\n  value: 'test'\n}], ['nesting', '&'], ['pseudo', '::before', {\n  value: '::before'\n}], ['string', '\"wow\"', {\n  value: '\"wow\"'\n}], ['tag', 'button', {\n  value: 'button'\n}], ['universal', '*']];\nnodeTypes.forEach(function (type) {\n  (0, _ava.default)(\"parser#\" + type[0], function (t) {\n    var node = _index.default[type[0]](type[2] || {});\n\n    t.deepEqual(String(node), type[1]);\n  });\n});\n(0, _ava.default)('string constants', function (t) {\n  t.truthy(_index.default.TAG);\n  t.truthy(_index.default.STRING);\n  t.truthy(_index.default.SELECTOR);\n  t.truthy(_index.default.ROOT);\n  t.truthy(_index.default.PSEUDO);\n  t.truthy(_index.default.NESTING);\n  t.truthy(_index.default.ID);\n  t.truthy(_index.default.COMMENT);\n  t.truthy(_index.default.COMBINATOR);\n  t.truthy(_index.default.CLASS);\n  t.truthy(_index.default.ATTRIBUTE);\n  t.truthy(_index.default.UNIVERSAL);\n});\n(0, _ava.default)('construct a whole tree', function (t) {\n  var root = _index.default.root();\n\n  var selector = _index.default.selector();\n\n  selector.append(_index.default.id({\n    value: 'tree'\n  }));\n  root.append(selector);\n  t.deepEqual(String(root), '#tree');\n});\n(0, _ava.default)('no operation', function (t) {\n  t.notThrows(function () {\n    return (0, _index.default)().processSync('h1 h2 h3');\n  });\n});\n(0, _ava.default)('empty selector string', function (t) {\n  t.notThrows(function () {\n    return (0, _index.default)(function (selectors) {\n      selectors.walk(function (selector) {\n        selector.type = 'tag';\n      });\n    }).processSync('');\n  });\n});\n(0, _ava.default)('async parser', function (t) {\n  return (0, _index.default)(function (selectors) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        selectors.first.nodes[0].value = 'bar';\n        res();\n      }, 1);\n    });\n  }).process('foo').then(function (result) {\n    t.deepEqual(result, 'bar');\n  });\n});\n(0, _ava.default)('parse errors with the async parser', function (t) {\n  return (0, _index.default)(function (selectors) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        selectors.first.nodes[0].value = 'bar';\n        res();\n      }, 1);\n    });\n  }).process('a b: c').catch(function (err) {\n    return t.truthy(err);\n  });\n});\n(0, _ava.default)('parse errors within the async processor', function (t) {\n  return (0, _index.default)(function (selectors) {\n    return new Promise(function (res, rej) {\n      setTimeout(function () {\n        rej(selectors.error(\"async error\"));\n      }, 1);\n    });\n  }).process('.foo').catch(function (err) {\n    return t.truthy(err);\n  });\n});\n(0, _ava.default)('parse errors within the async processor before the promise returns', function (t) {\n  return (0, _index.default)(function (selectors) {\n    throw selectors.error(\"async error\");\n  }).process('.foo').catch(function (err) {\n    return t.truthy(err);\n  });\n});\n(0, _ava.default)('returning a promise to the sync processor fails', function (t) {\n  t.throws(function () {\n    return (0, _index.default)(function () {\n      return new Promise(function (res) {\n        setTimeout(function () {\n          res();\n        }, 1);\n      });\n    }).processSync('.foo');\n  });\n});\n(0, _ava.default)('Passing a rule works async', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  return (0, _index.default)(function (root) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        root.walkClasses(function (node) {\n          node.value = \"bar\";\n        });\n        res();\n      }, 1);\n    });\n  }).process(rule).then(function (newSel) {\n    t.deepEqual(newSel, \".bar\");\n    t.deepEqual(rule.selector, \".bar\");\n  });\n});\n(0, _ava.default)('Passing a rule with mutation disabled works async', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  return (0, _index.default)(function (root) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        root.walkClasses(function (node) {\n          node.value = \"bar\";\n        });\n        res();\n      }, 1);\n    });\n  }).process(rule, {\n    updateSelector: false\n  }).then(function (newSel) {\n    t.deepEqual(newSel, \".bar\");\n    t.deepEqual(rule.selector, \".foo\");\n  });\n});\n(0, _ava.default)('Passing a rule with mutation works sync', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  var newSel = (0, _index.default)(function (root) {\n    root.walkClasses(function (node) {\n      node.value = \"bar\";\n    });\n  }).processSync(rule, {\n    updateSelector: true\n  });\n  t.deepEqual(newSel, \".bar\");\n  t.deepEqual(rule.selector, \".bar\");\n});\n(0, _ava.default)('Transform a selector synchronously', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  var count = (0, _index.default)(function (root) {\n    var classCount = 0;\n    root.walkClasses(function (node) {\n      classCount++;\n      node.value = \"bar\";\n    });\n    return classCount;\n  }).transformSync(rule, {\n    updateSelector: true\n  });\n  t.deepEqual(count, 1);\n  t.deepEqual(rule.selector, \".bar\");\n});\n(0, _ava.default)('Transform a selector asynchronously', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  return (0, _index.default)(function (root) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        var classCount = 0;\n        root.walkClasses(function (node) {\n          classCount++;\n          node.value = \"bar\";\n        });\n        res(classCount);\n      }, 1);\n    });\n  }).transform(rule, {\n    updateSelector: true\n  }).then(function (count) {\n    t.deepEqual(count, 1);\n    t.deepEqual(rule.selector, \".bar\");\n  });\n});\n(0, _ava.default)('get AST of a selector synchronously', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  var ast = (0, _index.default)(function (root) {\n    var classCount = 0;\n    root.walkClasses(function (node) {\n      classCount++;\n      node.value = \"bar\";\n    });\n    return classCount;\n  }).astSync(rule, {\n    updateSelector: true\n  });\n  t.deepEqual(ast.nodes[0].nodes[0].value, \"bar\");\n  t.deepEqual(rule.selector, \".bar\");\n});\n(0, _ava.default)('get AST a selector asynchronously', function (t) {\n  var rule = {\n    selector: '.foo'\n  };\n  return (0, _index.default)(function (root) {\n    return new Promise(function (res) {\n      setTimeout(function () {\n        var classCount = 0;\n        root.walkClasses(function (node) {\n          classCount++;\n          node.value = \"bar\";\n        });\n        res(classCount);\n      }, 1);\n    });\n  }).ast(rule, {\n    updateSelector: true\n  }).then(function (ast) {\n    t.deepEqual(ast.nodes[0].nodes[0].value, \"bar\");\n    t.deepEqual(rule.selector, \".bar\");\n  });\n});"]},"metadata":{},"sourceType":"script"}