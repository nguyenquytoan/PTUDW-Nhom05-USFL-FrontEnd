{"ast":null,"code":"var pump = require('./index');\n\nvar rs = require('fs').createReadStream('/dev/random');\n\nvar ws = require('fs').createWriteStream('/dev/null');\n\nvar toHex = function () {\n  var reverse = new (require('stream').Transform)();\n\n  reverse._transform = function (chunk, enc, callback) {\n    reverse.push(chunk.toString('hex'));\n    callback();\n  };\n\n  return reverse;\n};\n\nvar wsClosed = false;\nvar rsClosed = false;\nvar callbackCalled = false;\n\nvar check = function () {\n  if (wsClosed && rsClosed && callbackCalled) {\n    console.log('test-node.js passes');\n    clearTimeout(timeout);\n  }\n};\n\nws.on('close', function () {\n  wsClosed = true;\n  check();\n});\nrs.on('close', function () {\n  rsClosed = true;\n  check();\n});\nvar res = pump(rs, toHex(), toHex(), toHex(), ws, function () {\n  callbackCalled = true;\n  check();\n});\n\nif (res) {\n  process.exit(1);\n}\n\nsetTimeout(function () {\n  rs.destroy();\n}, 1000);\nvar timeout = setTimeout(function () {\n  throw new Error('timeout');\n}, 5000);","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/pumpify/node_modules/pump/test-node.js"],"names":["pump","require","rs","createReadStream","ws","createWriteStream","toHex","reverse","Transform","_transform","chunk","enc","callback","push","toString","wsClosed","rsClosed","callbackCalled","check","console","log","clearTimeout","timeout","on","res","process","exit","setTimeout","destroy","Error"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,SAAD,CAAlB;;AAEA,IAAIC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAP,CAAcE,gBAAd,CAA+B,aAA/B,CAAT;;AACA,IAAIC,EAAE,GAAGH,OAAO,CAAC,IAAD,CAAP,CAAcI,iBAAd,CAAgC,WAAhC,CAAT;;AAEA,IAAIC,KAAK,GAAG,YAAY;AACtB,MAAIC,OAAO,GAAG,KAAKN,OAAO,CAAC,QAAD,CAAP,CAAkBO,SAAvB,GAAd;;AAEAD,EAAAA,OAAO,CAACE,UAAR,GAAqB,UAAUC,KAAV,EAAiBC,GAAjB,EAAsBC,QAAtB,EAAgC;AACnDL,IAAAA,OAAO,CAACM,IAAR,CAAaH,KAAK,CAACI,QAAN,CAAe,KAAf,CAAb;AACAF,IAAAA,QAAQ;AACT,GAHD;;AAKA,SAAOL,OAAP;AACD,CATD;;AAWA,IAAIQ,QAAQ,GAAG,KAAf;AACA,IAAIC,QAAQ,GAAG,KAAf;AACA,IAAIC,cAAc,GAAG,KAArB;;AAEA,IAAIC,KAAK,GAAG,YAAY;AACtB,MAAIH,QAAQ,IAAIC,QAAZ,IAAwBC,cAA5B,EAA4C;AAC1CE,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAC,IAAAA,YAAY,CAACC,OAAD,CAAZ;AACD;AACF,CALD;;AAOAlB,EAAE,CAACmB,EAAH,CAAM,OAAN,EAAe,YAAY;AACzBR,EAAAA,QAAQ,GAAG,IAAX;AACAG,EAAAA,KAAK;AACN,CAHD;AAKAhB,EAAE,CAACqB,EAAH,CAAM,OAAN,EAAe,YAAY;AACzBP,EAAAA,QAAQ,GAAG,IAAX;AACAE,EAAAA,KAAK;AACN,CAHD;AAKA,IAAIM,GAAG,GAAGxB,IAAI,CAACE,EAAD,EAAKI,KAAK,EAAV,EAAcA,KAAK,EAAnB,EAAuBA,KAAK,EAA5B,EAAgCF,EAAhC,EAAoC,YAAY;AAC5Da,EAAAA,cAAc,GAAG,IAAjB;AACAC,EAAAA,KAAK;AACN,CAHa,CAAd;;AAKA,IAAIM,GAAJ,EAAS;AACPC,EAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD;;AAEDC,UAAU,CAAC,YAAY;AACrBzB,EAAAA,EAAE,CAAC0B,OAAH;AACD,CAFS,EAEP,IAFO,CAAV;AAIA,IAAIN,OAAO,GAAGK,UAAU,CAAC,YAAY;AACnC,QAAM,IAAIE,KAAJ,CAAU,SAAV,CAAN;AACD,CAFuB,EAErB,IAFqB,CAAxB","sourcesContent":["var pump = require('./index')\n\nvar rs = require('fs').createReadStream('/dev/random')\nvar ws = require('fs').createWriteStream('/dev/null')\n\nvar toHex = function () {\n  var reverse = new (require('stream').Transform)()\n\n  reverse._transform = function (chunk, enc, callback) {\n    reverse.push(chunk.toString('hex'))\n    callback()\n  }\n\n  return reverse\n}\n\nvar wsClosed = false\nvar rsClosed = false\nvar callbackCalled = false\n\nvar check = function () {\n  if (wsClosed && rsClosed && callbackCalled) {\n    console.log('test-node.js passes')\n    clearTimeout(timeout)\n  }\n}\n\nws.on('close', function () {\n  wsClosed = true\n  check()\n})\n\nrs.on('close', function () {\n  rsClosed = true\n  check()\n})\n\nvar res = pump(rs, toHex(), toHex(), toHex(), ws, function () {\n  callbackCalled = true\n  check()\n})\n\nif (res) {\n  process.exit(1)\n}\n\nsetTimeout(function () {\n  rs.destroy()\n}, 1000)\n\nvar timeout = setTimeout(function () {\n  throw new Error('timeout')\n}, 5000)\n"]},"metadata":{},"sourceType":"script"}