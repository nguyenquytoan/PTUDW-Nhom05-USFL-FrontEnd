{"ast":null,"code":"'use strict';\n\nconst {\n  createReadStream\n} = require('fs');\n\nconst {\n  join\n} = require('path');\n\nconst clientBasePath = join(__dirname, '..', '..', 'client');\n\nfunction routes(app, middleware, options) {\n  app.get('/__webpack_dev_server__/live.bundle.js', (req, res) => {\n    res.setHeader('Content-Type', 'application/javascript');\n    createReadStream(join(clientBasePath, 'live.bundle.js')).pipe(res);\n  });\n  app.get('/__webpack_dev_server__/sockjs.bundle.js', (req, res) => {\n    res.setHeader('Content-Type', 'application/javascript');\n    createReadStream(join(clientBasePath, 'sockjs.bundle.js')).pipe(res);\n  });\n  app.get('/webpack-dev-server.js', (req, res) => {\n    res.setHeader('Content-Type', 'application/javascript');\n    createReadStream(join(clientBasePath, 'index.bundle.js')).pipe(res);\n  });\n  app.get('/webpack-dev-server/*', (req, res) => {\n    res.setHeader('Content-Type', 'text/html');\n    createReadStream(join(clientBasePath, 'live.html')).pipe(res);\n  });\n  app.get('/webpack-dev-server', (req, res) => {\n    res.setHeader('Content-Type', 'text/html');\n    res.write('<!DOCTYPE html><html><head><meta charset=\"utf-8\"/></head><body>');\n    const outputPath = middleware.getFilenameFromUrl(options.publicPath || '/');\n    const filesystem = middleware.fileSystem;\n    writeDirectory(options.publicPath || '/', outputPath);\n    res.end('</body></html>');\n\n    function writeDirectory(baseUrl, basePath) {\n      const content = filesystem.readdirSync(basePath);\n      res.write('<ul>');\n      content.forEach(item => {\n        const p = `${basePath}/${item}`;\n\n        if (filesystem.statSync(p).isFile()) {\n          res.write(`<li><a href=\"${baseUrl + item}\">${item}</a></li>`);\n\n          if (/\\.js$/.test(item)) {\n            const html = item.substr(0, item.length - 3);\n            const containerHref = baseUrl + html;\n            const magicHtmlHref = baseUrl.replace( // eslint-disable-next-line\n            /(^(https?:\\/\\/[^\\/]+)?\\/)/, '$1webpack-dev-server/') + html;\n            res.write(`<li><a href=\"${containerHref}\">${html}</a>` + ` (magic html for ${item}) (<a href=\"${magicHtmlHref}\">webpack-dev-server</a>)` + `</li>`);\n          }\n        } else {\n          res.write(`<li>${item}<br>`);\n          writeDirectory(`${baseUrl + item}/`, p);\n          res.write('</li>');\n        }\n      });\n      res.write('</ul>');\n    }\n  });\n}\n\nmodule.exports = routes;","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/webpack-dev-server/lib/utils/routes.js"],"names":["createReadStream","require","join","clientBasePath","__dirname","routes","app","middleware","options","get","req","res","setHeader","pipe","write","outputPath","getFilenameFromUrl","publicPath","filesystem","fileSystem","writeDirectory","end","baseUrl","basePath","content","readdirSync","forEach","item","p","statSync","isFile","test","html","substr","length","containerHref","magicHtmlHref","replace","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nconst { createReadStream } = require('fs');\nconst { join } = require('path');\n\nconst clientBasePath = join(__dirname, '..', '..', 'client');\n\nfunction routes(app, middleware, options) {\n  app.get('/__webpack_dev_server__/live.bundle.js', (req, res) => {\n    res.setHeader('Content-Type', 'application/javascript');\n\n    createReadStream(join(clientBasePath, 'live.bundle.js')).pipe(res);\n  });\n\n  app.get('/__webpack_dev_server__/sockjs.bundle.js', (req, res) => {\n    res.setHeader('Content-Type', 'application/javascript');\n\n    createReadStream(join(clientBasePath, 'sockjs.bundle.js')).pipe(res);\n  });\n\n  app.get('/webpack-dev-server.js', (req, res) => {\n    res.setHeader('Content-Type', 'application/javascript');\n\n    createReadStream(join(clientBasePath, 'index.bundle.js')).pipe(res);\n  });\n\n  app.get('/webpack-dev-server/*', (req, res) => {\n    res.setHeader('Content-Type', 'text/html');\n\n    createReadStream(join(clientBasePath, 'live.html')).pipe(res);\n  });\n\n  app.get('/webpack-dev-server', (req, res) => {\n    res.setHeader('Content-Type', 'text/html');\n\n    res.write(\n      '<!DOCTYPE html><html><head><meta charset=\"utf-8\"/></head><body>'\n    );\n\n    const outputPath = middleware.getFilenameFromUrl(options.publicPath || '/');\n    const filesystem = middleware.fileSystem;\n\n    writeDirectory(options.publicPath || '/', outputPath);\n\n    res.end('</body></html>');\n\n    function writeDirectory(baseUrl, basePath) {\n      const content = filesystem.readdirSync(basePath);\n\n      res.write('<ul>');\n\n      content.forEach((item) => {\n        const p = `${basePath}/${item}`;\n\n        if (filesystem.statSync(p).isFile()) {\n          res.write(`<li><a href=\"${baseUrl + item}\">${item}</a></li>`);\n\n          if (/\\.js$/.test(item)) {\n            const html = item.substr(0, item.length - 3);\n            const containerHref = baseUrl + html;\n\n            const magicHtmlHref =\n              baseUrl.replace(\n                // eslint-disable-next-line\n                /(^(https?:\\/\\/[^\\/]+)?\\/)/,\n                '$1webpack-dev-server/'\n              ) + html;\n\n            res.write(\n              `<li><a href=\"${containerHref}\">${html}</a>` +\n                ` (magic html for ${item}) (<a href=\"${magicHtmlHref}\">webpack-dev-server</a>)` +\n                `</li>`\n            );\n          }\n        } else {\n          res.write(`<li>${item}<br>`);\n\n          writeDirectory(`${baseUrl + item}/`, p);\n\n          res.write('</li>');\n        }\n      });\n\n      res.write('</ul>');\n    }\n  });\n}\n\nmodule.exports = routes;\n"]},"metadata":{},"sourceType":"script"}