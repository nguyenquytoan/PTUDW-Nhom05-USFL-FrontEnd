{"ast":null,"code":"'use strict';\n\nfunction _fs() {\n  const data = _interopRequireDefault(require('fs'));\n\n  _fs = function _fs() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _path() {\n  const data = _interopRequireDefault(require('path'));\n\n  _path = function _path() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _child_process() {\n  const data = require('child_process');\n\n  _child_process = function _child_process() {\n    return data;\n  };\n\n  return data;\n}\n\nvar _constants = _interopRequireDefault(require('../constants'));\n\nvar fastPath = _interopRequireWildcard(require('../lib/fast_path'));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError('Invalid attempt to destructure non-iterable instance');\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i['return'] != null) _i['return']();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction find(roots, extensions, ignore, callback) {\n  const result = [];\n  let activeCalls = 0;\n\n  function search(directory) {\n    activeCalls++;\n\n    _fs().default.readdir(directory, (err, names) => {\n      activeCalls--;\n\n      if (err) {\n        callback(result);\n        return;\n      }\n\n      names.forEach(file => {\n        file = _path().default.join(directory, file);\n\n        if (ignore(file)) {\n          return;\n        }\n\n        activeCalls++;\n\n        _fs().default.lstat(file, (err, stat) => {\n          activeCalls--;\n\n          if (!err && stat && !stat.isSymbolicLink()) {\n            if (stat.isDirectory()) {\n              search(file);\n            } else {\n              const ext = _path().default.extname(file).substr(1);\n\n              if (extensions.indexOf(ext) !== -1) {\n                result.push([file, stat.mtime.getTime(), stat.size]);\n              }\n            }\n          }\n\n          if (activeCalls === 0) {\n            callback(result);\n          }\n        });\n      });\n\n      if (activeCalls === 0) {\n        callback(result);\n      }\n    });\n  }\n\n  if (roots.length > 0) {\n    roots.forEach(search);\n  } else {\n    callback(result);\n  }\n}\n\nfunction findNative(roots, extensions, ignore, callback) {\n  const args = Array.from(roots);\n  args.push('-type', 'f');\n\n  if (extensions.length) {\n    args.push('(');\n  }\n\n  extensions.forEach((ext, index) => {\n    if (index) {\n      args.push('-o');\n    }\n\n    args.push('-iname');\n    args.push('*.' + ext);\n  });\n\n  if (extensions.length) {\n    args.push(')');\n  }\n\n  const child = (0, _child_process().spawn)('find', args);\n  let stdout = '';\n\n  if (child.stdout === null) {\n    throw new Error('stdout is null - this should never happen. Please open up an issue at https://github.com/facebook/jest');\n  }\n\n  child.stdout.setEncoding('utf-8');\n  child.stdout.on('data', data => stdout += data);\n  child.stdout.on('close', () => {\n    const lines = stdout.trim().split('\\n').filter(x => !ignore(x));\n    const result = [];\n    let count = lines.length;\n\n    if (!count) {\n      callback([]);\n    } else {\n      lines.forEach(path => {\n        _fs().default.stat(path, (err, stat) => {\n          if (!err && stat) {\n            result.push([path, stat.mtime.getTime(), stat.size]);\n          }\n\n          if (--count === 0) {\n            callback(result);\n          }\n        });\n      });\n    }\n  });\n}\n\nmodule.exports = function nodeCrawl(options) {\n  const data = options.data,\n        extensions = options.extensions,\n        forceNodeFilesystemAPI = options.forceNodeFilesystemAPI,\n        ignore = options.ignore,\n        rootDir = options.rootDir,\n        roots = options.roots;\n  return new Promise(resolve => {\n    const callback = list => {\n      const files = new Map();\n      const removedFiles = new Map(data.files);\n      list.forEach(fileData => {\n        const _fileData = _slicedToArray(fileData, 3),\n              filePath = _fileData[0],\n              mtime = _fileData[1],\n              size = _fileData[2];\n\n        const relativeFilePath = fastPath.relative(rootDir, filePath);\n        const existingFile = data.files.get(relativeFilePath);\n\n        if (existingFile && existingFile[_constants.default.MTIME] === mtime) {\n          files.set(relativeFilePath, existingFile);\n        } else {\n          // See ../constants.js; SHA-1 will always be null and fulfilled later.\n          files.set(relativeFilePath, ['', mtime, size, 0, '', null]);\n        }\n\n        removedFiles.delete(relativeFilePath);\n      });\n      data.files = files;\n      resolve({\n        hasteMap: data,\n        removedFiles\n      });\n    };\n\n    if (forceNodeFilesystemAPI || process.platform === 'win32') {\n      find(roots, extensions, ignore, callback);\n    } else {\n      findNative(roots, extensions, ignore, callback);\n    }\n  });\n};","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/jest-haste-map/build/crawlers/node.js"],"names":["_fs","data","_interopRequireDefault","require","_path","_child_process","_constants","fastPath","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","desc","defineProperty","getOwnPropertyDescriptor","get","set","default","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","length","err","Array","isArray","find","roots","extensions","ignore","callback","result","activeCalls","search","directory","readdir","names","forEach","file","join","lstat","stat","isSymbolicLink","isDirectory","ext","extname","substr","indexOf","mtime","getTime","size","findNative","args","from","index","child","spawn","stdout","Error","setEncoding","on","lines","trim","split","filter","x","count","path","module","exports","nodeCrawl","options","forceNodeFilesystemAPI","rootDir","Promise","resolve","list","files","Map","removedFiles","fileData","_fileData","filePath","relativeFilePath","relative","existingFile","MTIME","delete","hasteMap","process","platform"],"mappings":"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","sourcesContent":["'use strict';\n\nfunction _fs() {\n  const data = _interopRequireDefault(require('fs'));\n\n  _fs = function _fs() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _path() {\n  const data = _interopRequireDefault(require('path'));\n\n  _path = function _path() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _child_process() {\n  const data = require('child_process');\n\n  _child_process = function _child_process() {\n    return data;\n  };\n\n  return data;\n}\n\nvar _constants = _interopRequireDefault(require('../constants'));\n\nvar fastPath = _interopRequireWildcard(require('../lib/fast_path'));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc =\n            Object.defineProperty && Object.getOwnPropertyDescriptor\n              ? Object.getOwnPropertyDescriptor(obj, key)\n              : {};\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {default: obj};\n}\n\nfunction _slicedToArray(arr, i) {\n  return (\n    _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest()\n  );\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError('Invalid attempt to destructure non-iterable instance');\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n  try {\n    for (\n      var _i = arr[Symbol.iterator](), _s;\n      !(_n = (_s = _i.next()).done);\n      _n = true\n    ) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i['return'] != null) _i['return']();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction find(roots, extensions, ignore, callback) {\n  const result = [];\n  let activeCalls = 0;\n\n  function search(directory) {\n    activeCalls++;\n\n    _fs().default.readdir(directory, (err, names) => {\n      activeCalls--;\n\n      if (err) {\n        callback(result);\n        return;\n      }\n\n      names.forEach(file => {\n        file = _path().default.join(directory, file);\n\n        if (ignore(file)) {\n          return;\n        }\n\n        activeCalls++;\n\n        _fs().default.lstat(file, (err, stat) => {\n          activeCalls--;\n\n          if (!err && stat && !stat.isSymbolicLink()) {\n            if (stat.isDirectory()) {\n              search(file);\n            } else {\n              const ext = _path()\n                .default.extname(file)\n                .substr(1);\n\n              if (extensions.indexOf(ext) !== -1) {\n                result.push([file, stat.mtime.getTime(), stat.size]);\n              }\n            }\n          }\n\n          if (activeCalls === 0) {\n            callback(result);\n          }\n        });\n      });\n\n      if (activeCalls === 0) {\n        callback(result);\n      }\n    });\n  }\n\n  if (roots.length > 0) {\n    roots.forEach(search);\n  } else {\n    callback(result);\n  }\n}\n\nfunction findNative(roots, extensions, ignore, callback) {\n  const args = Array.from(roots);\n  args.push('-type', 'f');\n\n  if (extensions.length) {\n    args.push('(');\n  }\n\n  extensions.forEach((ext, index) => {\n    if (index) {\n      args.push('-o');\n    }\n\n    args.push('-iname');\n    args.push('*.' + ext);\n  });\n\n  if (extensions.length) {\n    args.push(')');\n  }\n\n  const child = (0, _child_process().spawn)('find', args);\n  let stdout = '';\n\n  if (child.stdout === null) {\n    throw new Error(\n      'stdout is null - this should never happen. Please open up an issue at https://github.com/facebook/jest'\n    );\n  }\n\n  child.stdout.setEncoding('utf-8');\n  child.stdout.on('data', data => (stdout += data));\n  child.stdout.on('close', () => {\n    const lines = stdout\n      .trim()\n      .split('\\n')\n      .filter(x => !ignore(x));\n    const result = [];\n    let count = lines.length;\n\n    if (!count) {\n      callback([]);\n    } else {\n      lines.forEach(path => {\n        _fs().default.stat(path, (err, stat) => {\n          if (!err && stat) {\n            result.push([path, stat.mtime.getTime(), stat.size]);\n          }\n\n          if (--count === 0) {\n            callback(result);\n          }\n        });\n      });\n    }\n  });\n}\n\nmodule.exports = function nodeCrawl(options) {\n  const data = options.data,\n    extensions = options.extensions,\n    forceNodeFilesystemAPI = options.forceNodeFilesystemAPI,\n    ignore = options.ignore,\n    rootDir = options.rootDir,\n    roots = options.roots;\n  return new Promise(resolve => {\n    const callback = list => {\n      const files = new Map();\n      const removedFiles = new Map(data.files);\n      list.forEach(fileData => {\n        const _fileData = _slicedToArray(fileData, 3),\n          filePath = _fileData[0],\n          mtime = _fileData[1],\n          size = _fileData[2];\n\n        const relativeFilePath = fastPath.relative(rootDir, filePath);\n        const existingFile = data.files.get(relativeFilePath);\n\n        if (existingFile && existingFile[_constants.default.MTIME] === mtime) {\n          files.set(relativeFilePath, existingFile);\n        } else {\n          // See ../constants.js; SHA-1 will always be null and fulfilled later.\n          files.set(relativeFilePath, ['', mtime, size, 0, '', null]);\n        }\n\n        removedFiles.delete(relativeFilePath);\n      });\n      data.files = files;\n      resolve({\n        hasteMap: data,\n        removedFiles\n      });\n    };\n\n    if (forceNodeFilesystemAPI || process.platform === 'win32') {\n      find(roots, extensions, ignore, callback);\n    } else {\n      findNative(roots, extensions, ignore, callback);\n    }\n  });\n};\n"]},"metadata":{},"sourceType":"script"}