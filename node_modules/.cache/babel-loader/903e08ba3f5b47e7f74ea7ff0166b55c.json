{"ast":null,"code":"var Buffer = require('buffer').Buffer;\n\nvar fs = require('fs');\n\nvar test = require('tape');\n\nvar UAParser = require('ua-parser-js');\n\nvar url = require('url');\n\nvar http = require('../..');\n\nvar browser = new UAParser().setUA(navigator.userAgent).getBrowser();\nvar browserName = browser.name;\nvar browserVersion = browser.major; // Response urls don't work on many browsers\n\nvar skipResponseUrl = browserName === 'IE' || browserName === 'Edge' || browserName === 'Chrome' && browserVersion <= 36 || browserName === 'Firefox' && browserVersion <= 31 || (browserName === 'Safari' || browserName === 'Mobile Safari') && browserVersion <= 8 || browserName === 'WebKit' || // Old mobile safari\nbrowserName === 'Android Browser' && browserVersion <= 4;\nvar reference = fs.readFileSync(__dirname + '/../server/static/basic.txt');\ntest('basic functionality', function (t) {\n  http.get('/basic.txt', function (res) {\n    if (!skipResponseUrl) {\n      var testUrl = url.resolve(global.location.href, '/basic.txt'); // Redirects aren't tested, but presumably only browser bugs\n      // would cause this to fail only after redirects.\n\n      t.equals(res.url, testUrl, 'response url correct');\n    }\n\n    var buffers = [];\n    res.on('end', function () {\n      t.ok(reference.equals(Buffer.concat(buffers)), 'contents match');\n      t.end();\n    });\n    res.on('data', function (data) {\n      buffers.push(data);\n    });\n  });\n});","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/stream-http/test/browser/text.js"],"names":["Buffer","require","fs","test","UAParser","url","http","browser","setUA","navigator","userAgent","getBrowser","browserName","name","browserVersion","major","skipResponseUrl","reference","readFileSync","__dirname","t","get","res","testUrl","resolve","global","location","href","equals","buffers","on","ok","concat","end","data","push"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,MAA/B;;AACA,IAAIE,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAhB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIG,QAAQ,GAAGH,OAAO,CAAC,cAAD,CAAtB;;AACA,IAAII,GAAG,GAAGJ,OAAO,CAAC,KAAD,CAAjB;;AAEA,IAAIK,IAAI,GAAGL,OAAO,CAAC,OAAD,CAAlB;;AAEA,IAAIM,OAAO,GAAI,IAAIH,QAAJ,EAAD,CAAiBI,KAAjB,CAAuBC,SAAS,CAACC,SAAjC,EAA4CC,UAA5C,EAAd;AACA,IAAIC,WAAW,GAAGL,OAAO,CAACM,IAA1B;AACA,IAAIC,cAAc,GAAGP,OAAO,CAACQ,KAA7B,C,CACA;;AACA,IAAIC,eAAe,GAAKJ,WAAW,KAAK,IAAjB,IACrBA,WAAW,KAAK,MADK,IAErBA,WAAW,KAAK,QAAhB,IAA4BE,cAAc,IAAI,EAFzB,IAGrBF,WAAW,KAAK,SAAhB,IAA6BE,cAAc,IAAI,EAH1B,IAIrB,CAACF,WAAW,KAAK,QAAhB,IAA4BA,WAAW,KAAK,eAA7C,KAAiEE,cAAc,IAAI,CAJ9D,IAKrBF,WAAW,KAAK,QALK,IAKQ;AAC7BA,WAAW,KAAK,iBAAhB,IAAqCE,cAAc,IAAI,CANzD;AAQA,IAAIG,SAAS,GAAGf,EAAE,CAACgB,YAAH,CAAgBC,SAAS,GAAG,6BAA5B,CAAhB;AAEAhB,IAAI,CAAC,qBAAD,EAAwB,UAAUiB,CAAV,EAAa;AACxCd,EAAAA,IAAI,CAACe,GAAL,CAAS,YAAT,EAAuB,UAAUC,GAAV,EAAe;AACrC,QAAI,CAACN,eAAL,EAAsB;AACrB,UAAIO,OAAO,GAAGlB,GAAG,CAACmB,OAAJ,CAAYC,MAAM,CAACC,QAAP,CAAgBC,IAA5B,EAAkC,YAAlC,CAAd,CADqB,CAErB;AACA;;AACAP,MAAAA,CAAC,CAACQ,MAAF,CAASN,GAAG,CAACjB,GAAb,EAAkBkB,OAAlB,EAA2B,sBAA3B;AACA;;AAED,QAAIM,OAAO,GAAG,EAAd;AAEAP,IAAAA,GAAG,CAACQ,EAAJ,CAAO,KAAP,EAAc,YAAY;AACzBV,MAAAA,CAAC,CAACW,EAAF,CAAKd,SAAS,CAACW,MAAV,CAAiB5B,MAAM,CAACgC,MAAP,CAAcH,OAAd,CAAjB,CAAL,EAA+C,gBAA/C;AACAT,MAAAA,CAAC,CAACa,GAAF;AACA,KAHD;AAKAX,IAAAA,GAAG,CAACQ,EAAJ,CAAO,MAAP,EAAe,UAAUI,IAAV,EAAgB;AAC9BL,MAAAA,OAAO,CAACM,IAAR,CAAaD,IAAb;AACA,KAFD;AAGA,GAlBD;AAmBA,CApBG,CAAJ","sourcesContent":["var Buffer = require('buffer').Buffer\nvar fs = require('fs')\nvar test = require('tape')\nvar UAParser = require('ua-parser-js')\nvar url = require('url')\n\nvar http = require('../..')\n\nvar browser = (new UAParser()).setUA(navigator.userAgent).getBrowser()\nvar browserName = browser.name\nvar browserVersion = browser.major\n// Response urls don't work on many browsers\nvar skipResponseUrl = ((browserName === 'IE') ||\n\t(browserName === 'Edge') ||\n\t(browserName === 'Chrome' && browserVersion <= 36) ||\n\t(browserName === 'Firefox' && browserVersion <= 31) ||\n\t((browserName === 'Safari' || browserName === 'Mobile Safari') && browserVersion <= 8) ||\n\t(browserName === 'WebKit') || // Old mobile safari\n\t(browserName === 'Android Browser' && browserVersion <= 4))\n\nvar reference = fs.readFileSync(__dirname + '/../server/static/basic.txt')\n\ntest('basic functionality', function (t) {\n\thttp.get('/basic.txt', function (res) {\n\t\tif (!skipResponseUrl) {\n\t\t\tvar testUrl = url.resolve(global.location.href, '/basic.txt')\n\t\t\t// Redirects aren't tested, but presumably only browser bugs\n\t\t\t// would cause this to fail only after redirects.\n\t\t\tt.equals(res.url, testUrl, 'response url correct')\n\t\t}\n\n\t\tvar buffers = []\n\n\t\tres.on('end', function () {\n\t\t\tt.ok(reference.equals(Buffer.concat(buffers)), 'contents match')\n\t\t\tt.end()\n\t\t})\n\n\t\tres.on('data', function (data) {\n\t\t\tbuffers.push(data)\n\t\t})\n\t})\n})"]},"metadata":{},"sourceType":"script"}