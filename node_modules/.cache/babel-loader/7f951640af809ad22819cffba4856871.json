{"ast":null,"code":"var isMergeable = require('./is-mergeable');\n\nvar sortSelectors = require('../level-1/sort-selectors');\n\nvar tidyRules = require('../level-1/tidy-rules');\n\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\n\nvar serializeBody = require('../../writer/one-time').body;\n\nvar serializeRules = require('../../writer/one-time').rules;\n\nvar Token = require('../../tokenizer/token');\n\nfunction unsafeSelector(value) {\n  return /\\.|\\*| :/.test(value);\n}\n\nfunction isBemElement(token) {\n  var asString = serializeRules(token[1]);\n  return asString.indexOf('__') > -1 || asString.indexOf('--') > -1;\n}\n\nfunction withoutModifier(selector) {\n  return selector.replace(/--[^ ,>\\+~:]+/g, '');\n}\n\nfunction removeAnyUnsafeElements(left, candidates) {\n  var leftSelector = withoutModifier(serializeRules(left[1]));\n\n  for (var body in candidates) {\n    var right = candidates[body];\n    var rightSelector = withoutModifier(serializeRules(right[1]));\n    if (rightSelector.indexOf(leftSelector) > -1 || leftSelector.indexOf(rightSelector) > -1) delete candidates[body];\n  }\n}\n\nfunction mergeNonAdjacentByBody(tokens, context) {\n  var options = context.options;\n  var mergeSemantically = options.level[OptimizationLevel.Two].mergeSemantically;\n  var adjacentSpace = options.compatibility.selectors.adjacentSpace;\n  var selectorsSortingMethod = options.level[OptimizationLevel.One].selectorsSortingMethod;\n  var mergeablePseudoClasses = options.compatibility.selectors.mergeablePseudoClasses;\n  var mergeablePseudoElements = options.compatibility.selectors.mergeablePseudoElements;\n  var multiplePseudoMerging = options.compatibility.selectors.multiplePseudoMerging;\n  var candidates = {};\n\n  for (var i = tokens.length - 1; i >= 0; i--) {\n    var token = tokens[i];\n    if (token[0] != Token.RULE) continue;\n    if (token[2].length > 0 && !mergeSemantically && unsafeSelector(serializeRules(token[1]))) candidates = {};\n    if (token[2].length > 0 && mergeSemantically && isBemElement(token)) removeAnyUnsafeElements(token, candidates);\n    var candidateBody = serializeBody(token[2]);\n    var oldToken = candidates[candidateBody];\n\n    if (oldToken && isMergeable(serializeRules(token[1]), mergeablePseudoClasses, mergeablePseudoElements, multiplePseudoMerging) && isMergeable(serializeRules(oldToken[1]), mergeablePseudoClasses, mergeablePseudoElements, multiplePseudoMerging)) {\n      if (token[2].length > 0) {\n        token[1] = tidyRules(oldToken[1].concat(token[1]), false, adjacentSpace, false, context.warnings);\n        token[1] = token[1].length > 1 ? sortSelectors(token[1], selectorsSortingMethod) : token[1];\n      } else {\n        token[1] = oldToken[1].concat(token[1]);\n      }\n\n      oldToken[2] = [];\n      candidates[candidateBody] = null;\n    }\n\n    candidates[serializeBody(token[2])] = token;\n  }\n}\n\nmodule.exports = mergeNonAdjacentByBody;","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/clean-css/lib/optimizer/level-2/merge-non-adjacent-by-body.js"],"names":["isMergeable","require","sortSelectors","tidyRules","OptimizationLevel","serializeBody","body","serializeRules","rules","Token","unsafeSelector","value","test","isBemElement","token","asString","indexOf","withoutModifier","selector","replace","removeAnyUnsafeElements","left","candidates","leftSelector","right","rightSelector","mergeNonAdjacentByBody","tokens","context","options","mergeSemantically","level","Two","adjacentSpace","compatibility","selectors","selectorsSortingMethod","One","mergeablePseudoClasses","mergeablePseudoElements","multiplePseudoMerging","i","length","RULE","candidateBody","oldToken","concat","warnings","module","exports"],"mappings":"AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,gBAAD,CAAzB;;AAEA,IAAIC,aAAa,GAAGD,OAAO,CAAC,2BAAD,CAA3B;;AACA,IAAIE,SAAS,GAAGF,OAAO,CAAC,uBAAD,CAAvB;;AAEA,IAAIG,iBAAiB,GAAGH,OAAO,CAAC,kCAAD,CAAP,CAA4CG,iBAApE;;AAEA,IAAIC,aAAa,GAAGJ,OAAO,CAAC,uBAAD,CAAP,CAAiCK,IAArD;;AACA,IAAIC,cAAc,GAAGN,OAAO,CAAC,uBAAD,CAAP,CAAiCO,KAAtD;;AAEA,IAAIC,KAAK,GAAGR,OAAO,CAAC,uBAAD,CAAnB;;AAEA,SAASS,cAAT,CAAwBC,KAAxB,EAA+B;AAC7B,SAAO,WAAWC,IAAX,CAAgBD,KAAhB,CAAP;AACD;;AAED,SAASE,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,MAAIC,QAAQ,GAAGR,cAAc,CAACO,KAAK,CAAC,CAAD,CAAN,CAA7B;AACA,SAAOC,QAAQ,CAACC,OAAT,CAAiB,IAAjB,IAAyB,CAAC,CAA1B,IAA+BD,QAAQ,CAACC,OAAT,CAAiB,IAAjB,IAAyB,CAAC,CAAhE;AACD;;AAED,SAASC,eAAT,CAAyBC,QAAzB,EAAmC;AACjC,SAAOA,QAAQ,CAACC,OAAT,CAAiB,gBAAjB,EAAmC,EAAnC,CAAP;AACD;;AAED,SAASC,uBAAT,CAAiCC,IAAjC,EAAuCC,UAAvC,EAAmD;AACjD,MAAIC,YAAY,GAAGN,eAAe,CAACV,cAAc,CAACc,IAAI,CAAC,CAAD,CAAL,CAAf,CAAlC;;AAEA,OAAK,IAAIf,IAAT,IAAiBgB,UAAjB,EAA6B;AAC3B,QAAIE,KAAK,GAAGF,UAAU,CAAChB,IAAD,CAAtB;AACA,QAAImB,aAAa,GAAGR,eAAe,CAACV,cAAc,CAACiB,KAAK,CAAC,CAAD,CAAN,CAAf,CAAnC;AAEA,QAAIC,aAAa,CAACT,OAAd,CAAsBO,YAAtB,IAAsC,CAAC,CAAvC,IAA4CA,YAAY,CAACP,OAAb,CAAqBS,aAArB,IAAsC,CAAC,CAAvF,EACE,OAAOH,UAAU,CAAChB,IAAD,CAAjB;AACH;AACF;;AAED,SAASoB,sBAAT,CAAgCC,MAAhC,EAAwCC,OAAxC,EAAiD;AAC/C,MAAIC,OAAO,GAAGD,OAAO,CAACC,OAAtB;AACA,MAAIC,iBAAiB,GAAGD,OAAO,CAACE,KAAR,CAAc3B,iBAAiB,CAAC4B,GAAhC,EAAqCF,iBAA7D;AACA,MAAIG,aAAa,GAAGJ,OAAO,CAACK,aAAR,CAAsBC,SAAtB,CAAgCF,aAApD;AACA,MAAIG,sBAAsB,GAAGP,OAAO,CAACE,KAAR,CAAc3B,iBAAiB,CAACiC,GAAhC,EAAqCD,sBAAlE;AACA,MAAIE,sBAAsB,GAAGT,OAAO,CAACK,aAAR,CAAsBC,SAAtB,CAAgCG,sBAA7D;AACA,MAAIC,uBAAuB,GAAGV,OAAO,CAACK,aAAR,CAAsBC,SAAtB,CAAgCI,uBAA9D;AACA,MAAIC,qBAAqB,GAAGX,OAAO,CAACK,aAAR,CAAsBC,SAAtB,CAAgCK,qBAA5D;AACA,MAAIlB,UAAU,GAAG,EAAjB;;AAEA,OAAK,IAAImB,CAAC,GAAGd,MAAM,CAACe,MAAP,GAAgB,CAA7B,EAAgCD,CAAC,IAAI,CAArC,EAAwCA,CAAC,EAAzC,EAA6C;AAC3C,QAAI3B,KAAK,GAAGa,MAAM,CAACc,CAAD,CAAlB;AACA,QAAI3B,KAAK,CAAC,CAAD,CAAL,IAAYL,KAAK,CAACkC,IAAtB,EACE;AAEF,QAAI7B,KAAK,CAAC,CAAD,CAAL,CAAS4B,MAAT,GAAkB,CAAlB,IAAwB,CAACZ,iBAAD,IAAsBpB,cAAc,CAACH,cAAc,CAACO,KAAK,CAAC,CAAD,CAAN,CAAf,CAAhE,EACEQ,UAAU,GAAG,EAAb;AAEF,QAAIR,KAAK,CAAC,CAAD,CAAL,CAAS4B,MAAT,GAAkB,CAAlB,IAAuBZ,iBAAvB,IAA4CjB,YAAY,CAACC,KAAD,CAA5D,EACEM,uBAAuB,CAACN,KAAD,EAAQQ,UAAR,CAAvB;AAEF,QAAIsB,aAAa,GAAGvC,aAAa,CAACS,KAAK,CAAC,CAAD,CAAN,CAAjC;AACA,QAAI+B,QAAQ,GAAGvB,UAAU,CAACsB,aAAD,CAAzB;;AACA,QAAIC,QAAQ,IACR7C,WAAW,CAACO,cAAc,CAACO,KAAK,CAAC,CAAD,CAAN,CAAf,EAA2BwB,sBAA3B,EAAmDC,uBAAnD,EAA4EC,qBAA5E,CADX,IAEAxC,WAAW,CAACO,cAAc,CAACsC,QAAQ,CAAC,CAAD,CAAT,CAAf,EAA8BP,sBAA9B,EAAsDC,uBAAtD,EAA+EC,qBAA/E,CAFf,EAEsH;AAEpH,UAAI1B,KAAK,CAAC,CAAD,CAAL,CAAS4B,MAAT,GAAkB,CAAtB,EAAyB;AACvB5B,QAAAA,KAAK,CAAC,CAAD,CAAL,GAAWX,SAAS,CAAC0C,QAAQ,CAAC,CAAD,CAAR,CAAYC,MAAZ,CAAmBhC,KAAK,CAAC,CAAD,CAAxB,CAAD,EAA+B,KAA/B,EAAsCmB,aAAtC,EAAqD,KAArD,EAA4DL,OAAO,CAACmB,QAApE,CAApB;AACAjC,QAAAA,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAAL,CAAS4B,MAAT,GAAkB,CAAlB,GAAsBxC,aAAa,CAACY,KAAK,CAAC,CAAD,CAAN,EAAWsB,sBAAX,CAAnC,GAAwEtB,KAAK,CAAC,CAAD,CAAxF;AACD,OAHD,MAGO;AACLA,QAAAA,KAAK,CAAC,CAAD,CAAL,GAAW+B,QAAQ,CAAC,CAAD,CAAR,CAAYC,MAAZ,CAAmBhC,KAAK,CAAC,CAAD,CAAxB,CAAX;AACD;;AAED+B,MAAAA,QAAQ,CAAC,CAAD,CAAR,GAAc,EAAd;AACAvB,MAAAA,UAAU,CAACsB,aAAD,CAAV,GAA4B,IAA5B;AACD;;AAEDtB,IAAAA,UAAU,CAACjB,aAAa,CAACS,KAAK,CAAC,CAAD,CAAN,CAAd,CAAV,GAAsCA,KAAtC;AACD;AACF;;AAEDkC,MAAM,CAACC,OAAP,GAAiBvB,sBAAjB","sourcesContent":["var isMergeable = require('./is-mergeable');\n\nvar sortSelectors = require('../level-1/sort-selectors');\nvar tidyRules = require('../level-1/tidy-rules');\n\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\n\nvar serializeBody = require('../../writer/one-time').body;\nvar serializeRules = require('../../writer/one-time').rules;\n\nvar Token = require('../../tokenizer/token');\n\nfunction unsafeSelector(value) {\n  return /\\.|\\*| :/.test(value);\n}\n\nfunction isBemElement(token) {\n  var asString = serializeRules(token[1]);\n  return asString.indexOf('__') > -1 || asString.indexOf('--') > -1;\n}\n\nfunction withoutModifier(selector) {\n  return selector.replace(/--[^ ,>\\+~:]+/g, '');\n}\n\nfunction removeAnyUnsafeElements(left, candidates) {\n  var leftSelector = withoutModifier(serializeRules(left[1]));\n\n  for (var body in candidates) {\n    var right = candidates[body];\n    var rightSelector = withoutModifier(serializeRules(right[1]));\n\n    if (rightSelector.indexOf(leftSelector) > -1 || leftSelector.indexOf(rightSelector) > -1)\n      delete candidates[body];\n  }\n}\n\nfunction mergeNonAdjacentByBody(tokens, context) {\n  var options = context.options;\n  var mergeSemantically = options.level[OptimizationLevel.Two].mergeSemantically;\n  var adjacentSpace = options.compatibility.selectors.adjacentSpace;\n  var selectorsSortingMethod = options.level[OptimizationLevel.One].selectorsSortingMethod;\n  var mergeablePseudoClasses = options.compatibility.selectors.mergeablePseudoClasses;\n  var mergeablePseudoElements = options.compatibility.selectors.mergeablePseudoElements;\n  var multiplePseudoMerging = options.compatibility.selectors.multiplePseudoMerging;\n  var candidates = {};\n\n  for (var i = tokens.length - 1; i >= 0; i--) {\n    var token = tokens[i];\n    if (token[0] != Token.RULE)\n      continue;\n\n    if (token[2].length > 0 && (!mergeSemantically && unsafeSelector(serializeRules(token[1]))))\n      candidates = {};\n\n    if (token[2].length > 0 && mergeSemantically && isBemElement(token))\n      removeAnyUnsafeElements(token, candidates);\n\n    var candidateBody = serializeBody(token[2]);\n    var oldToken = candidates[candidateBody];\n    if (oldToken &&\n        isMergeable(serializeRules(token[1]), mergeablePseudoClasses, mergeablePseudoElements, multiplePseudoMerging) &&\n        isMergeable(serializeRules(oldToken[1]), mergeablePseudoClasses, mergeablePseudoElements, multiplePseudoMerging)) {\n\n      if (token[2].length > 0) {\n        token[1] = tidyRules(oldToken[1].concat(token[1]), false, adjacentSpace, false, context.warnings);\n        token[1] = token[1].length > 1 ? sortSelectors(token[1], selectorsSortingMethod) : token[1];\n      } else {\n        token[1] = oldToken[1].concat(token[1]);\n      }\n\n      oldToken[2] = [];\n      candidates[candidateBody] = null;\n    }\n\n    candidates[serializeBody(token[2])] = token;\n  }\n}\n\nmodule.exports = mergeNonAdjacentByBody;\n"]},"metadata":{},"sourceType":"script"}