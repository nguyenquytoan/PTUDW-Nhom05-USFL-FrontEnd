{"ast":null,"code":"'use strict';\n\nconst Q = require('q'),\n      CoaParam = require('./coaparam'),\n      chalk = require('chalk');\n/**\n * Option\n *\n * Named entity. Options may have short and long keys for use from command line.\n *\n * @namespace\n * @class Opt\n * @extends CoaParam\n */\n\n\nmodule.exports = class Opt extends CoaParam {\n  /**\n   * @constructs\n   * @param {COA.Cmd} cmd - parent command\n   */\n  constructor(cmd) {\n    super(cmd);\n    this._short = null;\n    this._long = null;\n    this._flag = false;\n    this._only = false;\n\n    this._cmd._opts.push(this);\n  }\n  /**\n   * Set a short key for option to be used with one hyphen from command line.\n   *\n   * @param {String} short - short name\n   * @returns {COA.Opt} - this instance (for chainability)\n   */\n\n\n  short(short) {\n    this._short = short;\n    this._cmd._optsByKey[`-${short}`] = this;\n    return this;\n  }\n  /**\n   * Set a short key for option to be used with double hyphens from command line.\n   *\n   * @param {String} long - long name\n   * @returns {COA.Opt} - this instance (for chainability)\n   */\n\n\n  long(long) {\n    this._long = long;\n    this._cmd._optsByKey[`--${long}`] = this;\n    return this;\n  }\n  /**\n   * Make an option boolean, i.e. option without value.\n   *\n   * @returns {COA.Opt} - this instance (for chainability)\n   */\n\n\n  flag() {\n    this._flag = true;\n    return this;\n  }\n  /**\n   * Makes an option to act as a command,\n   * i.e. program will exit just after option action.\n   *\n   * @returns {COA.Opt} - this instance (for chainability)\n   */\n\n\n  only() {\n    this._only = true;\n    return this;\n  }\n  /**\n   * Add action for current option command.\n   * This action is performed if the current option\n   * is present in parsed options (with any value).\n   *\n   * @param {Function} act - action function,\n   *         invoked in the context of command instance\n   *         and has the parameters:\n   *                 - {Object} opts - parsed options\n   *                 - {Array} args - parsed arguments\n   *                 - {Object} res - actions result accumulator\n   *         It can return rejected promise by Cmd.reject (in case of error)\n   *         or any other value treated as result.\n   * @returns {COA.Opt} - this instance (for chainability)\n   */\n\n\n  act(act) {\n    // Need function here for arguments\n    const opt = this;\n\n    this._cmd.act(function (opts) {\n      if (!opts.hasOwnProperty(opt._name)) return;\n      const res = act.apply(this, arguments);\n      if (!opt._only) return res;\n      return Q.when(res, out => this.reject({\n        toString: () => out.toString(),\n        exitCode: 0\n      }));\n    });\n\n    return this;\n  }\n\n  _saveVal(opts, val) {\n    this._val && (val = this._val(val));\n    const name = this._name;\n    this._arr ? (opts[name] || (opts[name] = [])).push(val) : opts[name] = val;\n    return val;\n  }\n\n  _parse(argv, opts) {\n    return this._saveVal(opts, this._flag ? true : argv.shift());\n  }\n\n  _checkParsed(opts) {\n    return !opts.hasOwnProperty(this._name);\n  }\n\n  _usage() {\n    const res = [],\n          nameStr = this._name.toUpperCase();\n\n    if (this._short) {\n      res.push('-', chalk.greenBright(this._short));\n      this._flag || res.push(' ' + nameStr);\n      res.push(', ');\n    }\n\n    if (this._long) {\n      res.push('--', chalk.green(this._long));\n      this._flag || res.push('=' + nameStr);\n    }\n\n    res.push(' : ', this._title);\n    this._req && res.push(' ', chalk.redBright('(required)'));\n    return res.join('');\n  }\n\n  _requiredText() {\n    return `Missing required option:\\n  ${this._usage()}`;\n  }\n\n};","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/coa/lib/opt.js"],"names":["Q","require","CoaParam","chalk","module","exports","Opt","constructor","cmd","_short","_long","_flag","_only","_cmd","_opts","push","short","_optsByKey","long","flag","only","act","opt","opts","hasOwnProperty","_name","res","apply","arguments","when","out","reject","toString","exitCode","_saveVal","val","_val","name","_arr","_parse","argv","shift","_checkParsed","_usage","nameStr","toUpperCase","greenBright","green","_title","_req","redBright","join","_requiredText"],"mappings":"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","sourcesContent":["'use strict';\n\nconst\n    Q = require('q'),\n\n    CoaParam = require('./coaparam'),\n    chalk = require('chalk');\n\n/**\n * Option\n *\n * Named entity. Options may have short and long keys for use from command line.\n *\n * @namespace\n * @class Opt\n * @extends CoaParam\n */\nmodule.exports = class Opt extends CoaParam {\n    /**\n     * @constructs\n     * @param {COA.Cmd} cmd - parent command\n     */\n    constructor(cmd) {\n        super(cmd);\n\n        this._short = null;\n        this._long = null;\n        this._flag = false;\n        this._only = false;\n        this._cmd._opts.push(this);\n    }\n\n    /**\n     * Set a short key for option to be used with one hyphen from command line.\n     *\n     * @param {String} short - short name\n     * @returns {COA.Opt} - this instance (for chainability)\n     */\n    short(short) {\n        this._short = short;\n        this._cmd._optsByKey[`-${short}`] = this;\n        return this;\n    }\n\n    /**\n     * Set a short key for option to be used with double hyphens from command line.\n     *\n     * @param {String} long - long name\n     * @returns {COA.Opt} - this instance (for chainability)\n     */\n    long(long) {\n        this._long = long;\n        this._cmd._optsByKey[`--${long}`] = this;\n        return this;\n    }\n\n    /**\n     * Make an option boolean, i.e. option without value.\n     *\n     * @returns {COA.Opt} - this instance (for chainability)\n     */\n    flag() {\n        this._flag = true;\n        return this;\n    }\n\n    /**\n     * Makes an option to act as a command,\n     * i.e. program will exit just after option action.\n     *\n     * @returns {COA.Opt} - this instance (for chainability)\n     */\n    only() {\n        this._only = true;\n        return this;\n    }\n\n    /**\n     * Add action for current option command.\n     * This action is performed if the current option\n     * is present in parsed options (with any value).\n     *\n     * @param {Function} act - action function,\n     *         invoked in the context of command instance\n     *         and has the parameters:\n     *                 - {Object} opts - parsed options\n     *                 - {Array} args - parsed arguments\n     *                 - {Object} res - actions result accumulator\n     *         It can return rejected promise by Cmd.reject (in case of error)\n     *         or any other value treated as result.\n     * @returns {COA.Opt} - this instance (for chainability)\n     */\n    act(act) {\n        // Need function here for arguments\n        const opt = this;\n        this._cmd.act(function(opts) {\n            if(!opts.hasOwnProperty(opt._name)) return;\n\n            const res = act.apply(this, arguments);\n            if(!opt._only) return res;\n\n            return Q.when(res, out => this.reject({\n                toString : () => out.toString(),\n                exitCode : 0\n            }));\n        });\n\n        return this;\n    }\n\n    _saveVal(opts, val) {\n        this._val && (val = this._val(val));\n\n        const name = this._name;\n        this._arr\n            ? (opts[name] || (opts[name] = [])).push(val)\n            : (opts[name] = val);\n\n        return val;\n    }\n\n    _parse(argv, opts) {\n        return this._saveVal(opts, this._flag ? true : argv.shift());\n    }\n\n    _checkParsed(opts) {\n        return !opts.hasOwnProperty(this._name);\n    }\n\n    _usage() {\n        const res = [],\n            nameStr = this._name.toUpperCase();\n\n        if(this._short) {\n            res.push('-', chalk.greenBright(this._short));\n            this._flag || res.push(' ' + nameStr);\n            res.push(', ');\n        }\n\n        if(this._long) {\n            res.push('--', chalk.green(this._long));\n            this._flag || res.push('=' + nameStr);\n        }\n\n        res.push(' : ', this._title);\n\n        this._req && res.push(' ', chalk.redBright('(required)'));\n\n        return res.join('');\n    }\n\n    _requiredText() {\n        return `Missing required option:\\n  ${this._usage()}`;\n    }\n};\n"]},"metadata":{},"sourceType":"script"}