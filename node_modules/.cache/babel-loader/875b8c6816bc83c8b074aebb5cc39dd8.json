{"ast":null,"code":"/*\n\tpseudo selectors\n\n\t---\n\n\tthey are available in two forms:\n\t* filters called when the selector\n\t  is compiled and return a function\n\t  that needs to return next()\n\t* pseudos get called on execution\n\t  they need to return a boolean\n*/\nvar getNCheck = require(\"nth-check\");\n\nvar BaseFuncs = require(\"boolbase\");\n\nvar attributes = require(\"./attributes.js\");\n\nvar trueFunc = BaseFuncs.trueFunc;\nvar falseFunc = BaseFuncs.falseFunc;\nvar checkAttrib = attributes.rules.equals;\n\nfunction getAttribFunc(name, value) {\n  var data = {\n    name: name,\n    value: value\n  };\n  return function attribFunc(next, rule, options) {\n    return checkAttrib(next, data, options);\n  };\n}\n\nfunction getChildFunc(next, adapter) {\n  return function (elem) {\n    return !!adapter.getParent(elem) && next(elem);\n  };\n}\n\nvar filters = {\n  contains: function (next, text, options) {\n    var adapter = options.adapter;\n    return function contains(elem) {\n      return next(elem) && adapter.getText(elem).indexOf(text) >= 0;\n    };\n  },\n  icontains: function (next, text, options) {\n    var itext = text.toLowerCase();\n    var adapter = options.adapter;\n    return function icontains(elem) {\n      return next(elem) && adapter.getText(elem).toLowerCase().indexOf(itext) >= 0;\n    };\n  },\n  //location specific methods\n  \"nth-child\": function (next, rule, options) {\n    var func = getNCheck(rule);\n    var adapter = options.adapter;\n    if (func === falseFunc) return func;\n    if (func === trueFunc) return getChildFunc(next, adapter);\n    return function nthChild(elem) {\n      var siblings = adapter.getSiblings(elem);\n\n      for (var i = 0, pos = 0; i < siblings.length; i++) {\n        if (adapter.isTag(siblings[i])) {\n          if (siblings[i] === elem) break;else pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-child\": function (next, rule, options) {\n    var func = getNCheck(rule);\n    var adapter = options.adapter;\n    if (func === falseFunc) return func;\n    if (func === trueFunc) return getChildFunc(next, adapter);\n    return function nthLastChild(elem) {\n      var siblings = adapter.getSiblings(elem);\n\n      for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {\n        if (adapter.isTag(siblings[i])) {\n          if (siblings[i] === elem) break;else pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-of-type\": function (next, rule, options) {\n    var func = getNCheck(rule);\n    var adapter = options.adapter;\n    if (func === falseFunc) return func;\n    if (func === trueFunc) return getChildFunc(next, adapter);\n    return function nthOfType(elem) {\n      var siblings = adapter.getSiblings(elem);\n\n      for (var pos = 0, i = 0; i < siblings.length; i++) {\n        if (adapter.isTag(siblings[i])) {\n          if (siblings[i] === elem) break;\n          if (adapter.getName(siblings[i]) === adapter.getName(elem)) pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-of-type\": function (next, rule, options) {\n    var func = getNCheck(rule);\n    var adapter = options.adapter;\n    if (func === falseFunc) return func;\n    if (func === trueFunc) return getChildFunc(next, adapter);\n    return function nthLastOfType(elem) {\n      var siblings = adapter.getSiblings(elem);\n\n      for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {\n        if (adapter.isTag(siblings[i])) {\n          if (siblings[i] === elem) break;\n          if (adapter.getName(siblings[i]) === adapter.getName(elem)) pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  //TODO determine the actual root element\n  root: function (next, rule, options) {\n    var adapter = options.adapter;\n    return function (elem) {\n      return !adapter.getParent(elem) && next(elem);\n    };\n  },\n  scope: function (next, rule, options, context) {\n    var adapter = options.adapter;\n\n    if (!context || context.length === 0) {\n      //equivalent to :root\n      return filters.root(next, rule, options);\n    }\n\n    function equals(a, b) {\n      if (typeof adapter.equals === \"function\") return adapter.equals(a, b);\n      return a === b;\n    }\n\n    if (context.length === 1) {\n      //NOTE: can't be unpacked, as :has uses this for side-effects\n      return function (elem) {\n        return equals(context[0], elem) && next(elem);\n      };\n    }\n\n    return function (elem) {\n      return context.indexOf(elem) >= 0 && next(elem);\n    };\n  },\n  //jQuery extensions (others follow as pseudos)\n  checkbox: getAttribFunc(\"type\", \"checkbox\"),\n  file: getAttribFunc(\"type\", \"file\"),\n  password: getAttribFunc(\"type\", \"password\"),\n  radio: getAttribFunc(\"type\", \"radio\"),\n  reset: getAttribFunc(\"type\", \"reset\"),\n  image: getAttribFunc(\"type\", \"image\"),\n  submit: getAttribFunc(\"type\", \"submit\"),\n  //dynamic state pseudos. These depend on optional Adapter methods.\n  hover: function (next, rule, options) {\n    var adapter = options.adapter;\n\n    if (typeof adapter.isHovered === 'function') {\n      return function hover(elem) {\n        return next(elem) && adapter.isHovered(elem);\n      };\n    }\n\n    return falseFunc;\n  },\n  visited: function (next, rule, options) {\n    var adapter = options.adapter;\n\n    if (typeof adapter.isVisited === 'function') {\n      return function visited(elem) {\n        return next(elem) && adapter.isVisited(elem);\n      };\n    }\n\n    return falseFunc;\n  },\n  active: function (next, rule, options) {\n    var adapter = options.adapter;\n\n    if (typeof adapter.isActive === 'function') {\n      return function active(elem) {\n        return next(elem) && adapter.isActive(elem);\n      };\n    }\n\n    return falseFunc;\n  }\n}; //helper methods\n\nfunction getFirstElement(elems, adapter) {\n  for (var i = 0; elems && i < elems.length; i++) {\n    if (adapter.isTag(elems[i])) return elems[i];\n  }\n} //while filters are precompiled, pseudos get called when they are needed\n\n\nvar pseudos = {\n  empty: function (elem, adapter) {\n    return !adapter.getChildren(elem).some(function (elem) {\n      return adapter.isTag(elem) || elem.type === \"text\";\n    });\n  },\n  \"first-child\": function (elem, adapter) {\n    return getFirstElement(adapter.getSiblings(elem), adapter) === elem;\n  },\n  \"last-child\": function (elem, adapter) {\n    var siblings = adapter.getSiblings(elem);\n\n    for (var i = siblings.length - 1; i >= 0; i--) {\n      if (siblings[i] === elem) return true;\n      if (adapter.isTag(siblings[i])) break;\n    }\n\n    return false;\n  },\n  \"first-of-type\": function (elem, adapter) {\n    var siblings = adapter.getSiblings(elem);\n\n    for (var i = 0; i < siblings.length; i++) {\n      if (adapter.isTag(siblings[i])) {\n        if (siblings[i] === elem) return true;\n        if (adapter.getName(siblings[i]) === adapter.getName(elem)) break;\n      }\n    }\n\n    return false;\n  },\n  \"last-of-type\": function (elem, adapter) {\n    var siblings = adapter.getSiblings(elem);\n\n    for (var i = siblings.length - 1; i >= 0; i--) {\n      if (adapter.isTag(siblings[i])) {\n        if (siblings[i] === elem) return true;\n        if (adapter.getName(siblings[i]) === adapter.getName(elem)) break;\n      }\n    }\n\n    return false;\n  },\n  \"only-of-type\": function (elem, adapter) {\n    var siblings = adapter.getSiblings(elem);\n\n    for (var i = 0, j = siblings.length; i < j; i++) {\n      if (adapter.isTag(siblings[i])) {\n        if (siblings[i] === elem) continue;\n\n        if (adapter.getName(siblings[i]) === adapter.getName(elem)) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n  \"only-child\": function (elem, adapter) {\n    var siblings = adapter.getSiblings(elem);\n\n    for (var i = 0; i < siblings.length; i++) {\n      if (adapter.isTag(siblings[i]) && siblings[i] !== elem) return false;\n    }\n\n    return true;\n  },\n  //:matches(a, area, link)[href]\n  link: function (elem, adapter) {\n    return adapter.hasAttrib(elem, \"href\");\n  },\n  //TODO: :any-link once the name is finalized (as an alias of :link)\n  //forms\n  //to consider: :target\n  //:matches([selected], select:not([multiple]):not(> option[selected]) > option:first-of-type)\n  selected: function (elem, adapter) {\n    if (adapter.hasAttrib(elem, \"selected\")) return true;else if (adapter.getName(elem) !== \"option\") return false; //the first <option> in a <select> is also selected\n\n    var parent = adapter.getParent(elem);\n\n    if (!parent || adapter.getName(parent) !== \"select\" || adapter.hasAttrib(parent, \"multiple\")) {\n      return false;\n    }\n\n    var siblings = adapter.getChildren(parent);\n    var sawElem = false;\n\n    for (var i = 0; i < siblings.length; i++) {\n      if (adapter.isTag(siblings[i])) {\n        if (siblings[i] === elem) {\n          sawElem = true;\n        } else if (!sawElem) {\n          return false;\n        } else if (adapter.hasAttrib(siblings[i], \"selected\")) {\n          return false;\n        }\n      }\n    }\n\n    return sawElem;\n  },\n  //https://html.spec.whatwg.org/multipage/scripting.html#disabled-elements\n  //:matches(\n  //  :matches(button, input, select, textarea, menuitem, optgroup, option)[disabled],\n  //  optgroup[disabled] > option),\n  // fieldset[disabled] * //TODO not child of first <legend>\n  //)\n  disabled: function (elem, adapter) {\n    return adapter.hasAttrib(elem, \"disabled\");\n  },\n  enabled: function (elem, adapter) {\n    return !adapter.hasAttrib(elem, \"disabled\");\n  },\n  //:matches(:matches(:radio, :checkbox)[checked], :selected) (TODO menuitem)\n  checked: function (elem, adapter) {\n    return adapter.hasAttrib(elem, \"checked\") || pseudos.selected(elem, adapter);\n  },\n  //:matches(input, select, textarea)[required]\n  required: function (elem, adapter) {\n    return adapter.hasAttrib(elem, \"required\");\n  },\n  //:matches(input, select, textarea):not([required])\n  optional: function (elem, adapter) {\n    return !adapter.hasAttrib(elem, \"required\");\n  },\n  //jQuery extensions\n  //:not(:empty)\n  parent: function (elem, adapter) {\n    return !pseudos.empty(elem, adapter);\n  },\n  //:matches(h1, h2, h3, h4, h5, h6)\n  header: namePseudo([\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"]),\n  //:matches(button, input[type=button])\n  button: function (elem, adapter) {\n    var name = adapter.getName(elem);\n    return name === \"button\" || name === \"input\" && adapter.getAttributeValue(elem, \"type\") === \"button\";\n  },\n  //:matches(input, textarea, select, button)\n  input: namePseudo([\"input\", \"textarea\", \"select\", \"button\"]),\n  //input:matches(:not([type!='']), [type='text' i])\n  text: function (elem, adapter) {\n    var attr;\n    return adapter.getName(elem) === \"input\" && (!(attr = adapter.getAttributeValue(elem, \"type\")) || attr.toLowerCase() === \"text\");\n  }\n};\n\nfunction namePseudo(names) {\n  if (typeof Set !== \"undefined\") {\n    // eslint-disable-next-line no-undef\n    var nameSet = new Set(names);\n    return function (elem, adapter) {\n      return nameSet.has(adapter.getName(elem));\n    };\n  }\n\n  return function (elem, adapter) {\n    return names.indexOf(adapter.getName(elem)) >= 0;\n  };\n}\n\nfunction verifyArgs(func, name, subselect) {\n  if (subselect === null) {\n    if (func.length > 2 && name !== \"scope\") {\n      throw new Error(\"pseudo-selector :\" + name + \" requires an argument\");\n    }\n  } else {\n    if (func.length === 2) {\n      throw new Error(\"pseudo-selector :\" + name + \" doesn't have any arguments\");\n    }\n  }\n} //FIXME this feels hacky\n\n\nvar re_CSS3 = /^(?:(?:nth|last|first|only)-(?:child|of-type)|root|empty|(?:en|dis)abled|checked|not)$/;\nmodule.exports = {\n  compile: function (next, data, options, context) {\n    var name = data.name;\n    var subselect = data.data;\n    var adapter = options.adapter;\n\n    if (options && options.strict && !re_CSS3.test(name)) {\n      throw new Error(\":\" + name + \" isn't part of CSS3\");\n    }\n\n    if (typeof filters[name] === \"function\") {\n      return filters[name](next, subselect, options, context);\n    } else if (typeof pseudos[name] === \"function\") {\n      var func = pseudos[name];\n      verifyArgs(func, name, subselect);\n\n      if (func === falseFunc) {\n        return func;\n      }\n\n      if (next === trueFunc) {\n        return function pseudoRoot(elem) {\n          return func(elem, adapter, subselect);\n        };\n      }\n\n      return function pseudoArgs(elem) {\n        return func(elem, adapter, subselect) && next(elem);\n      };\n    } else {\n      throw new Error(\"unmatched pseudo-class :\" + name);\n    }\n  },\n  filters: filters,\n  pseudos: pseudos\n};","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/css-select/lib/pseudos.js"],"names":["getNCheck","require","BaseFuncs","attributes","trueFunc","falseFunc","checkAttrib","rules","equals","getAttribFunc","name","value","data","attribFunc","next","rule","options","getChildFunc","adapter","elem","getParent","filters","contains","text","getText","indexOf","icontains","itext","toLowerCase","func","nthChild","siblings","getSiblings","i","pos","length","isTag","nthLastChild","nthOfType","getName","nthLastOfType","root","scope","context","a","b","checkbox","file","password","radio","reset","image","submit","hover","isHovered","visited","isVisited","active","isActive","getFirstElement","elems","pseudos","empty","getChildren","some","type","j","link","hasAttrib","selected","parent","sawElem","disabled","enabled","checked","required","optional","header","namePseudo","button","getAttributeValue","input","attr","names","Set","nameSet","has","verifyArgs","subselect","Error","re_CSS3","module","exports","compile","strict","test","pseudoRoot","pseudoArgs"],"mappings":"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","sourcesContent":["/*\n\tpseudo selectors\n\n\t---\n\n\tthey are available in two forms:\n\t* filters called when the selector\n\t  is compiled and return a function\n\t  that needs to return next()\n\t* pseudos get called on execution\n\t  they need to return a boolean\n*/\n\nvar getNCheck = require(\"nth-check\");\nvar BaseFuncs = require(\"boolbase\");\nvar attributes = require(\"./attributes.js\");\nvar trueFunc = BaseFuncs.trueFunc;\nvar falseFunc = BaseFuncs.falseFunc;\n\nvar checkAttrib = attributes.rules.equals;\n\nfunction getAttribFunc(name, value) {\n    var data = { name: name, value: value };\n    return function attribFunc(next, rule, options) {\n        return checkAttrib(next, data, options);\n    };\n}\n\nfunction getChildFunc(next, adapter) {\n    return function(elem) {\n        return !!adapter.getParent(elem) && next(elem);\n    };\n}\n\nvar filters = {\n    contains: function(next, text, options) {\n        var adapter = options.adapter;\n\n        return function contains(elem) {\n            return next(elem) && adapter.getText(elem).indexOf(text) >= 0;\n        };\n    },\n    icontains: function(next, text, options) {\n        var itext = text.toLowerCase();\n        var adapter = options.adapter;\n\n        return function icontains(elem) {\n            return (\n                next(elem) &&\n                adapter\n                    .getText(elem)\n                    .toLowerCase()\n                    .indexOf(itext) >= 0\n            );\n        };\n    },\n\n    //location specific methods\n    \"nth-child\": function(next, rule, options) {\n        var func = getNCheck(rule);\n        var adapter = options.adapter;\n\n        if (func === falseFunc) return func;\n        if (func === trueFunc) return getChildFunc(next, adapter);\n\n        return function nthChild(elem) {\n            var siblings = adapter.getSiblings(elem);\n\n            for (var i = 0, pos = 0; i < siblings.length; i++) {\n                if (adapter.isTag(siblings[i])) {\n                    if (siblings[i] === elem) break;\n                    else pos++;\n                }\n            }\n\n            return func(pos) && next(elem);\n        };\n    },\n    \"nth-last-child\": function(next, rule, options) {\n        var func = getNCheck(rule);\n        var adapter = options.adapter;\n\n        if (func === falseFunc) return func;\n        if (func === trueFunc) return getChildFunc(next, adapter);\n\n        return function nthLastChild(elem) {\n            var siblings = adapter.getSiblings(elem);\n\n            for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {\n                if (adapter.isTag(siblings[i])) {\n                    if (siblings[i] === elem) break;\n                    else pos++;\n                }\n            }\n\n            return func(pos) && next(elem);\n        };\n    },\n    \"nth-of-type\": function(next, rule, options) {\n        var func = getNCheck(rule);\n        var adapter = options.adapter;\n\n        if (func === falseFunc) return func;\n        if (func === trueFunc) return getChildFunc(next, adapter);\n\n        return function nthOfType(elem) {\n            var siblings = adapter.getSiblings(elem);\n\n            for (var pos = 0, i = 0; i < siblings.length; i++) {\n                if (adapter.isTag(siblings[i])) {\n                    if (siblings[i] === elem) break;\n                    if (adapter.getName(siblings[i]) === adapter.getName(elem)) pos++;\n                }\n            }\n\n            return func(pos) && next(elem);\n        };\n    },\n    \"nth-last-of-type\": function(next, rule, options) {\n        var func = getNCheck(rule);\n        var adapter = options.adapter;\n\n        if (func === falseFunc) return func;\n        if (func === trueFunc) return getChildFunc(next, adapter);\n\n        return function nthLastOfType(elem) {\n            var siblings = adapter.getSiblings(elem);\n\n            for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {\n                if (adapter.isTag(siblings[i])) {\n                    if (siblings[i] === elem) break;\n                    if (adapter.getName(siblings[i]) === adapter.getName(elem)) pos++;\n                }\n            }\n\n            return func(pos) && next(elem);\n        };\n    },\n\n    //TODO determine the actual root element\n    root: function(next, rule, options) {\n        var adapter = options.adapter;\n\n        return function(elem) {\n            return !adapter.getParent(elem) && next(elem);\n        };\n    },\n\n    scope: function(next, rule, options, context) {\n        var adapter = options.adapter;\n\n        if (!context || context.length === 0) {\n            //equivalent to :root\n            return filters.root(next, rule, options);\n        }\n\n        function equals(a, b) {\n            if (typeof adapter.equals === \"function\") return adapter.equals(a, b);\n\n            return a === b;\n        }\n\n        if (context.length === 1) {\n            //NOTE: can't be unpacked, as :has uses this for side-effects\n            return function(elem) {\n                return equals(context[0], elem) && next(elem);\n            };\n        }\n\n        return function(elem) {\n            return context.indexOf(elem) >= 0 && next(elem);\n        };\n    },\n\n    //jQuery extensions (others follow as pseudos)\n    checkbox: getAttribFunc(\"type\", \"checkbox\"),\n    file: getAttribFunc(\"type\", \"file\"),\n    password: getAttribFunc(\"type\", \"password\"),\n    radio: getAttribFunc(\"type\", \"radio\"),\n    reset: getAttribFunc(\"type\", \"reset\"),\n    image: getAttribFunc(\"type\", \"image\"),\n    submit: getAttribFunc(\"type\", \"submit\"),\n\n    //dynamic state pseudos. These depend on optional Adapter methods.\n    hover: function(next, rule, options) {\n        var adapter = options.adapter;\n\n        if (typeof adapter.isHovered === 'function') {\n            return function hover(elem) {\n                return next(elem) && adapter.isHovered(elem);\n            };\n        }\n\n        return falseFunc;\n    },\n    visited: function(next, rule, options) {\n        var adapter = options.adapter;\n\n        if (typeof adapter.isVisited === 'function') {\n            return function visited(elem) {\n                return next(elem) && adapter.isVisited(elem);\n            };\n        }\n\n        return falseFunc;\n    },\n    active: function(next, rule, options) {\n        var adapter = options.adapter;\n\n        if (typeof adapter.isActive === 'function') {\n            return function active(elem) {\n                return next(elem) && adapter.isActive(elem);\n            };\n        }\n\n        return falseFunc;\n    }\n};\n\n//helper methods\nfunction getFirstElement(elems, adapter) {\n    for (var i = 0; elems && i < elems.length; i++) {\n        if (adapter.isTag(elems[i])) return elems[i];\n    }\n}\n\n//while filters are precompiled, pseudos get called when they are needed\nvar pseudos = {\n    empty: function(elem, adapter) {\n        return !adapter.getChildren(elem).some(function(elem) {\n            return adapter.isTag(elem) || elem.type === \"text\";\n        });\n    },\n\n    \"first-child\": function(elem, adapter) {\n        return getFirstElement(adapter.getSiblings(elem), adapter) === elem;\n    },\n    \"last-child\": function(elem, adapter) {\n        var siblings = adapter.getSiblings(elem);\n\n        for (var i = siblings.length - 1; i >= 0; i--) {\n            if (siblings[i] === elem) return true;\n            if (adapter.isTag(siblings[i])) break;\n        }\n\n        return false;\n    },\n    \"first-of-type\": function(elem, adapter) {\n        var siblings = adapter.getSiblings(elem);\n\n        for (var i = 0; i < siblings.length; i++) {\n            if (adapter.isTag(siblings[i])) {\n                if (siblings[i] === elem) return true;\n                if (adapter.getName(siblings[i]) === adapter.getName(elem)) break;\n            }\n        }\n\n        return false;\n    },\n    \"last-of-type\": function(elem, adapter) {\n        var siblings = adapter.getSiblings(elem);\n\n        for (var i = siblings.length - 1; i >= 0; i--) {\n            if (adapter.isTag(siblings[i])) {\n                if (siblings[i] === elem) return true;\n                if (adapter.getName(siblings[i]) === adapter.getName(elem)) break;\n            }\n        }\n\n        return false;\n    },\n    \"only-of-type\": function(elem, adapter) {\n        var siblings = adapter.getSiblings(elem);\n\n        for (var i = 0, j = siblings.length; i < j; i++) {\n            if (adapter.isTag(siblings[i])) {\n                if (siblings[i] === elem) continue;\n                if (adapter.getName(siblings[i]) === adapter.getName(elem)) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    },\n    \"only-child\": function(elem, adapter) {\n        var siblings = adapter.getSiblings(elem);\n\n        for (var i = 0; i < siblings.length; i++) {\n            if (adapter.isTag(siblings[i]) && siblings[i] !== elem) return false;\n        }\n\n        return true;\n    },\n\n    //:matches(a, area, link)[href]\n    link: function(elem, adapter) {\n        return adapter.hasAttrib(elem, \"href\");\n    },\n    //TODO: :any-link once the name is finalized (as an alias of :link)\n\n    //forms\n    //to consider: :target\n\n    //:matches([selected], select:not([multiple]):not(> option[selected]) > option:first-of-type)\n    selected: function(elem, adapter) {\n        if (adapter.hasAttrib(elem, \"selected\")) return true;\n        else if (adapter.getName(elem) !== \"option\") return false;\n\n        //the first <option> in a <select> is also selected\n        var parent = adapter.getParent(elem);\n\n        if (!parent || adapter.getName(parent) !== \"select\" || adapter.hasAttrib(parent, \"multiple\")) {\n            return false;\n        }\n\n        var siblings = adapter.getChildren(parent);\n        var sawElem = false;\n\n        for (var i = 0; i < siblings.length; i++) {\n            if (adapter.isTag(siblings[i])) {\n                if (siblings[i] === elem) {\n                    sawElem = true;\n                } else if (!sawElem) {\n                    return false;\n                } else if (adapter.hasAttrib(siblings[i], \"selected\")) {\n                    return false;\n                }\n            }\n        }\n\n        return sawElem;\n    },\n    //https://html.spec.whatwg.org/multipage/scripting.html#disabled-elements\n    //:matches(\n    //  :matches(button, input, select, textarea, menuitem, optgroup, option)[disabled],\n    //  optgroup[disabled] > option),\n    // fieldset[disabled] * //TODO not child of first <legend>\n    //)\n    disabled: function(elem, adapter) {\n        return adapter.hasAttrib(elem, \"disabled\");\n    },\n    enabled: function(elem, adapter) {\n        return !adapter.hasAttrib(elem, \"disabled\");\n    },\n    //:matches(:matches(:radio, :checkbox)[checked], :selected) (TODO menuitem)\n    checked: function(elem, adapter) {\n        return adapter.hasAttrib(elem, \"checked\") || pseudos.selected(elem, adapter);\n    },\n    //:matches(input, select, textarea)[required]\n    required: function(elem, adapter) {\n        return adapter.hasAttrib(elem, \"required\");\n    },\n    //:matches(input, select, textarea):not([required])\n    optional: function(elem, adapter) {\n        return !adapter.hasAttrib(elem, \"required\");\n    },\n\n    //jQuery extensions\n\n    //:not(:empty)\n    parent: function(elem, adapter) {\n        return !pseudos.empty(elem, adapter);\n    },\n    //:matches(h1, h2, h3, h4, h5, h6)\n    header: namePseudo([\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"]),\n\n    //:matches(button, input[type=button])\n    button: function(elem, adapter) {\n        var name = adapter.getName(elem);\n        return (\n            name === \"button\" || (name === \"input\" && adapter.getAttributeValue(elem, \"type\") === \"button\")\n        );\n    },\n    //:matches(input, textarea, select, button)\n    input: namePseudo([\"input\", \"textarea\", \"select\", \"button\"]),\n    //input:matches(:not([type!='']), [type='text' i])\n    text: function(elem, adapter) {\n        var attr;\n        return (\n            adapter.getName(elem) === \"input\" &&\n            (!(attr = adapter.getAttributeValue(elem, \"type\")) || attr.toLowerCase() === \"text\")\n        );\n    }\n};\n\nfunction namePseudo(names) {\n    if (typeof Set !== \"undefined\") {\n        // eslint-disable-next-line no-undef\n        var nameSet = new Set(names);\n\n        return function(elem, adapter) {\n            return nameSet.has(adapter.getName(elem));\n        };\n    }\n\n    return function(elem, adapter) {\n        return names.indexOf(adapter.getName(elem)) >= 0;\n    };\n}\n\nfunction verifyArgs(func, name, subselect) {\n    if (subselect === null) {\n        if (func.length > 2 && name !== \"scope\") {\n            throw new Error(\"pseudo-selector :\" + name + \" requires an argument\");\n        }\n    } else {\n        if (func.length === 2) {\n            throw new Error(\"pseudo-selector :\" + name + \" doesn't have any arguments\");\n        }\n    }\n}\n\n//FIXME this feels hacky\nvar re_CSS3 = /^(?:(?:nth|last|first|only)-(?:child|of-type)|root|empty|(?:en|dis)abled|checked|not)$/;\n\nmodule.exports = {\n    compile: function(next, data, options, context) {\n        var name = data.name;\n        var subselect = data.data;\n        var adapter = options.adapter;\n\n        if (options && options.strict && !re_CSS3.test(name)) {\n            throw new Error(\":\" + name + \" isn't part of CSS3\");\n        }\n\n        if (typeof filters[name] === \"function\") {\n            return filters[name](next, subselect, options, context);\n        } else if (typeof pseudos[name] === \"function\") {\n            var func = pseudos[name];\n\n            verifyArgs(func, name, subselect);\n\n            if (func === falseFunc) {\n                return func;\n            }\n\n            if (next === trueFunc) {\n                return function pseudoRoot(elem) {\n                    return func(elem, adapter, subselect);\n                };\n            }\n\n            return function pseudoArgs(elem) {\n                return func(elem, adapter, subselect) && next(elem);\n            };\n        } else {\n            throw new Error(\"unmatched pseudo-class :\" + name);\n        }\n    },\n    filters: filters,\n    pseudos: pseudos\n};\n"]},"metadata":{},"sourceType":"script"}