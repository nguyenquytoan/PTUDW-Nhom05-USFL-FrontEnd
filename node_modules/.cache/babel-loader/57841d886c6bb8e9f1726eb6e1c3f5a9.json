{"ast":null,"code":"var template = require('lodash.template');\n\nvar decls = require('./decls.json');\n/*\n  Rules legend:\n   - combined - if rule is combined it will be rendered with template\n   - combined and basic rules are present in basic reset\n   - combined, basic and inherited rules are present in full reset\n*/\n\n\nfunction _getRulesMap(inputDecls) {\n  return inputDecls.filter(function (decl) {\n    return !decl.combined;\n  }).reduce(function (map, decl) {\n    map[decl.prop.replace(/\\-/g, '')] = decl.initial;\n    return map;\n  }, {});\n}\n\nfunction _compileDecls(inputDecls) {\n  var templateVars = _getRulesMap(inputDecls);\n\n  return inputDecls.map(function (decl) {\n    if (decl.combined && decl.initial) {\n      var t = template(decl.initial.replace(/\\-/g, ''));\n      decl.initial = t(templateVars);\n    }\n\n    return decl;\n  });\n}\n\nfunction _getRequirements(inputDecls) {\n  return inputDecls.reduce(function (map, decl) {\n    if (!decl.contains) return map;\n    return decl.contains.reduce(function (mapInner, dependensy) {\n      mapInner[dependensy] = decl;\n      return mapInner;\n    }, map);\n  }, {});\n}\n\nfunction _expandContainments(inputDecls) {\n  var requiredMap = _getRequirements(inputDecls);\n\n  return inputDecls.filter(function (decl) {\n    return !decl.contains;\n  }).map(function (decl) {\n    var dependensy = requiredMap[decl.prop];\n\n    if (dependensy) {\n      decl.requiredBy = dependensy.prop;\n      decl.basic = decl.basic || dependensy.basic;\n      decl.inherited = decl.inherited || dependensy.inherited;\n    }\n\n    return decl;\n  });\n}\n\nvar compiledDecls = _expandContainments(_compileDecls(decls));\n\nfunction _clearDecls(rules, value) {\n  return rules.map(function (rule) {\n    return {\n      prop: rule.prop,\n      value: value.replace(/initial/g, rule.initial)\n    };\n  });\n}\n\nfunction _allDecls(onlyInherited) {\n  return compiledDecls.filter(function (decl) {\n    var allowed = decl.combined || decl.basic;\n    if (onlyInherited) return allowed && decl.inherited;\n    return allowed;\n  });\n}\n\nfunction _concreteDecl(declName) {\n  return compiledDecls.filter(function (decl) {\n    return declName === decl.prop || declName === decl.requiredBy;\n  });\n}\n\nfunction makeFallbackFunction(onlyInherited) {\n  return function (declName, declValue) {\n    var result;\n\n    if (declName === 'all') {\n      result = _allDecls(onlyInherited);\n    } else {\n      result = _concreteDecl(declName);\n    }\n\n    return _clearDecls(result, declValue);\n  };\n}\n\nmodule.exports = makeFallbackFunction;","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/postcss-initial/lib/rules-fabric.js"],"names":["template","require","decls","_getRulesMap","inputDecls","filter","decl","combined","reduce","map","prop","replace","initial","_compileDecls","templateVars","t","_getRequirements","contains","mapInner","dependensy","_expandContainments","requiredMap","requiredBy","basic","inherited","compiledDecls","_clearDecls","rules","value","rule","_allDecls","onlyInherited","allowed","_concreteDecl","declName","makeFallbackFunction","declValue","result","module","exports"],"mappings":"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","sourcesContent":["var template = require('lodash.template');\nvar decls =  require('./decls.json');\n\n/*\n  Rules legend:\n   - combined - if rule is combined it will be rendered with template\n   - combined and basic rules are present in basic reset\n   - combined, basic and inherited rules are present in full reset\n*/\n\nfunction _getRulesMap(inputDecls) {\n  return inputDecls\n    .filter(function (decl) {\n      return !decl.combined;\n    })\n    .reduce(function (map, decl) {\n      map[decl.prop.replace(/\\-/g, '')] = decl.initial;\n      return map;\n    }, {});\n}\n\nfunction _compileDecls(inputDecls) {\n  var templateVars = _getRulesMap(inputDecls);\n  return inputDecls.map(function (decl) {\n    if (decl.combined && decl.initial) {\n      var t = template(decl.initial.replace(/\\-/g, ''));\n      decl.initial = t(templateVars);\n    }\n    return decl;\n  });\n}\n\nfunction _getRequirements(inputDecls) {\n  return inputDecls.reduce(function (map, decl) {\n    if (!decl.contains) return map;\n    return decl.contains.reduce(function (mapInner, dependensy) {\n      mapInner[dependensy] = decl;\n      return mapInner;\n    }, map);\n  }, {});\n}\n\nfunction _expandContainments(inputDecls) {\n  var requiredMap = _getRequirements(inputDecls);\n  return inputDecls\n    .filter(function (decl) {\n      return !decl.contains;\n    }).map(function (decl) {\n      var dependensy = requiredMap[decl.prop];\n      if (dependensy) {\n        decl.requiredBy = dependensy.prop;\n        decl.basic = decl.basic || dependensy.basic;\n        decl.inherited = decl.inherited || dependensy.inherited;\n      }\n      return decl;\n    });\n}\n\nvar compiledDecls = _expandContainments(_compileDecls(decls));\n\nfunction _clearDecls(rules, value) {\n  return rules.map(function (rule) {\n    return {\n      prop:  rule.prop,\n      value: value.replace(/initial/g, rule.initial)\n    };\n  });\n}\n\nfunction _allDecls(onlyInherited) {\n  return compiledDecls.filter(function (decl) {\n    var allowed = decl.combined || decl.basic;\n    if (onlyInherited) return allowed && decl.inherited;\n    return allowed;\n  });\n}\n\nfunction _concreteDecl(declName) {\n  return compiledDecls.filter(function (decl) {\n    return declName === decl.prop || declName === decl.requiredBy;\n  });\n}\n\nfunction makeFallbackFunction(onlyInherited) {\n  return function (declName, declValue) {\n    var result;\n    if (declName === 'all') {\n      result = _allDecls(onlyInherited);\n    } else {\n      result = _concreteDecl(declName);\n    }\n    return _clearDecls(result, declValue);\n  };\n}\n\nmodule.exports = makeFallbackFunction;\n"]},"metadata":{},"sourceType":"script"}