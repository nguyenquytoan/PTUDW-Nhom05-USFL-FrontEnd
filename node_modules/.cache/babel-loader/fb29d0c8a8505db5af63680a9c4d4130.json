{"ast":null,"code":"\"use strict\";\n\nconst DOMException = require(\"domexception\");\n\nconst MessageEvent = require(\"./generated/MessageEvent\");\n\nconst {\n  isValidTargetOrigin\n} = require(\"../utils\");\n\nconst {\n  fireAnEvent\n} = require(\"./helpers/events\");\n\nmodule.exports = function (message, targetOrigin) {\n  if (arguments.length < 2) {\n    throw new TypeError(\"'postMessage' requires 2 arguments: 'message' and 'targetOrigin'\");\n  }\n\n  targetOrigin = String(targetOrigin);\n\n  if (!isValidTargetOrigin(targetOrigin)) {\n    throw new DOMException(\"Failed to execute 'postMessage' on 'Window': \" + \"Invalid target origin '\" + targetOrigin + \"' in a call to 'postMessage'.\", \"SyntaxError\");\n  } // TODO: targetOrigin === '/' - requires reference to source window\n  // See https://github.com/tmpvar/jsdom/pull/1140#issuecomment-111587499\n\n\n  if (targetOrigin !== \"*\" && targetOrigin !== this.location.origin) {\n    return;\n  } // TODO: event.source - requires reference to source window\n  // TODO: event.origin - requires reference to source window\n  // TODO: event.ports\n  // TODO: event.data - structured clone message - requires cloning DOM nodes\n\n\n  setTimeout(() => {\n    fireAnEvent(\"message\", this, MessageEvent, {\n      data: message\n    });\n  }, 0);\n};","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/jest-environment-jsdom-fourteen/node_modules/jsdom/lib/jsdom/living/post-message.js"],"names":["DOMException","require","MessageEvent","isValidTargetOrigin","fireAnEvent","module","exports","message","targetOrigin","arguments","length","TypeError","String","location","origin","setTimeout","data"],"mappings":"AAAA;;AACA,MAAMA,YAAY,GAAGC,OAAO,CAAC,cAAD,CAA5B;;AACA,MAAMC,YAAY,GAAGD,OAAO,CAAC,0BAAD,CAA5B;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAA0BF,OAAO,CAAC,UAAD,CAAvC;;AACA,MAAM;AAAEG,EAAAA;AAAF,IAAkBH,OAAO,CAAC,kBAAD,CAA/B;;AAEAI,MAAM,CAACC,OAAP,GAAiB,UAAUC,OAAV,EAAmBC,YAAnB,EAAiC;AAChD,MAAIC,SAAS,CAACC,MAAV,GAAmB,CAAvB,EAA0B;AACxB,UAAM,IAAIC,SAAJ,CAAc,kEAAd,CAAN;AACD;;AAEDH,EAAAA,YAAY,GAAGI,MAAM,CAACJ,YAAD,CAArB;;AAEA,MAAI,CAACL,mBAAmB,CAACK,YAAD,CAAxB,EAAwC;AACtC,UAAM,IAAIR,YAAJ,CAAiB,kDACrB,yBADqB,GACOQ,YADP,GACsB,+BADvC,EACwE,aADxE,CAAN;AAED,GAV+C,CAYhD;AACA;;;AACA,MAAIA,YAAY,KAAK,GAAjB,IAAwBA,YAAY,KAAK,KAAKK,QAAL,CAAcC,MAA3D,EAAmE;AACjE;AACD,GAhB+C,CAkBhD;AACA;AACA;AACA;;;AACAC,EAAAA,UAAU,CAAC,MAAM;AACfX,IAAAA,WAAW,CAAC,SAAD,EAAY,IAAZ,EAAkBF,YAAlB,EAAgC;AAAEc,MAAAA,IAAI,EAAET;AAAR,KAAhC,CAAX;AACD,GAFS,EAEP,CAFO,CAAV;AAGD,CAzBD","sourcesContent":["\"use strict\";\nconst DOMException = require(\"domexception\");\nconst MessageEvent = require(\"./generated/MessageEvent\");\nconst { isValidTargetOrigin } = require(\"../utils\");\nconst { fireAnEvent } = require(\"./helpers/events\");\n\nmodule.exports = function (message, targetOrigin) {\n  if (arguments.length < 2) {\n    throw new TypeError(\"'postMessage' requires 2 arguments: 'message' and 'targetOrigin'\");\n  }\n\n  targetOrigin = String(targetOrigin);\n\n  if (!isValidTargetOrigin(targetOrigin)) {\n    throw new DOMException(\"Failed to execute 'postMessage' on 'Window': \" +\n      \"Invalid target origin '\" + targetOrigin + \"' in a call to 'postMessage'.\", \"SyntaxError\");\n  }\n\n  // TODO: targetOrigin === '/' - requires reference to source window\n  // See https://github.com/tmpvar/jsdom/pull/1140#issuecomment-111587499\n  if (targetOrigin !== \"*\" && targetOrigin !== this.location.origin) {\n    return;\n  }\n\n  // TODO: event.source - requires reference to source window\n  // TODO: event.origin - requires reference to source window\n  // TODO: event.ports\n  // TODO: event.data - structured clone message - requires cloning DOM nodes\n  setTimeout(() => {\n    fireAnEvent(\"message\", this, MessageEvent, { data: message });\n  }, 0);\n};\n"]},"metadata":{},"sourceType":"script"}