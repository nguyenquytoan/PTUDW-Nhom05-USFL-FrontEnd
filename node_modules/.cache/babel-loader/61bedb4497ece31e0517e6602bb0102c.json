{"ast":null,"code":"var path = require('path');\n\nvar test = require('tape');\n\nvar resolve = require('../');\n\ntest('filter', function (t) {\n  var dir = path.join(__dirname, 'resolver');\n  var packageFilterArgs;\n  var res = resolve.sync('./baz', {\n    basedir: dir,\n    // NOTE: in v2.x, this will be `pkg, pkgfile, dir`, but must remain \"broken\" here in v1.x for compatibility\n    packageFilter: function (pkg,\n    /*pkgfile,*/\n    dir) {\n      // eslint-disable-line spaced-comment\n      pkg.main = 'doom'; // eslint-disable-line no-param-reassign\n\n      packageFilterArgs = 'is 1.x' ? [pkg, dir] : [pkg, pkgfile, dir]; // eslint-disable-line no-constant-condition, no-undef\n\n      return pkg;\n    }\n  });\n  t.equal(res, path.join(dir, 'baz/doom.js'), 'changing the package \"main\" works');\n  var packageData = packageFilterArgs[0];\n  t.equal(packageData.main, 'doom', 'package \"main\" was altered');\n\n  if (!'is 1.x') {\n    // eslint-disable-line no-constant-condition\n    var packageFile = packageFilterArgs[1];\n    t.equal(packageFile, path.join(dir, 'baz', 'package.json'), 'package.json path is correct');\n  }\n\n  var packageDir = packageFilterArgs['is 1.x' ? 1 : 2]; // eslint-disable-line no-constant-condition\n  // eslint-disable-next-line no-constant-condition\n\n  t.equal(packageDir, path.join(dir, 'baz'), ('is 1.x' ? 'second' : 'third') + ' packageFilter argument is \"dir\"');\n  t.end();\n});","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/resolve/test/filter_sync.js"],"names":["path","require","test","resolve","t","dir","join","__dirname","packageFilterArgs","res","sync","basedir","packageFilter","pkg","main","pkgfile","equal","packageData","packageFile","packageDir","end"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAAC,KAAD,CAArB;;AAEAC,IAAI,CAAC,QAAD,EAAW,UAAUE,CAAV,EAAa;AACxB,MAAIC,GAAG,GAAGL,IAAI,CAACM,IAAL,CAAUC,SAAV,EAAqB,UAArB,CAAV;AACA,MAAIC,iBAAJ;AACA,MAAIC,GAAG,GAAGN,OAAO,CAACO,IAAR,CAAa,OAAb,EAAsB;AAC5BC,IAAAA,OAAO,EAAEN,GADmB;AAE5B;AACAO,IAAAA,aAAa,EAAE,UAAUC,GAAV;AAAe;AAAaR,IAAAA,GAA5B,EAAiC;AAAE;AAC9CQ,MAAAA,GAAG,CAACC,IAAJ,GAAW,MAAX,CAD4C,CACzB;;AACnBN,MAAAA,iBAAiB,GAAG,WAAW,CAACK,GAAD,EAAMR,GAAN,CAAX,GAAwB,CAACQ,GAAD,EAAME,OAAN,EAAeV,GAAf,CAA5C,CAF4C,CAEqB;;AACjE,aAAOQ,GAAP;AACH;AAP2B,GAAtB,CAAV;AAUAT,EAAAA,CAAC,CAACY,KAAF,CAAQP,GAAR,EAAaT,IAAI,CAACM,IAAL,CAAUD,GAAV,EAAe,aAAf,CAAb,EAA4C,mCAA5C;AAEA,MAAIY,WAAW,GAAGT,iBAAiB,CAAC,CAAD,CAAnC;AACAJ,EAAAA,CAAC,CAACY,KAAF,CAAQC,WAAW,CAACH,IAApB,EAA0B,MAA1B,EAAkC,4BAAlC;;AAEA,MAAI,CAAC,QAAL,EAAe;AAAE;AACb,QAAII,WAAW,GAAGV,iBAAiB,CAAC,CAAD,CAAnC;AACAJ,IAAAA,CAAC,CAACY,KAAF,CAAQE,WAAR,EAAqBlB,IAAI,CAACM,IAAL,CAAUD,GAAV,EAAe,KAAf,EAAsB,cAAtB,CAArB,EAA4D,8BAA5D;AACH;;AAED,MAAIc,UAAU,GAAGX,iBAAiB,CAAC,WAAW,CAAX,GAAe,CAAhB,CAAlC,CAvBwB,CAuB8B;AACtD;;AACAJ,EAAAA,CAAC,CAACY,KAAF,CAAQG,UAAR,EAAoBnB,IAAI,CAACM,IAAL,CAAUD,GAAV,EAAe,KAAf,CAApB,EAA2C,CAAC,WAAW,QAAX,GAAsB,OAAvB,IAAkC,kCAA7E;AAEAD,EAAAA,CAAC,CAACgB,GAAF;AACH,CA5BG,CAAJ","sourcesContent":["var path = require('path');\nvar test = require('tape');\nvar resolve = require('../');\n\ntest('filter', function (t) {\n    var dir = path.join(__dirname, 'resolver');\n    var packageFilterArgs;\n    var res = resolve.sync('./baz', {\n        basedir: dir,\n        // NOTE: in v2.x, this will be `pkg, pkgfile, dir`, but must remain \"broken\" here in v1.x for compatibility\n        packageFilter: function (pkg, /*pkgfile,*/ dir) { // eslint-disable-line spaced-comment\n            pkg.main = 'doom'; // eslint-disable-line no-param-reassign\n            packageFilterArgs = 'is 1.x' ? [pkg, dir] : [pkg, pkgfile, dir]; // eslint-disable-line no-constant-condition, no-undef\n            return pkg;\n        }\n    });\n\n    t.equal(res, path.join(dir, 'baz/doom.js'), 'changing the package \"main\" works');\n\n    var packageData = packageFilterArgs[0];\n    t.equal(packageData.main, 'doom', 'package \"main\" was altered');\n\n    if (!'is 1.x') { // eslint-disable-line no-constant-condition\n        var packageFile = packageFilterArgs[1];\n        t.equal(packageFile, path.join(dir, 'baz', 'package.json'), 'package.json path is correct');\n    }\n\n    var packageDir = packageFilterArgs['is 1.x' ? 1 : 2]; // eslint-disable-line no-constant-condition\n    // eslint-disable-next-line no-constant-condition\n    t.equal(packageDir, path.join(dir, 'baz'), ('is 1.x' ? 'second' : 'third') + ' packageFilter argument is \"dir\"');\n\n    t.end();\n});\n"]},"metadata":{},"sourceType":"script"}