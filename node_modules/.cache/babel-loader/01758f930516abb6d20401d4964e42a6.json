{"ast":null,"code":"var test = require('tape');\n\nvar through = require('../'); // must emit end before close.\n\n\ntest('end before close', function (assert) {\n  var ts = through();\n  var ended = false,\n      closed = false;\n  ts.on('end', function () {\n    assert.ok(!closed);\n    ended = true;\n  });\n  ts.on('close', function () {\n    assert.ok(ended);\n    closed = true;\n  });\n  ts.write(1);\n  ts.write(2);\n  ts.write(3);\n  ts.end();\n  assert.ok(ended);\n  assert.ok(closed);\n  assert.end();\n});\ntest('end only once', function (t) {\n  var ts = through();\n  var ended = false,\n      closed = false;\n  ts.on('end', function () {\n    t.equal(ended, false);\n    ended = true;\n  });\n  ts.queue(null);\n  ts.queue(null);\n  ts.queue(null);\n  ts.resume();\n  t.end();\n});","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/through/test/end.js"],"names":["test","require","through","assert","ts","ended","closed","on","ok","write","end","t","equal","queue","resume"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,KAAD,CAArB,C,CAEA;;;AAEAD,IAAI,CAAC,kBAAD,EAAqB,UAAUG,MAAV,EAAkB;AACzC,MAAIC,EAAE,GAAGF,OAAO,EAAhB;AACA,MAAIG,KAAK,GAAG,KAAZ;AAAA,MAAmBC,MAAM,GAAG,KAA5B;AAEAF,EAAAA,EAAE,CAACG,EAAH,CAAM,KAAN,EAAa,YAAY;AACvBJ,IAAAA,MAAM,CAACK,EAAP,CAAU,CAACF,MAAX;AACAD,IAAAA,KAAK,GAAG,IAAR;AACD,GAHD;AAIAD,EAAAA,EAAE,CAACG,EAAH,CAAM,OAAN,EAAe,YAAY;AACzBJ,IAAAA,MAAM,CAACK,EAAP,CAAUH,KAAV;AACAC,IAAAA,MAAM,GAAG,IAAT;AACD,GAHD;AAKAF,EAAAA,EAAE,CAACK,KAAH,CAAS,CAAT;AACAL,EAAAA,EAAE,CAACK,KAAH,CAAS,CAAT;AACAL,EAAAA,EAAE,CAACK,KAAH,CAAS,CAAT;AACAL,EAAAA,EAAE,CAACM,GAAH;AACAP,EAAAA,MAAM,CAACK,EAAP,CAAUH,KAAV;AACAF,EAAAA,MAAM,CAACK,EAAP,CAAUF,MAAV;AACAH,EAAAA,MAAM,CAACO,GAAP;AACD,CApBG,CAAJ;AAsBAV,IAAI,CAAC,eAAD,EAAkB,UAAUW,CAAV,EAAa;AAEjC,MAAIP,EAAE,GAAGF,OAAO,EAAhB;AACA,MAAIG,KAAK,GAAG,KAAZ;AAAA,MAAmBC,MAAM,GAAG,KAA5B;AAEAF,EAAAA,EAAE,CAACG,EAAH,CAAM,KAAN,EAAa,YAAY;AACvBI,IAAAA,CAAC,CAACC,KAAF,CAAQP,KAAR,EAAe,KAAf;AACAA,IAAAA,KAAK,GAAG,IAAR;AACD,GAHD;AAKAD,EAAAA,EAAE,CAACS,KAAH,CAAS,IAAT;AACAT,EAAAA,EAAE,CAACS,KAAH,CAAS,IAAT;AACAT,EAAAA,EAAE,CAACS,KAAH,CAAS,IAAT;AAEAT,EAAAA,EAAE,CAACU,MAAH;AAEAH,EAAAA,CAAC,CAACD,GAAF;AACD,CAjBG,CAAJ","sourcesContent":["var test = require('tape')\nvar through = require('../')\n\n// must emit end before close.\n\ntest('end before close', function (assert) {\n  var ts = through()\n  var ended = false, closed = false\n\n  ts.on('end', function () {\n    assert.ok(!closed)\n    ended = true\n  })\n  ts.on('close', function () {\n    assert.ok(ended)\n    closed = true\n  })\n\n  ts.write(1)\n  ts.write(2)\n  ts.write(3)\n  ts.end()\n  assert.ok(ended)\n  assert.ok(closed)\n  assert.end()\n})\n\ntest('end only once', function (t) {\n\n  var ts = through()\n  var ended = false, closed = false\n\n  ts.on('end', function () {\n    t.equal(ended, false)\n    ended = true\n  })\n\n  ts.queue(null)\n  ts.queue(null)\n  ts.queue(null)\n\n  ts.resume()\n\n  t.end()\n})\n"]},"metadata":{},"sourceType":"script"}