{"ast":null,"code":"var path = require('path');\n\nvar test = require('tape');\n\nvar resolve = require('../');\n\ntest('async foo', function (t) {\n  t.plan(12);\n  var dir = path.join(__dirname, 'resolver');\n  resolve('./foo', {\n    basedir: dir\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'foo.js'));\n    t.equal(pkg && pkg.name, 'resolve');\n  });\n  resolve('./foo.js', {\n    basedir: dir\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'foo.js'));\n    t.equal(pkg && pkg.name, 'resolve');\n  });\n  resolve('./foo', {\n    basedir: dir,\n    'package': {\n      main: 'resolver'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'foo.js'));\n    t.equal(pkg && pkg.main, 'resolver');\n  });\n  resolve('./foo.js', {\n    basedir: dir,\n    'package': {\n      main: 'resolver'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'foo.js'));\n    t.equal(pkg.main, 'resolver');\n  });\n  resolve('./foo', {\n    basedir: dir,\n    filename: path.join(dir, 'baz.js')\n  }, function (err, res) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'foo.js'));\n  });\n  resolve('foo', {\n    basedir: dir\n  }, function (err) {\n    t.equal(err.message, \"Cannot find module 'foo' from '\" + path.resolve(dir) + \"'\");\n    t.equal(err.code, 'MODULE_NOT_FOUND');\n  }); // Test that filename is reported as the \"from\" value when passed.\n\n  resolve('foo', {\n    basedir: dir,\n    filename: path.join(dir, 'baz.js')\n  }, function (err) {\n    t.equal(err.message, \"Cannot find module 'foo' from '\" + path.join(dir, 'baz.js') + \"'\");\n  });\n});\ntest('bar', function (t) {\n  t.plan(6);\n  var dir = path.join(__dirname, 'resolver');\n  resolve('foo', {\n    basedir: dir + '/bar'\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'bar/node_modules/foo/index.js'));\n    t.equal(pkg, undefined);\n  });\n  resolve('foo', {\n    basedir: dir + '/bar'\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'bar/node_modules/foo/index.js'));\n    t.equal(pkg, undefined);\n  });\n  resolve('foo', {\n    basedir: dir + '/bar',\n    'package': {\n      main: 'bar'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'bar/node_modules/foo/index.js'));\n    t.equal(pkg.main, 'bar');\n  });\n});\ntest('baz', function (t) {\n  t.plan(4);\n  var dir = path.join(__dirname, 'resolver');\n  resolve('./baz', {\n    basedir: dir\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'baz/quux.js'));\n    t.equal(pkg.main, 'quux.js');\n  });\n  resolve('./baz', {\n    basedir: dir,\n    'package': {\n      main: 'resolver'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'baz/quux.js'));\n    t.equal(pkg.main, 'quux.js');\n  });\n});\ntest('biz', function (t) {\n  t.plan(24);\n  var dir = path.join(__dirname, 'resolver/biz/node_modules');\n  resolve('./grux', {\n    basedir: dir\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'grux/index.js'));\n    t.equal(pkg, undefined);\n  });\n  resolve('./grux', {\n    basedir: dir,\n    'package': {\n      main: 'biz'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'grux/index.js'));\n    t.equal(pkg.main, 'biz');\n  });\n  resolve('./garply', {\n    basedir: dir\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'garply/lib/index.js'));\n    t.equal(pkg.main, './lib');\n  });\n  resolve('./garply', {\n    basedir: dir,\n    'package': {\n      main: 'biz'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'garply/lib/index.js'));\n    t.equal(pkg.main, './lib');\n  });\n  resolve('tiv', {\n    basedir: dir + '/grux'\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'tiv/index.js'));\n    t.equal(pkg, undefined);\n  });\n  resolve('tiv', {\n    basedir: dir + '/grux',\n    'package': {\n      main: 'grux'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'tiv/index.js'));\n    t.equal(pkg.main, 'grux');\n  });\n  resolve('tiv', {\n    basedir: dir + '/garply'\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'tiv/index.js'));\n    t.equal(pkg, undefined);\n  });\n  resolve('tiv', {\n    basedir: dir + '/garply',\n    'package': {\n      main: './lib'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'tiv/index.js'));\n    t.equal(pkg.main, './lib');\n  });\n  resolve('grux', {\n    basedir: dir + '/tiv'\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'grux/index.js'));\n    t.equal(pkg, undefined);\n  });\n  resolve('grux', {\n    basedir: dir + '/tiv',\n    'package': {\n      main: 'tiv'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'grux/index.js'));\n    t.equal(pkg.main, 'tiv');\n  });\n  resolve('garply', {\n    basedir: dir + '/tiv'\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'garply/lib/index.js'));\n    t.equal(pkg.main, './lib');\n  });\n  resolve('garply', {\n    basedir: dir + '/tiv',\n    'package': {\n      main: 'tiv'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'garply/lib/index.js'));\n    t.equal(pkg.main, './lib');\n  });\n});\ntest('quux', function (t) {\n  t.plan(2);\n  var dir = path.join(__dirname, 'resolver/quux');\n  resolve('./foo', {\n    basedir: dir,\n    'package': {\n      main: 'quux'\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'foo/index.js'));\n    t.equal(pkg.main, 'quux');\n  });\n});\ntest('normalize', function (t) {\n  t.plan(2);\n  var dir = path.join(__dirname, 'resolver/biz/node_modules/grux');\n  resolve('../grux', {\n    basedir: dir\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'index.js'));\n    t.equal(pkg, undefined);\n  });\n});\ntest('cup', function (t) {\n  t.plan(5);\n  var dir = path.join(__dirname, 'resolver');\n  resolve('./cup', {\n    basedir: dir,\n    extensions: ['.js', '.coffee']\n  }, function (err, res) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'cup.coffee'));\n  });\n  resolve('./cup.coffee', {\n    basedir: dir\n  }, function (err, res) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'cup.coffee'));\n  });\n  resolve('./cup', {\n    basedir: dir,\n    extensions: ['.js']\n  }, function (err, res) {\n    t.equal(err.message, \"Cannot find module './cup' from '\" + path.resolve(dir) + \"'\");\n    t.equal(err.code, 'MODULE_NOT_FOUND');\n  }); // Test that filename is reported as the \"from\" value when passed.\n\n  resolve('./cup', {\n    basedir: dir,\n    extensions: ['.js'],\n    filename: path.join(dir, 'cupboard.js')\n  }, function (err, res) {\n    t.equal(err.message, \"Cannot find module './cup' from '\" + path.join(dir, 'cupboard.js') + \"'\");\n  });\n});\ntest('mug', function (t) {\n  t.plan(3);\n  var dir = path.join(__dirname, 'resolver');\n  resolve('./mug', {\n    basedir: dir\n  }, function (err, res) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'mug.js'));\n  });\n  resolve('./mug', {\n    basedir: dir,\n    extensions: ['.coffee', '.js']\n  }, function (err, res) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, '/mug.coffee'));\n  });\n  resolve('./mug', {\n    basedir: dir,\n    extensions: ['.js', '.coffee']\n  }, function (err, res) {\n    t.equal(res, path.join(dir, '/mug.js'));\n  });\n});\ntest('other path', function (t) {\n  t.plan(6);\n  var resolverDir = path.join(__dirname, 'resolver');\n  var dir = path.join(resolverDir, 'bar');\n  var otherDir = path.join(resolverDir, 'other_path');\n  resolve('root', {\n    basedir: dir,\n    paths: [otherDir]\n  }, function (err, res) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(resolverDir, 'other_path/root.js'));\n  });\n  resolve('lib/other-lib', {\n    basedir: dir,\n    paths: [otherDir]\n  }, function (err, res) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(resolverDir, 'other_path/lib/other-lib.js'));\n  });\n  resolve('root', {\n    basedir: dir\n  }, function (err, res) {\n    t.equal(err.message, \"Cannot find module 'root' from '\" + path.resolve(dir) + \"'\");\n    t.equal(err.code, 'MODULE_NOT_FOUND');\n  });\n  resolve('zzz', {\n    basedir: dir,\n    paths: [otherDir]\n  }, function (err, res) {\n    t.equal(err.message, \"Cannot find module 'zzz' from '\" + path.resolve(dir) + \"'\");\n    t.equal(err.code, 'MODULE_NOT_FOUND');\n  });\n});\ntest('path iterator', function (t) {\n  t.plan(2);\n  var resolverDir = path.join(__dirname, 'resolver');\n\n  var exactIterator = function (x, start, getPackageCandidates, opts) {\n    return [path.join(resolverDir, x)];\n  };\n\n  resolve('baz', {\n    packageIterator: exactIterator\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(resolverDir, 'baz/quux.js'));\n    t.equal(pkg && pkg.name, 'baz');\n  });\n});\ntest('incorrect main', function (t) {\n  t.plan(1);\n  var resolverDir = path.join(__dirname, 'resolver');\n  var dir = path.join(resolverDir, 'incorrect_main');\n  resolve('./incorrect_main', {\n    basedir: resolverDir\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'index.js'));\n  });\n});\ntest('without basedir', function (t) {\n  t.plan(1);\n  var dir = path.join(__dirname, 'resolver/without_basedir');\n\n  var tester = require(path.join(dir, 'main.js'));\n\n  tester(t, function (err, res, pkg) {\n    if (err) {\n      t.fail(err);\n    } else {\n      t.equal(res, path.join(dir, 'node_modules/mymodule.js'));\n    }\n  });\n});\ntest('#52 - incorrectly resolves module-paths like \"./someFolder/\" when there is a file of the same name', function (t) {\n  t.plan(2);\n  var dir = path.join(__dirname, 'resolver');\n  resolve('./foo', {\n    basedir: path.join(dir, 'same_names')\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'same_names/foo.js'));\n  });\n  resolve('./foo/', {\n    basedir: path.join(dir, 'same_names')\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'same_names/foo/index.js'));\n  });\n});\ntest('async: #121 - treating an existing file as a dir when no basedir', function (t) {\n  var testFile = path.basename(__filename);\n  t.test('sanity check', function (st) {\n    st.plan(1);\n    resolve('./' + testFile, function (err, res, pkg) {\n      if (err) t.fail(err);\n      st.equal(res, __filename, 'sanity check');\n    });\n  });\n  t.test('with a fake directory', function (st) {\n    st.plan(4);\n    resolve('./' + testFile + '/blah', function (err, res, pkg) {\n      st.ok(err, 'there is an error');\n      st.notOk(res, 'no result');\n      st.equal(err && err.code, 'MODULE_NOT_FOUND', 'error code matches require.resolve');\n      st.equal(err && err.message, 'Cannot find module \\'./' + testFile + '/blah\\' from \\'' + __dirname + '\\'', 'can not find nonexistent module');\n      st.end();\n    });\n  });\n  t.end();\n});\ntest('async dot main', function (t) {\n  var start = new Date();\n  t.plan(3);\n  resolve('./resolver/dot_main', function (err, ret) {\n    t.notOk(err);\n    t.equal(ret, path.join(__dirname, 'resolver/dot_main/index.js'));\n    t.ok(new Date() - start < 50, 'resolve.sync timedout');\n    t.end();\n  });\n});\ntest('async dot slash main', function (t) {\n  var start = new Date();\n  t.plan(3);\n  resolve('./resolver/dot_slash_main', function (err, ret) {\n    t.notOk(err);\n    t.equal(ret, path.join(__dirname, 'resolver/dot_slash_main/index.js'));\n    t.ok(new Date() - start < 50, 'resolve.sync timedout');\n    t.end();\n  });\n});\ntest('not a directory', function (t) {\n  t.plan(6);\n  var path = './foo';\n  resolve(path, {\n    basedir: __filename\n  }, function (err, res, pkg) {\n    t.ok(err, 'a non-directory errors');\n    t.equal(arguments.length, 1);\n    t.equal(res, undefined);\n    t.equal(pkg, undefined);\n    t.equal(err && err.message, 'Cannot find module \\'' + path + '\\' from \\'' + __filename + '\\'');\n    t.equal(err && err.code, 'MODULE_NOT_FOUND');\n  });\n});\ntest('non-string \"main\" field in package.json', function (t) {\n  t.plan(5);\n  var dir = path.join(__dirname, 'resolver');\n  resolve('./invalid_main', {\n    basedir: dir\n  }, function (err, res, pkg) {\n    t.ok(err, 'errors on non-string main');\n    t.equal(err.message, 'package “invalid main” `main` must be a string');\n    t.equal(err.code, 'INVALID_PACKAGE_MAIN');\n    t.equal(res, undefined, 'res is undefined');\n    t.equal(pkg, undefined, 'pkg is undefined');\n  });\n});\ntest('non-string \"main\" field in package.json', function (t) {\n  t.plan(5);\n  var dir = path.join(__dirname, 'resolver');\n  resolve('./invalid_main', {\n    basedir: dir\n  }, function (err, res, pkg) {\n    t.ok(err, 'errors on non-string main');\n    t.equal(err.message, 'package “invalid main” `main` must be a string');\n    t.equal(err.code, 'INVALID_PACKAGE_MAIN');\n    t.equal(res, undefined, 'res is undefined');\n    t.equal(pkg, undefined, 'pkg is undefined');\n  });\n});\ntest('browser field in package.json', function (t) {\n  t.plan(3);\n  var dir = path.join(__dirname, 'resolver');\n  resolve('./browser_field', {\n    basedir: dir,\n    packageFilter: function packageFilter(pkg) {\n      if (pkg.browser) {\n        pkg.main = pkg.browser; // eslint-disable-line no-param-reassign\n\n        delete pkg.browser; // eslint-disable-line no-param-reassign\n      }\n\n      return pkg;\n    }\n  }, function (err, res, pkg) {\n    if (err) t.fail(err);\n    t.equal(res, path.join(dir, 'browser_field', 'b.js'));\n    t.equal(pkg && pkg.main, 'b');\n    t.equal(pkg && pkg.browser, undefined);\n  });\n});","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/resolve/test/resolver.js"],"names":["path","require","test","resolve","t","plan","dir","join","__dirname","basedir","err","res","pkg","fail","equal","name","main","filename","message","code","undefined","extensions","resolverDir","otherDir","paths","exactIterator","x","start","getPackageCandidates","opts","packageIterator","tester","testFile","basename","__filename","st","ok","notOk","end","Date","ret","arguments","length","packageFilter","browser"],"mappings":"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","sourcesContent":["var path = require('path');\nvar test = require('tape');\nvar resolve = require('../');\n\ntest('async foo', function (t) {\n    t.plan(12);\n    var dir = path.join(__dirname, 'resolver');\n\n    resolve('./foo', { basedir: dir }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'foo.js'));\n        t.equal(pkg && pkg.name, 'resolve');\n    });\n\n    resolve('./foo.js', { basedir: dir }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'foo.js'));\n        t.equal(pkg && pkg.name, 'resolve');\n    });\n\n    resolve('./foo', { basedir: dir, 'package': { main: 'resolver' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'foo.js'));\n        t.equal(pkg && pkg.main, 'resolver');\n    });\n\n    resolve('./foo.js', { basedir: dir, 'package': { main: 'resolver' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'foo.js'));\n        t.equal(pkg.main, 'resolver');\n    });\n\n    resolve('./foo', { basedir: dir, filename: path.join(dir, 'baz.js') }, function (err, res) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'foo.js'));\n    });\n\n    resolve('foo', { basedir: dir }, function (err) {\n        t.equal(err.message, \"Cannot find module 'foo' from '\" + path.resolve(dir) + \"'\");\n        t.equal(err.code, 'MODULE_NOT_FOUND');\n    });\n\n    // Test that filename is reported as the \"from\" value when passed.\n    resolve('foo', { basedir: dir, filename: path.join(dir, 'baz.js') }, function (err) {\n        t.equal(err.message, \"Cannot find module 'foo' from '\" + path.join(dir, 'baz.js') + \"'\");\n    });\n});\n\ntest('bar', function (t) {\n    t.plan(6);\n    var dir = path.join(__dirname, 'resolver');\n\n    resolve('foo', { basedir: dir + '/bar' }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'bar/node_modules/foo/index.js'));\n        t.equal(pkg, undefined);\n    });\n\n    resolve('foo', { basedir: dir + '/bar' }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'bar/node_modules/foo/index.js'));\n        t.equal(pkg, undefined);\n    });\n\n    resolve('foo', { basedir: dir + '/bar', 'package': { main: 'bar' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'bar/node_modules/foo/index.js'));\n        t.equal(pkg.main, 'bar');\n    });\n});\n\ntest('baz', function (t) {\n    t.plan(4);\n    var dir = path.join(__dirname, 'resolver');\n\n    resolve('./baz', { basedir: dir }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'baz/quux.js'));\n        t.equal(pkg.main, 'quux.js');\n    });\n\n    resolve('./baz', { basedir: dir, 'package': { main: 'resolver' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'baz/quux.js'));\n        t.equal(pkg.main, 'quux.js');\n    });\n});\n\ntest('biz', function (t) {\n    t.plan(24);\n    var dir = path.join(__dirname, 'resolver/biz/node_modules');\n\n    resolve('./grux', { basedir: dir }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'grux/index.js'));\n        t.equal(pkg, undefined);\n    });\n\n    resolve('./grux', { basedir: dir, 'package': { main: 'biz' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'grux/index.js'));\n        t.equal(pkg.main, 'biz');\n    });\n\n    resolve('./garply', { basedir: dir }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'garply/lib/index.js'));\n        t.equal(pkg.main, './lib');\n    });\n\n    resolve('./garply', { basedir: dir, 'package': { main: 'biz' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'garply/lib/index.js'));\n        t.equal(pkg.main, './lib');\n    });\n\n    resolve('tiv', { basedir: dir + '/grux' }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'tiv/index.js'));\n        t.equal(pkg, undefined);\n    });\n\n    resolve('tiv', { basedir: dir + '/grux', 'package': { main: 'grux' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'tiv/index.js'));\n        t.equal(pkg.main, 'grux');\n    });\n\n    resolve('tiv', { basedir: dir + '/garply' }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'tiv/index.js'));\n        t.equal(pkg, undefined);\n    });\n\n    resolve('tiv', { basedir: dir + '/garply', 'package': { main: './lib' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'tiv/index.js'));\n        t.equal(pkg.main, './lib');\n    });\n\n    resolve('grux', { basedir: dir + '/tiv' }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'grux/index.js'));\n        t.equal(pkg, undefined);\n    });\n\n    resolve('grux', { basedir: dir + '/tiv', 'package': { main: 'tiv' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'grux/index.js'));\n        t.equal(pkg.main, 'tiv');\n    });\n\n    resolve('garply', { basedir: dir + '/tiv' }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'garply/lib/index.js'));\n        t.equal(pkg.main, './lib');\n    });\n\n    resolve('garply', { basedir: dir + '/tiv', 'package': { main: 'tiv' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'garply/lib/index.js'));\n        t.equal(pkg.main, './lib');\n    });\n});\n\ntest('quux', function (t) {\n    t.plan(2);\n    var dir = path.join(__dirname, 'resolver/quux');\n\n    resolve('./foo', { basedir: dir, 'package': { main: 'quux' } }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'foo/index.js'));\n        t.equal(pkg.main, 'quux');\n    });\n});\n\ntest('normalize', function (t) {\n    t.plan(2);\n    var dir = path.join(__dirname, 'resolver/biz/node_modules/grux');\n\n    resolve('../grux', { basedir: dir }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'index.js'));\n        t.equal(pkg, undefined);\n    });\n});\n\ntest('cup', function (t) {\n    t.plan(5);\n    var dir = path.join(__dirname, 'resolver');\n\n    resolve('./cup', { basedir: dir, extensions: ['.js', '.coffee'] }, function (err, res) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'cup.coffee'));\n    });\n\n    resolve('./cup.coffee', { basedir: dir }, function (err, res) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'cup.coffee'));\n    });\n\n    resolve('./cup', { basedir: dir, extensions: ['.js'] }, function (err, res) {\n        t.equal(err.message, \"Cannot find module './cup' from '\" + path.resolve(dir) + \"'\");\n        t.equal(err.code, 'MODULE_NOT_FOUND');\n    });\n\n    // Test that filename is reported as the \"from\" value when passed.\n    resolve('./cup', { basedir: dir, extensions: ['.js'], filename: path.join(dir, 'cupboard.js') }, function (err, res) {\n        t.equal(err.message, \"Cannot find module './cup' from '\" + path.join(dir, 'cupboard.js') + \"'\");\n    });\n});\n\ntest('mug', function (t) {\n    t.plan(3);\n    var dir = path.join(__dirname, 'resolver');\n\n    resolve('./mug', { basedir: dir }, function (err, res) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'mug.js'));\n    });\n\n    resolve('./mug', { basedir: dir, extensions: ['.coffee', '.js'] }, function (err, res) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, '/mug.coffee'));\n    });\n\n    resolve('./mug', { basedir: dir, extensions: ['.js', '.coffee'] }, function (err, res) {\n        t.equal(res, path.join(dir, '/mug.js'));\n    });\n});\n\ntest('other path', function (t) {\n    t.plan(6);\n    var resolverDir = path.join(__dirname, 'resolver');\n    var dir = path.join(resolverDir, 'bar');\n    var otherDir = path.join(resolverDir, 'other_path');\n\n    resolve('root', { basedir: dir, paths: [otherDir] }, function (err, res) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(resolverDir, 'other_path/root.js'));\n    });\n\n    resolve('lib/other-lib', { basedir: dir, paths: [otherDir] }, function (err, res) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(resolverDir, 'other_path/lib/other-lib.js'));\n    });\n\n    resolve('root', { basedir: dir }, function (err, res) {\n        t.equal(err.message, \"Cannot find module 'root' from '\" + path.resolve(dir) + \"'\");\n        t.equal(err.code, 'MODULE_NOT_FOUND');\n    });\n\n    resolve('zzz', { basedir: dir, paths: [otherDir] }, function (err, res) {\n        t.equal(err.message, \"Cannot find module 'zzz' from '\" + path.resolve(dir) + \"'\");\n        t.equal(err.code, 'MODULE_NOT_FOUND');\n    });\n});\n\ntest('path iterator', function (t) {\n    t.plan(2);\n\n    var resolverDir = path.join(__dirname, 'resolver');\n\n    var exactIterator = function (x, start, getPackageCandidates, opts) {\n        return [path.join(resolverDir, x)];\n    };\n\n    resolve('baz', { packageIterator: exactIterator }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(resolverDir, 'baz/quux.js'));\n        t.equal(pkg && pkg.name, 'baz');\n    });\n});\n\ntest('incorrect main', function (t) {\n    t.plan(1);\n\n    var resolverDir = path.join(__dirname, 'resolver');\n    var dir = path.join(resolverDir, 'incorrect_main');\n\n    resolve('./incorrect_main', { basedir: resolverDir }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'index.js'));\n    });\n});\n\ntest('without basedir', function (t) {\n    t.plan(1);\n\n    var dir = path.join(__dirname, 'resolver/without_basedir');\n    var tester = require(path.join(dir, 'main.js'));\n\n    tester(t, function (err, res, pkg) {\n        if (err) {\n            t.fail(err);\n        } else {\n            t.equal(res, path.join(dir, 'node_modules/mymodule.js'));\n        }\n    });\n});\n\ntest('#52 - incorrectly resolves module-paths like \"./someFolder/\" when there is a file of the same name', function (t) {\n    t.plan(2);\n\n    var dir = path.join(__dirname, 'resolver');\n\n    resolve('./foo', { basedir: path.join(dir, 'same_names') }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'same_names/foo.js'));\n    });\n\n    resolve('./foo/', { basedir: path.join(dir, 'same_names') }, function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, path.join(dir, 'same_names/foo/index.js'));\n    });\n});\n\ntest('async: #121 - treating an existing file as a dir when no basedir', function (t) {\n    var testFile = path.basename(__filename);\n\n    t.test('sanity check', function (st) {\n        st.plan(1);\n        resolve('./' + testFile, function (err, res, pkg) {\n            if (err) t.fail(err);\n            st.equal(res, __filename, 'sanity check');\n        });\n    });\n\n    t.test('with a fake directory', function (st) {\n        st.plan(4);\n\n        resolve('./' + testFile + '/blah', function (err, res, pkg) {\n            st.ok(err, 'there is an error');\n            st.notOk(res, 'no result');\n\n            st.equal(err && err.code, 'MODULE_NOT_FOUND', 'error code matches require.resolve');\n            st.equal(\n                err && err.message,\n                'Cannot find module \\'./' + testFile + '/blah\\' from \\'' + __dirname + '\\'',\n                'can not find nonexistent module'\n            );\n            st.end();\n        });\n    });\n\n    t.end();\n});\n\ntest('async dot main', function (t) {\n    var start = new Date();\n    t.plan(3);\n    resolve('./resolver/dot_main', function (err, ret) {\n        t.notOk(err);\n        t.equal(ret, path.join(__dirname, 'resolver/dot_main/index.js'));\n        t.ok(new Date() - start < 50, 'resolve.sync timedout');\n        t.end();\n    });\n});\n\ntest('async dot slash main', function (t) {\n    var start = new Date();\n    t.plan(3);\n    resolve('./resolver/dot_slash_main', function (err, ret) {\n        t.notOk(err);\n        t.equal(ret, path.join(__dirname, 'resolver/dot_slash_main/index.js'));\n        t.ok(new Date() - start < 50, 'resolve.sync timedout');\n        t.end();\n    });\n});\n\ntest('not a directory', function (t) {\n    t.plan(6);\n    var path = './foo';\n    resolve(path, { basedir: __filename }, function (err, res, pkg) {\n        t.ok(err, 'a non-directory errors');\n        t.equal(arguments.length, 1);\n        t.equal(res, undefined);\n        t.equal(pkg, undefined);\n\n        t.equal(err && err.message, 'Cannot find module \\'' + path + '\\' from \\'' + __filename + '\\'');\n        t.equal(err && err.code, 'MODULE_NOT_FOUND');\n    });\n});\n\ntest('non-string \"main\" field in package.json', function (t) {\n    t.plan(5);\n\n    var dir = path.join(__dirname, 'resolver');\n    resolve('./invalid_main', { basedir: dir }, function (err, res, pkg) {\n        t.ok(err, 'errors on non-string main');\n        t.equal(err.message, 'package “invalid main” `main` must be a string');\n        t.equal(err.code, 'INVALID_PACKAGE_MAIN');\n        t.equal(res, undefined, 'res is undefined');\n        t.equal(pkg, undefined, 'pkg is undefined');\n    });\n});\n\ntest('non-string \"main\" field in package.json', function (t) {\n    t.plan(5);\n\n    var dir = path.join(__dirname, 'resolver');\n    resolve('./invalid_main', { basedir: dir }, function (err, res, pkg) {\n        t.ok(err, 'errors on non-string main');\n        t.equal(err.message, 'package “invalid main” `main` must be a string');\n        t.equal(err.code, 'INVALID_PACKAGE_MAIN');\n        t.equal(res, undefined, 'res is undefined');\n        t.equal(pkg, undefined, 'pkg is undefined');\n    });\n});\n\ntest('browser field in package.json', function (t) {\n    t.plan(3);\n\n    var dir = path.join(__dirname, 'resolver');\n    resolve(\n        './browser_field',\n        {\n            basedir: dir,\n            packageFilter: function packageFilter(pkg) {\n                if (pkg.browser) {\n                    pkg.main = pkg.browser; // eslint-disable-line no-param-reassign\n                    delete pkg.browser; // eslint-disable-line no-param-reassign\n                }\n                return pkg;\n            }\n        },\n        function (err, res, pkg) {\n            if (err) t.fail(err);\n            t.equal(res, path.join(dir, 'browser_field', 'b.js'));\n            t.equal(pkg && pkg.main, 'b');\n            t.equal(pkg && pkg.browser, undefined);\n        }\n    );\n});\n"]},"metadata":{},"sourceType":"script"}