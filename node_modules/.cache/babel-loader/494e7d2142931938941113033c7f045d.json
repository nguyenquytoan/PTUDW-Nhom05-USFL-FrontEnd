{"ast":null,"code":"/**\n * @fileoverview Rule to flag unsafe statements in finally block\n * @author Onur Temizkan\n */\n\"use strict\"; //------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n\nconst SENTINEL_NODE_TYPE_RETURN_THROW = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression)$/u;\nconst SENTINEL_NODE_TYPE_BREAK = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression|DoWhileStatement|WhileStatement|ForOfStatement|ForInStatement|ForStatement|SwitchStatement)$/u;\nconst SENTINEL_NODE_TYPE_CONTINUE = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression|DoWhileStatement|WhileStatement|ForOfStatement|ForInStatement|ForStatement)$/u; //------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\n\nmodule.exports = {\n  meta: {\n    type: \"problem\",\n    docs: {\n      description: \"disallow control flow statements in `finally` blocks\",\n      category: \"Possible Errors\",\n      recommended: true,\n      url: \"https://eslint.org/docs/rules/no-unsafe-finally\"\n    },\n    schema: []\n  },\n\n  create(context) {\n    /**\n     * Checks if the node is the finalizer of a TryStatement\n     * @param {ASTNode} node node to check.\n     * @returns {boolean} - true if the node is the finalizer of a TryStatement\n     */\n    function isFinallyBlock(node) {\n      return node.parent.type === \"TryStatement\" && node.parent.finalizer === node;\n    }\n    /**\n     * Climbs up the tree if the node is not a sentinel node\n     * @param {ASTNode} node node to check.\n     * @param {string} label label of the break or continue statement\n     * @returns {boolean} - return whether the node is a finally block or a sentinel node\n     */\n\n\n    function isInFinallyBlock(node, label) {\n      let labelInside = false;\n      let sentinelNodeType;\n\n      if (node.type === \"BreakStatement\" && !node.label) {\n        sentinelNodeType = SENTINEL_NODE_TYPE_BREAK;\n      } else if (node.type === \"ContinueStatement\") {\n        sentinelNodeType = SENTINEL_NODE_TYPE_CONTINUE;\n      } else {\n        sentinelNodeType = SENTINEL_NODE_TYPE_RETURN_THROW;\n      }\n\n      for (let currentNode = node; currentNode && !sentinelNodeType.test(currentNode.type); currentNode = currentNode.parent) {\n        if (currentNode.parent.label && label && currentNode.parent.label.name === label.name) {\n          labelInside = true;\n        }\n\n        if (isFinallyBlock(currentNode)) {\n          if (label && labelInside) {\n            return false;\n          }\n\n          return true;\n        }\n      }\n\n      return false;\n    }\n    /**\n     * Checks whether the possibly-unsafe statement is inside a finally block.\n     * @param {ASTNode} node node to check.\n     * @returns {void}\n     */\n\n\n    function check(node) {\n      if (isInFinallyBlock(node, node.label)) {\n        context.report({\n          message: \"Unsafe usage of {{nodeType}}.\",\n          data: {\n            nodeType: node.type\n          },\n          node,\n          line: node.loc.line,\n          column: node.loc.column\n        });\n      }\n    }\n\n    return {\n      ReturnStatement: check,\n      ThrowStatement: check,\n      BreakStatement: check,\n      ContinueStatement: check\n    };\n  }\n\n};","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/eslint/lib/rules/no-unsafe-finally.js"],"names":["SENTINEL_NODE_TYPE_RETURN_THROW","SENTINEL_NODE_TYPE_BREAK","SENTINEL_NODE_TYPE_CONTINUE","module","exports","meta","type","docs","description","category","recommended","url","schema","create","context","isFinallyBlock","node","parent","finalizer","isInFinallyBlock","label","labelInside","sentinelNodeType","currentNode","test","name","check","report","message","data","nodeType","line","loc","column","ReturnStatement","ThrowStatement","BreakStatement","ContinueStatement"],"mappings":"AAAA;;;;AAKA,a,CAEA;AACA;AACA;;AAEA,MAAMA,+BAA+B,GAAG,qFAAxC;AACA,MAAMC,wBAAwB,GAAG,gLAAjC;AACA,MAAMC,2BAA2B,GAAG,gKAApC,C,CAGA;AACA;AACA;;AAEAC,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,IAAI,EAAE;AACFC,IAAAA,IAAI,EAAE,SADJ;AAGFC,IAAAA,IAAI,EAAE;AACFC,MAAAA,WAAW,EAAE,sDADX;AAEFC,MAAAA,QAAQ,EAAE,iBAFR;AAGFC,MAAAA,WAAW,EAAE,IAHX;AAIFC,MAAAA,GAAG,EAAE;AAJH,KAHJ;AAUFC,IAAAA,MAAM,EAAE;AAVN,GADO;;AAabC,EAAAA,MAAM,CAACC,OAAD,EAAU;AAEZ;;;;;AAKA,aAASC,cAAT,CAAwBC,IAAxB,EAA8B;AAC1B,aAAOA,IAAI,CAACC,MAAL,CAAYX,IAAZ,KAAqB,cAArB,IAAuCU,IAAI,CAACC,MAAL,CAAYC,SAAZ,KAA0BF,IAAxE;AACH;AAED;;;;;;;;AAMA,aAASG,gBAAT,CAA0BH,IAA1B,EAAgCI,KAAhC,EAAuC;AACnC,UAAIC,WAAW,GAAG,KAAlB;AACA,UAAIC,gBAAJ;;AAEA,UAAIN,IAAI,CAACV,IAAL,KAAc,gBAAd,IAAkC,CAACU,IAAI,CAACI,KAA5C,EAAmD;AAC/CE,QAAAA,gBAAgB,GAAGrB,wBAAnB;AACH,OAFD,MAEO,IAAIe,IAAI,CAACV,IAAL,KAAc,mBAAlB,EAAuC;AAC1CgB,QAAAA,gBAAgB,GAAGpB,2BAAnB;AACH,OAFM,MAEA;AACHoB,QAAAA,gBAAgB,GAAGtB,+BAAnB;AACH;;AAED,WACI,IAAIuB,WAAW,GAAGP,IADtB,EAEIO,WAAW,IAAI,CAACD,gBAAgB,CAACE,IAAjB,CAAsBD,WAAW,CAACjB,IAAlC,CAFpB,EAGIiB,WAAW,GAAGA,WAAW,CAACN,MAH9B,EAIE;AACE,YAAIM,WAAW,CAACN,MAAZ,CAAmBG,KAAnB,IAA4BA,KAA5B,IAAsCG,WAAW,CAACN,MAAZ,CAAmBG,KAAnB,CAAyBK,IAAzB,KAAkCL,KAAK,CAACK,IAAlF,EAAyF;AACrFJ,UAAAA,WAAW,GAAG,IAAd;AACH;;AACD,YAAIN,cAAc,CAACQ,WAAD,CAAlB,EAAiC;AAC7B,cAAIH,KAAK,IAAIC,WAAb,EAA0B;AACtB,mBAAO,KAAP;AACH;;AACD,iBAAO,IAAP;AACH;AACJ;;AACD,aAAO,KAAP;AACH;AAED;;;;;;;AAKA,aAASK,KAAT,CAAeV,IAAf,EAAqB;AACjB,UAAIG,gBAAgB,CAACH,IAAD,EAAOA,IAAI,CAACI,KAAZ,CAApB,EAAwC;AACpCN,QAAAA,OAAO,CAACa,MAAR,CAAe;AACXC,UAAAA,OAAO,EAAE,+BADE;AAEXC,UAAAA,IAAI,EAAE;AACFC,YAAAA,QAAQ,EAAEd,IAAI,CAACV;AADb,WAFK;AAKXU,UAAAA,IALW;AAMXe,UAAAA,IAAI,EAAEf,IAAI,CAACgB,GAAL,CAASD,IANJ;AAOXE,UAAAA,MAAM,EAAEjB,IAAI,CAACgB,GAAL,CAASC;AAPN,SAAf;AASH;AACJ;;AAED,WAAO;AACHC,MAAAA,eAAe,EAAER,KADd;AAEHS,MAAAA,cAAc,EAAET,KAFb;AAGHU,MAAAA,cAAc,EAAEV,KAHb;AAIHW,MAAAA,iBAAiB,EAAEX;AAJhB,KAAP;AAMH;;AArFY,CAAjB","sourcesContent":["/**\n * @fileoverview Rule to flag unsafe statements in finally block\n * @author Onur Temizkan\n */\n\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n\nconst SENTINEL_NODE_TYPE_RETURN_THROW = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression)$/u;\nconst SENTINEL_NODE_TYPE_BREAK = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression|DoWhileStatement|WhileStatement|ForOfStatement|ForInStatement|ForStatement|SwitchStatement)$/u;\nconst SENTINEL_NODE_TYPE_CONTINUE = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression|DoWhileStatement|WhileStatement|ForOfStatement|ForInStatement|ForStatement)$/u;\n\n\n//------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\n\nmodule.exports = {\n    meta: {\n        type: \"problem\",\n\n        docs: {\n            description: \"disallow control flow statements in `finally` blocks\",\n            category: \"Possible Errors\",\n            recommended: true,\n            url: \"https://eslint.org/docs/rules/no-unsafe-finally\"\n        },\n\n        schema: []\n    },\n    create(context) {\n\n        /**\n         * Checks if the node is the finalizer of a TryStatement\n         * @param {ASTNode} node node to check.\n         * @returns {boolean} - true if the node is the finalizer of a TryStatement\n         */\n        function isFinallyBlock(node) {\n            return node.parent.type === \"TryStatement\" && node.parent.finalizer === node;\n        }\n\n        /**\n         * Climbs up the tree if the node is not a sentinel node\n         * @param {ASTNode} node node to check.\n         * @param {string} label label of the break or continue statement\n         * @returns {boolean} - return whether the node is a finally block or a sentinel node\n         */\n        function isInFinallyBlock(node, label) {\n            let labelInside = false;\n            let sentinelNodeType;\n\n            if (node.type === \"BreakStatement\" && !node.label) {\n                sentinelNodeType = SENTINEL_NODE_TYPE_BREAK;\n            } else if (node.type === \"ContinueStatement\") {\n                sentinelNodeType = SENTINEL_NODE_TYPE_CONTINUE;\n            } else {\n                sentinelNodeType = SENTINEL_NODE_TYPE_RETURN_THROW;\n            }\n\n            for (\n                let currentNode = node;\n                currentNode && !sentinelNodeType.test(currentNode.type);\n                currentNode = currentNode.parent\n            ) {\n                if (currentNode.parent.label && label && (currentNode.parent.label.name === label.name)) {\n                    labelInside = true;\n                }\n                if (isFinallyBlock(currentNode)) {\n                    if (label && labelInside) {\n                        return false;\n                    }\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        /**\n         * Checks whether the possibly-unsafe statement is inside a finally block.\n         * @param {ASTNode} node node to check.\n         * @returns {void}\n         */\n        function check(node) {\n            if (isInFinallyBlock(node, node.label)) {\n                context.report({\n                    message: \"Unsafe usage of {{nodeType}}.\",\n                    data: {\n                        nodeType: node.type\n                    },\n                    node,\n                    line: node.loc.line,\n                    column: node.loc.column\n                });\n            }\n        }\n\n        return {\n            ReturnStatement: check,\n            ThrowStatement: check,\n            BreakStatement: check,\n            ContinueStatement: check\n        };\n    }\n};\n"]},"metadata":{},"sourceType":"script"}