{"ast":null,"code":"var koa = require('koa');\n\nvar sockjs = require('sockjs');\n\nvar http = require('http');\n\nvar fs = require('fs');\n\nvar path = require('path'); // 1. Echo sockjs server\n\n\nvar sockjs_opts = {\n  sockjs_url: \"http://cdn.jsdelivr.net/sockjs/1.0.1/sockjs.min.js\"\n};\nvar sockjs_echo = sockjs.createServer(sockjs_opts);\nsockjs_echo.on('connection', function (conn) {\n  conn.on('data', function (message) {\n    conn.write(message);\n  });\n}); // 2. koa server\n\nvar app = koa();\napp.use(function* () {\n  var filePath = __dirname + '/index.html';\n  this.type = path.extname(filePath);\n  this.body = fs.createReadStream(filePath);\n});\nvar server = http.createServer(app.callback());\nsockjs_echo.installHandlers(server, {\n  prefix: '/echo'\n});\nserver.listen(9999, '0.0.0.0');\nconsole.log(' [*] Listening on 0.0.0.0:9999');","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/sockjs/examples/koa/server.js"],"names":["koa","require","sockjs","http","fs","path","sockjs_opts","sockjs_url","sockjs_echo","createServer","on","conn","message","write","app","use","filePath","__dirname","type","extname","body","createReadStream","server","callback","installHandlers","prefix","listen","console","log"],"mappings":"AAAA,IAAIA,GAAG,GAAOC,OAAO,CAAC,KAAD,CAArB;;AACA,IAAIC,MAAM,GAAID,OAAO,CAAC,QAAD,CAArB;;AACA,IAAIE,IAAI,GAAMF,OAAO,CAAC,MAAD,CAArB;;AACA,IAAIG,EAAE,GAAQH,OAAO,CAAC,IAAD,CAArB;;AACA,IAAII,IAAI,GAAMJ,OAAO,CAAC,MAAD,CAArB,C,CAEA;;;AACA,IAAIK,WAAW,GAAG;AAACC,EAAAA,UAAU,EAAE;AAAb,CAAlB;AACA,IAAIC,WAAW,GAAGN,MAAM,CAACO,YAAP,CAAoBH,WAApB,CAAlB;AACAE,WAAW,CAACE,EAAZ,CAAe,YAAf,EAA6B,UAASC,IAAT,EAAe;AACxCA,EAAAA,IAAI,CAACD,EAAL,CAAQ,MAAR,EAAgB,UAASE,OAAT,EAAkB;AAC9BD,IAAAA,IAAI,CAACE,KAAL,CAAWD,OAAX;AACH,GAFD;AAGH,CAJD,E,CAMA;;AACA,IAAIE,GAAG,GAAGd,GAAG,EAAb;AAEAc,GAAG,CAACC,GAAJ,CAAQ,aAAa;AACjB,MAAIC,QAAQ,GAAGC,SAAS,GAAG,aAA3B;AACA,OAAKC,IAAL,GAAYb,IAAI,CAACc,OAAL,CAAaH,QAAb,CAAZ;AACA,OAAKI,IAAL,GAAYhB,EAAE,CAACiB,gBAAH,CAAoBL,QAApB,CAAZ;AACH,CAJD;AAMA,IAAIM,MAAM,GAAGnB,IAAI,CAACM,YAAL,CAAkBK,GAAG,CAACS,QAAJ,EAAlB,CAAb;AACAf,WAAW,CAACgB,eAAZ,CAA4BF,MAA5B,EAAoC;AAACG,EAAAA,MAAM,EAAC;AAAR,CAApC;AAEAH,MAAM,CAACI,MAAP,CAAc,IAAd,EAAoB,SAApB;AACAC,OAAO,CAACC,GAAR,CAAY,gCAAZ","sourcesContent":["var koa     = require('koa');\nvar sockjs  = require('sockjs');\nvar http    = require('http');\nvar fs      = require('fs');\nvar path    = require('path');\n\n// 1. Echo sockjs server\nvar sockjs_opts = {sockjs_url: \"http://cdn.jsdelivr.net/sockjs/1.0.1/sockjs.min.js\"};\nvar sockjs_echo = sockjs.createServer(sockjs_opts);\nsockjs_echo.on('connection', function(conn) {\n    conn.on('data', function(message) {\n        conn.write(message);\n    });\n});\n\n// 2. koa server\nvar app = koa();\n\napp.use(function *() {\n    var filePath = __dirname + '/index.html';\n    this.type = path.extname(filePath);\n    this.body = fs.createReadStream(filePath);\n});\n\nvar server = http.createServer(app.callback());\nsockjs_echo.installHandlers(server, {prefix:'/echo'});\n\nserver.listen(9999, '0.0.0.0');\nconsole.log(' [*] Listening on 0.0.0.0:9999' );\n"]},"metadata":{},"sourceType":"script"}