{"ast":null,"code":"'use strict';\n\nvar os = require('os');\n\nvar fs = require('fs');\n\nvar child = require('child_process');\n\nvar DEFAULT_RESOLV_FILE = '/etc/resolv.conf';\n\nfunction getInterfaceName() {\n  var val = 'eth';\n  var platform = os.platform();\n\n  if (platform === 'darwin') {\n    val = 'en';\n  } else if (platform === 'win32') {\n    val = null;\n  }\n\n  return val;\n}\n\nfunction getIfconfigCMD() {\n  if (os.platform() === 'win32') {\n    return 'ipconfig/all';\n  }\n\n  return '/sbin/ifconfig';\n}\n/**\n * Get all addresses.\n *\n * @param {String} [interfaceName] interface name, default is 'eth' on linux, 'en' on mac os.\n * @param {Function(err, addr)} callback\n *  - {Object} addr {\n *    - {String} ip\n *    - {String} ipv6\n *    - {String} mac\n *  }\n */\n\n\nfunction address(interfaceName, callback) {\n  if (typeof interfaceName === 'function') {\n    callback = interfaceName;\n    interfaceName = null;\n  }\n\n  var addr = {\n    ip: address.ip(interfaceName),\n    ipv6: address.ipv6(interfaceName),\n    mac: null\n  };\n  address.mac(interfaceName, function (err, mac) {\n    if (mac) {\n      addr.mac = mac;\n    }\n\n    callback(err, addr);\n  });\n}\n\naddress.interface = function (family, name) {\n  var interfaces = os.networkInterfaces();\n  var noName = !name;\n  name = name || getInterfaceName();\n  family = family || 'IPv4';\n\n  for (var i = -1; i < 8; i++) {\n    var interfaceName = name + (i >= 0 ? i : ''); // support 'lo' and 'lo0'\n\n    var items = interfaces[interfaceName];\n\n    if (items) {\n      for (var j = 0; j < items.length; j++) {\n        var item = items[j];\n\n        if (item.family === family) {\n          return item;\n        }\n      }\n    }\n  }\n\n  if (noName) {\n    // filter 127.0.0.1, get the first ip\n    for (var k in interfaces) {\n      var items = interfaces[k];\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n\n        if (item.family === family && item.address !== '127.0.0.1') {\n          return item;\n        }\n      }\n    }\n  }\n\n  return;\n};\n/**\n * Get current machine IPv4\n *\n * @param {String} [interfaceName] interface name, default is 'eth' on linux, 'en' on mac os.\n * @return {String} IP address\n */\n\n\naddress.ip = function (interfaceName) {\n  var item = address.interface('IPv4', interfaceName);\n  return item && item.address;\n};\n/**\n * Get current machine IPv6\n *\n * @param {String} [interfaceName] interface name, default is 'eth' on linux, 'en' on mac os.\n * @return {String} IP address\n */\n\n\naddress.ipv6 = function (interfaceName) {\n  var item = address.interface('IPv6', interfaceName);\n  return item && item.address;\n}; // osx start line 'en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500'\n// linux start line 'eth0      Link encap:Ethernet  HWaddr 00:16:3E:00:0A:29  '\n\n\nvar MAC_OSX_START_LINE = /^(\\w+)\\:\\s+flags=/;\nvar MAC_LINUX_START_LINE = /^(\\w+)\\s{2,}link encap:\\w+/i; // ether 78:ca:39:b0:e6:7d\n// HWaddr 00:16:3E:00:0A:29\n\nvar MAC_RE = address.MAC_RE = /(?:ether|HWaddr)\\s+((?:[a-z0-9]{2}\\:){5}[a-z0-9]{2})/i; // osx: inet 192.168.2.104 netmask 0xffffff00 broadcast 192.168.2.255\n// linux: inet addr:10.125.5.202  Bcast:10.125.15.255  Mask:255.255.240.0\n\nvar MAC_IP_RE = address.MAC_IP_RE = /inet\\s(?:addr\\:)?(\\d+\\.\\d+\\.\\d+\\.\\d+)/;\n\nfunction getMAC(content, interfaceName, matchIP) {\n  var lines = content.split('\\n');\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i].trimRight();\n    var m = MAC_OSX_START_LINE.exec(line) || MAC_LINUX_START_LINE.exec(line);\n\n    if (!m) {\n      continue;\n    } // check interface name\n\n\n    var name = m[1];\n\n    if (name.indexOf(interfaceName) !== 0) {\n      continue;\n    }\n\n    var ip = null;\n    var mac = null;\n    var match = MAC_RE.exec(line);\n\n    if (match) {\n      mac = match[1];\n    }\n\n    i++;\n\n    while (true) {\n      line = lines[i];\n\n      if (!line || MAC_OSX_START_LINE.exec(line) || MAC_LINUX_START_LINE.exec(line)) {\n        i--;\n        break; // hit next interface, handle next interface\n      }\n\n      if (!mac) {\n        match = MAC_RE.exec(line);\n\n        if (match) {\n          mac = match[1];\n        }\n      }\n\n      if (!ip) {\n        match = MAC_IP_RE.exec(line);\n\n        if (match) {\n          ip = match[1];\n        }\n      }\n\n      i++;\n    }\n\n    if (ip === matchIP) {\n      return mac;\n    }\n  }\n}\n/**\n * Get current machine MAC address\n *\n * @param {String} [interfaceName] interface name, default is 'eth' on linux, 'en' on mac os.\n * @param {Function(err, address)} callback\n */\n\n\naddress.mac = function (interfaceName, callback) {\n  if (typeof interfaceName === 'function') {\n    callback = interfaceName;\n    interfaceName = null;\n  }\n\n  interfaceName = interfaceName || getInterfaceName();\n  var item = address.interface('IPv4', interfaceName);\n\n  if (!item) {\n    return callback();\n  } // https://github.com/nodejs/node/issues/13581\n  // bug in node 7.x and <= 8.4.0\n\n\n  if (!process.env.CI && (item.mac === 'ff:00:00:00:00:00' || item.mac === '00:00:00:00:00:00')) {\n    // wrong address, ignore it\n    item.mac = '';\n  }\n\n  if (item.mac) {\n    return callback(null, item.mac);\n  }\n\n  child.exec(getIfconfigCMD(), {\n    timeout: 5000\n  }, function (err, stdout, stderr) {\n    if (err || !stdout) {\n      return callback(err);\n    }\n\n    var mac = getMAC(stdout || '', interfaceName, item.address);\n    callback(null, mac);\n  });\n}; // nameserver 172.24.102.254\n\n\nvar DNS_SERVER_RE = /^nameserver\\s+(\\d+\\.\\d+\\.\\d+\\.\\d+)$/i;\n/**\n * Get DNS servers.\n *\n * @param {String} [filepath] resolv config file path. default is '/etc/resolv.conf'.\n * @param {Function(err, servers)} callback\n */\n\naddress.dns = function (filepath, callback) {\n  if (typeof filepath === 'function') {\n    callback = filepath;\n    filepath = null;\n  }\n\n  filepath = filepath || DEFAULT_RESOLV_FILE;\n  fs.readFile(filepath, 'utf8', function (err, content) {\n    if (err) {\n      return callback(err);\n    }\n\n    var servers = [];\n    content = content || '';\n    var lines = content.split('\\n');\n\n    for (var i = 0; i < lines.length; i++) {\n      var line = lines[i].trim();\n      var m = DNS_SERVER_RE.exec(line);\n\n      if (m) {\n        servers.push(m[1]);\n      }\n    }\n\n    callback(null, servers);\n  });\n};\n\nmodule.exports = address;","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/address/lib/address.js"],"names":["os","require","fs","child","DEFAULT_RESOLV_FILE","getInterfaceName","val","platform","getIfconfigCMD","address","interfaceName","callback","addr","ip","ipv6","mac","err","interface","family","name","interfaces","networkInterfaces","noName","i","items","j","length","item","k","MAC_OSX_START_LINE","MAC_LINUX_START_LINE","MAC_RE","MAC_IP_RE","getMAC","content","matchIP","lines","split","line","trimRight","m","exec","indexOf","match","process","env","CI","timeout","stdout","stderr","DNS_SERVER_RE","dns","filepath","readFile","servers","trim","push","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar os = require('os');\nvar fs = require('fs');\nvar child = require('child_process');\n\nvar DEFAULT_RESOLV_FILE = '/etc/resolv.conf';\n\nfunction getInterfaceName() {\n  var val = 'eth';\n  var platform = os.platform();\n  if (platform === 'darwin') {\n    val = 'en';\n  } else if (platform === 'win32') {\n    val = null;\n  }\n  return val;\n}\n\nfunction getIfconfigCMD() {\n  if (os.platform() === 'win32') {\n    return 'ipconfig/all';\n  }\n  return '/sbin/ifconfig';\n}\n\n/**\n * Get all addresses.\n *\n * @param {String} [interfaceName] interface name, default is 'eth' on linux, 'en' on mac os.\n * @param {Function(err, addr)} callback\n *  - {Object} addr {\n *    - {String} ip\n *    - {String} ipv6\n *    - {String} mac\n *  }\n */\nfunction address(interfaceName, callback) {\n  if (typeof interfaceName === 'function') {\n    callback = interfaceName;\n    interfaceName = null;\n  }\n\n  var addr = {\n    ip: address.ip(interfaceName),\n    ipv6: address.ipv6(interfaceName),\n    mac: null\n  };\n  address.mac(interfaceName, function (err, mac) {\n    if (mac) {\n      addr.mac = mac;\n    }\n    callback(err, addr);\n  });\n}\n\naddress.interface = function (family, name) {\n  var interfaces = os.networkInterfaces();\n  var noName = !name;\n  name = name || getInterfaceName();\n  family = family || 'IPv4';\n  for (var i = -1; i < 8; i++) {\n    var interfaceName = name + (i >= 0 ? i : ''); // support 'lo' and 'lo0'\n    var items = interfaces[interfaceName];\n    if (items) {\n      for (var j = 0; j < items.length; j++) {\n        var item = items[j];\n        if (item.family === family) {\n          return item;\n        }\n      }\n    }\n  }\n\n  if (noName) {\n    // filter 127.0.0.1, get the first ip\n    for (var k in interfaces) {\n      var items = interfaces[k];\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        if (item.family === family && item.address !== '127.0.0.1') {\n          return item;\n        }\n      }\n    }\n  }\n  return;\n};\n\n/**\n * Get current machine IPv4\n *\n * @param {String} [interfaceName] interface name, default is 'eth' on linux, 'en' on mac os.\n * @return {String} IP address\n */\naddress.ip = function (interfaceName) {\n  var item = address.interface('IPv4', interfaceName);\n  return item && item.address;\n};\n\n/**\n * Get current machine IPv6\n *\n * @param {String} [interfaceName] interface name, default is 'eth' on linux, 'en' on mac os.\n * @return {String} IP address\n */\naddress.ipv6 = function (interfaceName) {\n  var item = address.interface('IPv6', interfaceName);\n  return item && item.address;\n};\n\n// osx start line 'en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500'\n// linux start line 'eth0      Link encap:Ethernet  HWaddr 00:16:3E:00:0A:29  '\nvar MAC_OSX_START_LINE = /^(\\w+)\\:\\s+flags=/;\nvar MAC_LINUX_START_LINE = /^(\\w+)\\s{2,}link encap:\\w+/i;\n\n// ether 78:ca:39:b0:e6:7d\n// HWaddr 00:16:3E:00:0A:29\nvar MAC_RE = address.MAC_RE = /(?:ether|HWaddr)\\s+((?:[a-z0-9]{2}\\:){5}[a-z0-9]{2})/i;\n\n// osx: inet 192.168.2.104 netmask 0xffffff00 broadcast 192.168.2.255\n// linux: inet addr:10.125.5.202  Bcast:10.125.15.255  Mask:255.255.240.0\nvar MAC_IP_RE = address.MAC_IP_RE = /inet\\s(?:addr\\:)?(\\d+\\.\\d+\\.\\d+\\.\\d+)/;\n\nfunction getMAC(content, interfaceName, matchIP) {\n  var lines = content.split('\\n');\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i].trimRight();\n    var m = MAC_OSX_START_LINE.exec(line) || MAC_LINUX_START_LINE.exec(line);\n    if (!m) {\n      continue;\n    }\n\n    // check interface name\n    var name = m[1];\n    if (name.indexOf(interfaceName) !== 0) {\n      continue;\n    }\n\n    var ip = null;\n    var mac = null;\n    var match = MAC_RE.exec(line);\n    if (match) {\n      mac = match[1];\n    }\n\n    i++;\n    while (true) {\n      line = lines[i];\n      if (!line || MAC_OSX_START_LINE.exec(line) || MAC_LINUX_START_LINE.exec(line)) {\n        i--;\n        break; // hit next interface, handle next interface\n      }\n      if (!mac) {\n        match = MAC_RE.exec(line);\n        if (match) {\n          mac = match[1];\n        }\n      }\n\n      if (!ip) {\n        match = MAC_IP_RE.exec(line);\n        if (match) {\n          ip = match[1];\n        }\n      }\n\n      i++;\n    }\n\n    if (ip === matchIP) {\n      return mac;\n    }\n  }\n}\n\n/**\n * Get current machine MAC address\n *\n * @param {String} [interfaceName] interface name, default is 'eth' on linux, 'en' on mac os.\n * @param {Function(err, address)} callback\n */\naddress.mac = function (interfaceName, callback) {\n  if (typeof interfaceName === 'function') {\n    callback = interfaceName;\n    interfaceName = null;\n  }\n  interfaceName = interfaceName || getInterfaceName();\n  var item = address.interface('IPv4', interfaceName);\n  if (!item) {\n    return callback();\n  }\n\n  // https://github.com/nodejs/node/issues/13581\n  // bug in node 7.x and <= 8.4.0\n  if (!process.env.CI && (item.mac === 'ff:00:00:00:00:00' || item.mac === '00:00:00:00:00:00')) {\n    // wrong address, ignore it\n    item.mac = '';\n  }\n\n  if (item.mac) {\n    return callback(null, item.mac);\n  }\n\n  child.exec(getIfconfigCMD(), {timeout: 5000}, function (err, stdout, stderr) {\n    if (err || !stdout) {\n      return callback(err);\n    }\n\n    var mac = getMAC(stdout || '', interfaceName, item.address);\n    callback(null, mac);\n  });\n};\n\n// nameserver 172.24.102.254\nvar DNS_SERVER_RE = /^nameserver\\s+(\\d+\\.\\d+\\.\\d+\\.\\d+)$/i;\n\n/**\n * Get DNS servers.\n *\n * @param {String} [filepath] resolv config file path. default is '/etc/resolv.conf'.\n * @param {Function(err, servers)} callback\n */\naddress.dns = function (filepath, callback) {\n  if (typeof filepath === 'function') {\n    callback = filepath;\n    filepath = null;\n  }\n  filepath = filepath || DEFAULT_RESOLV_FILE;\n  fs.readFile(filepath, 'utf8', function (err, content) {\n    if (err) {\n      return callback(err);\n    }\n    var servers = [];\n    content = content || '';\n    var lines = content.split('\\n');\n    for (var i = 0; i < lines.length; i++) {\n      var line = lines[i].trim();\n      var m = DNS_SERVER_RE.exec(line);\n      if (m) {\n        servers.push(m[1]);\n      }\n    }\n\n    callback(null, servers);\n  });\n};\n\nmodule.exports = address;\n"]},"metadata":{},"sourceType":"script"}