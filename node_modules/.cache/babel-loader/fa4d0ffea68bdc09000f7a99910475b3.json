{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Observable_1 = require(\"../Observable\");\n\nvar async_1 = require(\"../scheduler/async\");\n\nvar isNumeric_1 = require(\"../util/isNumeric\");\n\nvar isScheduler_1 = require(\"../util/isScheduler\");\n\nfunction timer(dueTime, periodOrScheduler, scheduler) {\n  if (dueTime === void 0) {\n    dueTime = 0;\n  }\n\n  var period = -1;\n\n  if (isNumeric_1.isNumeric(periodOrScheduler)) {\n    period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n  } else if (isScheduler_1.isScheduler(periodOrScheduler)) {\n    scheduler = periodOrScheduler;\n  }\n\n  if (!isScheduler_1.isScheduler(scheduler)) {\n    scheduler = async_1.async;\n  }\n\n  return new Observable_1.Observable(function (subscriber) {\n    var due = isNumeric_1.isNumeric(dueTime) ? dueTime : +dueTime - scheduler.now();\n    return scheduler.schedule(dispatch, due, {\n      index: 0,\n      period: period,\n      subscriber: subscriber\n    });\n  });\n}\n\nexports.timer = timer;\n\nfunction dispatch(state) {\n  var index = state.index,\n      period = state.period,\n      subscriber = state.subscriber;\n  subscriber.next(index);\n\n  if (subscriber.closed) {\n    return;\n  } else if (period === -1) {\n    return subscriber.complete();\n  }\n\n  state.index = index + 1;\n  this.schedule(state, period);\n}","map":{"version":3,"sources":["../../src/internal/observable/timer.ts"],"names":[],"mappings":";;;;;;AAAA,IAAA,YAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAEA,IAAA,OAAA,GAAA,OAAA,CAAA,oBAAA,CAAA;;AACA,IAAA,WAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;;AACA,IAAA,aAAA,GAAA,OAAA,CAAA,qBAAA,CAAA;;AAqDA,SAAgB,KAAhB,CAAsB,OAAtB,EACsB,iBADtB,EAEsB,SAFtB,EAE+C;AAFzB,MAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,OAAA,GAAA,CAAA;AAA0B;;AAG9C,MAAI,MAAM,GAAG,CAAC,CAAd;;AACA,MAAI,WAAA,CAAA,SAAA,CAAU,iBAAV,CAAJ,EAAkC;AAChC,IAAA,MAAM,GAAG,MAAM,CAAC,iBAAD,CAAN,GAA4B,CAA5B,IAAiC,CAAjC,IAAsC,MAAM,CAAC,iBAAD,CAArD;AACD,GAFD,MAEO,IAAI,aAAA,CAAA,WAAA,CAAY,iBAAZ,CAAJ,EAAoC;AACzC,IAAA,SAAS,GAAG,iBAAZ;AACD;;AAED,MAAI,CAAC,aAAA,CAAA,WAAA,CAAY,SAAZ,CAAL,EAA6B;AAC3B,IAAA,SAAS,GAAG,OAAA,CAAA,KAAZ;AACD;;AAED,SAAO,IAAI,YAAA,CAAA,UAAJ,CAAe,UAAA,UAAA,EAAU;AAC9B,QAAM,GAAG,GAAG,WAAA,CAAA,SAAA,CAAU,OAAV,IACP,OADO,GAEP,CAAC,OAAD,GAAW,SAAS,CAAC,GAAV,EAFhB;AAIA,WAAO,SAAS,CAAC,QAAV,CAAmB,QAAnB,EAA6B,GAA7B,EAAkC;AACvC,MAAA,KAAK,EAAE,CADgC;AAC7B,MAAA,MAAM,EAAA,MADuB;AACrB,MAAA,UAAU,EAAA;AADW,KAAlC,CAAP;AAGD,GARM,CAAP;AASD;;AAvBD,OAAA,CAAA,KAAA,GAAA,KAAA;;AA+BA,SAAS,QAAT,CAAqD,KAArD,EAAsE;AAC5D,MAAA,KAAA,GAAA,KAAA,CAAA,KAAA;AAAA,MAAO,MAAA,GAAA,KAAA,CAAA,MAAP;AAAA,MAAe,UAAA,GAAA,KAAA,CAAA,UAAf;AACR,EAAA,UAAU,CAAC,IAAX,CAAgB,KAAhB;;AAEA,MAAI,UAAU,CAAC,MAAf,EAAuB;AACrB;AACD,GAFD,MAEO,IAAI,MAAM,KAAK,CAAC,CAAhB,EAAmB;AACxB,WAAO,UAAU,CAAC,QAAX,EAAP;AACD;;AAED,EAAA,KAAK,CAAC,KAAN,GAAc,KAAK,GAAG,CAAtB;AACA,OAAK,QAAL,CAAc,KAAd,EAAqB,MAArB;AACD","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar async_1 = require(\"../scheduler/async\");\nvar isNumeric_1 = require(\"../util/isNumeric\");\nvar isScheduler_1 = require(\"../util/isScheduler\");\nfunction timer(dueTime, periodOrScheduler, scheduler) {\n    if (dueTime === void 0) { dueTime = 0; }\n    var period = -1;\n    if (isNumeric_1.isNumeric(periodOrScheduler)) {\n        period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n    }\n    else if (isScheduler_1.isScheduler(periodOrScheduler)) {\n        scheduler = periodOrScheduler;\n    }\n    if (!isScheduler_1.isScheduler(scheduler)) {\n        scheduler = async_1.async;\n    }\n    return new Observable_1.Observable(function (subscriber) {\n        var due = isNumeric_1.isNumeric(dueTime)\n            ? dueTime\n            : (+dueTime - scheduler.now());\n        return scheduler.schedule(dispatch, due, {\n            index: 0, period: period, subscriber: subscriber\n        });\n    });\n}\nexports.timer = timer;\nfunction dispatch(state) {\n    var index = state.index, period = state.period, subscriber = state.subscriber;\n    subscriber.next(index);\n    if (subscriber.closed) {\n        return;\n    }\n    else if (period === -1) {\n        return subscriber.complete();\n    }\n    state.index = index + 1;\n    this.schedule(state, period);\n}\n//# sourceMappingURL=timer.js.map"]},"metadata":{},"sourceType":"script"}