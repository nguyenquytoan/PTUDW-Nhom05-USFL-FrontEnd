{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nrequire(\"./toBeInRangeMatcher\");\n\nvar _index = _interopRequireDefault(require(\"./index\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          Promise.resolve(value).then(_next, _throw);\n        }\n      }\n\n      function _next(value) {\n        step(\"next\", value);\n      }\n\n      function _throw(err) {\n        step(\"throw\", err);\n      }\n\n      _next();\n    });\n  };\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar originalDefaults = _objectSpread({}, _index.default.defaults);\n\nbeforeEach(function () {\n  Object.assign(_index.default.defaults, originalDefaults);\n});\ntest(\"it waits for expectation to pass\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  var numberToChange, randomTimeout;\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          numberToChange = 10; // we are using random timeout here to simulate a real-time example\n          // of an async operation calling a callback at a non-deterministic time\n\n          randomTimeout = Math.floor(Math.random() * 300);\n          setTimeout(function () {\n            numberToChange = 100;\n          }, randomTimeout);\n          _context.next = 5;\n          return (0, _index.default)(function () {\n            expect(numberToChange).toEqual(100);\n          });\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee, this);\n})));\ntest(\"it fails properly with jest error message when it times out without expectation passing\", /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(done) {\n    var numberNotToChange;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            numberNotToChange = 200;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return (0, _index.default)(function () {\n              expect(numberNotToChange).toEqual(2000);\n            }, 300);\n\n          case 4:\n            _context2.next = 10;\n            break;\n\n          case 6:\n            _context2.prev = 6;\n            _context2.t0 = _context2[\"catch\"](1);\n            expect(_context2.t0.message).toMatchSnapshot();\n            done();\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this, [[1, 6]]);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}(), 1000);\ntest(\"it fails when the change didn't happen fast enough, based on the waitForExpect timeout\", /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(done) {\n    var numberToChangeTooLate, timeToPassForTheChangeToHappen;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            numberToChangeTooLate = 300;\n            timeToPassForTheChangeToHappen = 1000;\n            setTimeout(function () {\n              numberToChangeTooLate = 3000;\n            }, timeToPassForTheChangeToHappen);\n            _context3.prev = 3;\n            _context3.next = 6;\n            return (0, _index.default)(function () {\n              expect(numberToChangeTooLate).toEqual(3000);\n            }, timeToPassForTheChangeToHappen - 200);\n\n          case 6:\n            _context3.next = 12;\n            break;\n\n          case 8:\n            _context3.prev = 8;\n            _context3.t0 = _context3[\"catch\"](3);\n            expect(_context3.t0.message).toMatchSnapshot();\n            done();\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this, [[3, 8]]);\n  }));\n\n  return function (_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}(), 1500);\ntest(\"it reruns the expectation every x ms, as provided with the second argument\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n  var timesRun, timeout, interval, expectedTimesToRun;\n  return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          // using this would be preferable but somehow jest shares the expect.assertions between tests!\n          // expect.assertions(1 + Math.floor(timeout / interval));\n          timesRun = 0;\n          timeout = 600;\n          interval = 150;\n          _context4.prev = 3;\n          _context4.next = 6;\n          return (0, _index.default)(function () {\n            timesRun += 1;\n            expect(true).toEqual(false);\n          }, timeout, interval);\n\n        case 6:\n          _context4.next = 13;\n          break;\n\n        case 8:\n          _context4.prev = 8;\n          _context4.t0 = _context4[\"catch\"](3); // initial run + reruns\n\n          expectedTimesToRun = 1 + Math.floor(timeout / interval);\n          expect(timesRun).toEqual(expectedTimesToRun);\n          expect(timesRun).toBeInRange({\n            min: expectedTimesToRun - 1,\n            max: expectedTimesToRun + 1\n          });\n\n        case 13:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _callee4, this, [[3, 8]]);\n})));\ntest(\"it reruns the expectation every x ms, as provided by the default timeout and interval\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n  var timeout, interval, mockExpectation, expectedTimesToRun;\n  return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          timeout = 600;\n          interval = 150;\n          _index.default.defaults.timeout = timeout;\n          _index.default.defaults.interval = interval;\n          mockExpectation = jest.fn();\n          mockExpectation.mockImplementation(function () {\n            return expect(true).toEqual(false);\n          });\n          _context5.prev = 6;\n          _context5.next = 9;\n          return (0, _index.default)(mockExpectation);\n\n        case 9:\n          throw Error(\"waitForExpect should have thrown\");\n\n        case 12:\n          _context5.prev = 12;\n          _context5.t0 = _context5[\"catch\"](6); // initial run + reruns\n\n          expectedTimesToRun = 1 + Math.floor(timeout / interval);\n          expect(mockExpectation).toHaveBeenCalledTimes(expectedTimesToRun);\n\n        case 16:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _callee5, this, [[6, 12]]);\n})));\ntest(\"it works with promises\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n  var numberToChange, randomTimeout, sleep;\n  return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          numberToChange = 10;\n          randomTimeout = Math.floor(Math.random() * 300);\n          setTimeout(function () {\n            numberToChange = 100;\n          }, randomTimeout);\n\n          sleep = function sleep(ms) {\n            return new Promise(function (resolve) {\n              return setTimeout(function () {\n                return resolve();\n              }, ms);\n            });\n          };\n\n          _context7.next = 6;\n          return (0, _index.default)( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n            return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n              while (1) {\n                switch (_context6.prev = _context6.next) {\n                  case 0:\n                    _context6.next = 2;\n                    return sleep(10);\n\n                  case 2:\n                    expect(numberToChange).toEqual(100);\n\n                  case 3:\n                  case \"end\":\n                    return _context6.stop();\n                }\n              }\n            }, _callee6, this);\n          })));\n\n        case 6:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _callee7, this);\n})));\ntest(\"it works with a zero interval\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n  var numberToChange;\n  return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          numberToChange = 1;\n          setTimeout(function () {\n            numberToChange = 2;\n          }, 10);\n          _context8.next = 4;\n          return (0, _index.default)(function () {\n            expect(numberToChange).toEqual(2);\n          }, 100, 0);\n\n        case 4:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _callee8, this);\n})));","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/wait-for-expect/lib/waitForExpect.spec.js"],"names":["require","_index","_interopRequireDefault","obj","__esModule","default","_asyncToGenerator","fn","self","args","arguments","Promise","resolve","reject","gen","apply","step","key","arg","info","value","error","done","then","_next","_throw","err","_objectSpread","target","i","length","source","ownKeys","Object","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","defineProperty","configurable","writable","originalDefaults","defaults","beforeEach","assign","test","mark","_callee","numberToChange","randomTimeout","wrap","_callee$","_context","prev","next","Math","floor","random","setTimeout","expect","toEqual","stop","_ref2","_callee2","numberNotToChange","_callee2$","_context2","t0","message","toMatchSnapshot","_x","_ref3","_callee3","numberToChangeTooLate","timeToPassForTheChangeToHappen","_callee3$","_context3","_x2","_callee4","timesRun","timeout","interval","expectedTimesToRun","_callee4$","_context4","toBeInRange","min","max","_callee5","mockExpectation","_callee5$","_context5","jest","mockImplementation","Error","toHaveBeenCalledTimes","_callee7","sleep","_callee7$","_context7","ms","_callee6","_callee6$","_context6","_callee8","_callee8$","_context8"],"mappings":"AAAA;;;;AAEAA,OAAO,CAAC,sBAAD,CAAP;;AAEA,IAAIC,MAAM,GAAGC,sBAAsB,CAACF,OAAO,CAAC,SAAD,CAAR,CAAnC;;AAEA,SAASE,sBAAT,CAAgCC,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEE,IAAAA,OAAO,EAAEF;AAAX,GAArC;AAAwD;;AAE/F,SAASG,iBAAT,CAA2BC,EAA3B,EAA+B;AAAE,SAAO,YAAY;AAAE,QAAIC,IAAI,GAAG,IAAX;AAAA,QAAiBC,IAAI,GAAGC,SAAxB;AAAmC,WAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAAE,UAAIC,GAAG,GAAGP,EAAE,CAACQ,KAAH,CAASP,IAAT,EAAeC,IAAf,CAAV;;AAAgC,eAASO,IAAT,CAAcC,GAAd,EAAmBC,GAAnB,EAAwB;AAAE,YAAI;AAAE,cAAIC,IAAI,GAAGL,GAAG,CAACG,GAAD,CAAH,CAASC,GAAT,CAAX;AAA0B,cAAIE,KAAK,GAAGD,IAAI,CAACC,KAAjB;AAAyB,SAAzD,CAA0D,OAAOC,KAAP,EAAc;AAAER,UAAAA,MAAM,CAACQ,KAAD,CAAN;AAAe;AAAS;;AAAC,YAAIF,IAAI,CAACG,IAAT,EAAe;AAAEV,UAAAA,OAAO,CAACQ,KAAD,CAAP;AAAiB,SAAlC,MAAwC;AAAET,UAAAA,OAAO,CAACC,OAAR,CAAgBQ,KAAhB,EAAuBG,IAAvB,CAA4BC,KAA5B,EAAmCC,MAAnC;AAA6C;AAAE;;AAAC,eAASD,KAAT,CAAeJ,KAAf,EAAsB;AAAEJ,QAAAA,IAAI,CAAC,MAAD,EAASI,KAAT,CAAJ;AAAsB;;AAAC,eAASK,MAAT,CAAgBC,GAAhB,EAAqB;AAAEV,QAAAA,IAAI,CAAC,OAAD,EAAUU,GAAV,CAAJ;AAAqB;;AAACF,MAAAA,KAAK;AAAK,KAAtY,CAAP;AAAiZ,GAAzc;AAA4c;;AAE7e,SAASG,aAAT,CAAuBC,MAAvB,EAA+B;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnB,SAAS,CAACoB,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AAAE,QAAIE,MAAM,GAAGrB,SAAS,CAACmB,CAAD,CAAT,IAAgB,IAAhB,GAAuBnB,SAAS,CAACmB,CAAD,CAAhC,GAAsC,EAAnD;AAAuD,QAAIG,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYH,MAAZ,CAAd;;AAAmC,QAAI,OAAOE,MAAM,CAACE,qBAAd,KAAwC,UAA5C,EAAwD;AAAEH,MAAAA,OAAO,GAAGA,OAAO,CAACI,MAAR,CAAeH,MAAM,CAACE,qBAAP,CAA6BJ,MAA7B,EAAqCM,MAArC,CAA4C,UAAUC,GAAV,EAAe;AAAE,eAAOL,MAAM,CAACM,wBAAP,CAAgCR,MAAhC,EAAwCO,GAAxC,EAA6CE,UAApD;AAAiE,OAA9H,CAAf,CAAV;AAA4J;;AAACR,IAAAA,OAAO,CAACS,OAAR,CAAgB,UAAUxB,GAAV,EAAe;AAAEyB,MAAAA,eAAe,CAACd,MAAD,EAASX,GAAT,EAAcc,MAAM,CAACd,GAAD,CAApB,CAAf;AAA4C,KAA7E;AAAiF;;AAAC,SAAOW,MAAP;AAAgB;;AAEje,SAASc,eAAT,CAAyBvC,GAAzB,EAA8Bc,GAA9B,EAAmCG,KAAnC,EAA0C;AAAE,MAAIH,GAAG,IAAId,GAAX,EAAgB;AAAE8B,IAAAA,MAAM,CAACU,cAAP,CAAsBxC,GAAtB,EAA2Bc,GAA3B,EAAgC;AAAEG,MAAAA,KAAK,EAAEA,KAAT;AAAgBoB,MAAAA,UAAU,EAAE,IAA5B;AAAkCI,MAAAA,YAAY,EAAE,IAAhD;AAAsDC,MAAAA,QAAQ,EAAE;AAAhE,KAAhC;AAA0G,GAA5H,MAAkI;AAAE1C,IAAAA,GAAG,CAACc,GAAD,CAAH,GAAWG,KAAX;AAAmB;;AAAC,SAAOjB,GAAP;AAAa;;AAEjN,IAAI2C,gBAAgB,GAAGnB,aAAa,CAAC,EAAD,EAAK1B,MAAM,CAACI,OAAP,CAAe0C,QAApB,CAApC;;AAEAC,UAAU,CAAC,YAAY;AACrBf,EAAAA,MAAM,CAACgB,MAAP,CAAchD,MAAM,CAACI,OAAP,CAAe0C,QAA7B,EAAuCD,gBAAvC;AACD,CAFS,CAAV;AAGAI,IAAI,CAAC,kCAAD,EACJ,aACA5C,iBAAiB,EACjB,aACA,oBAAmB6C,IAAnB,CAAwB,SAASC,OAAT,GAAmB;AACzC,MAAIC,cAAJ,EAAoBC,aAApB;AACA,SAAO,oBAAmBC,IAAnB,CAAwB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AACzD,WAAO,CAAP,EAAU;AACR,cAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACE,aAAK,CAAL;AACEN,UAAAA,cAAc,GAAG,EAAjB,CADF,CACuB;AACrB;;AAEAC,UAAAA,aAAa,GAAGM,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAhB;AACAC,UAAAA,UAAU,CAAC,YAAY;AACrBV,YAAAA,cAAc,GAAG,GAAjB;AACD,WAFS,EAEPC,aAFO,CAAV;AAGAG,UAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA,iBAAO,CAAC,GAAG1D,MAAM,CAACI,OAAX,EAAoB,YAAY;AACrC2D,YAAAA,MAAM,CAACX,cAAD,CAAN,CAAuBY,OAAvB,CAA+B,GAA/B;AACD,WAFM,CAAP;;AAIF,aAAK,CAAL;AACA,aAAK,KAAL;AACE,iBAAOR,QAAQ,CAACS,IAAT,EAAP;AAhBJ;AAkBD;AACF,GArBM,EAqBJd,OArBI,EAqBK,IArBL,CAAP;AAsBD,CAxBD,CAFiB,CAFb,CAAJ;AA6BAF,IAAI,CAAC,yFAAD,EACJ,aACA,YAAY;AACV,MAAIiB,KAAK,GAAG7D,iBAAiB,EAC7B,aACA,oBAAmB6C,IAAnB,CAAwB,SAASiB,QAAT,CAAkB9C,IAAlB,EAAwB;AAC9C,QAAI+C,iBAAJ;AACA,WAAO,oBAAmBd,IAAnB,CAAwB,SAASe,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,aAAO,CAAP,EAAU;AACR,gBAAQA,SAAS,CAACb,IAAV,GAAiBa,SAAS,CAACZ,IAAnC;AACE,eAAK,CAAL;AACEU,YAAAA,iBAAiB,GAAG,GAApB;AACAE,YAAAA,SAAS,CAACb,IAAV,GAAiB,CAAjB;AACAa,YAAAA,SAAS,CAACZ,IAAV,GAAiB,CAAjB;AACA,mBAAO,CAAC,GAAG1D,MAAM,CAACI,OAAX,EAAoB,YAAY;AACrC2D,cAAAA,MAAM,CAACK,iBAAD,CAAN,CAA0BJ,OAA1B,CAAkC,IAAlC;AACD,aAFM,EAEJ,GAFI,CAAP;;AAIF,eAAK,CAAL;AACEM,YAAAA,SAAS,CAACZ,IAAV,GAAiB,EAAjB;AACA;;AAEF,eAAK,CAAL;AACEY,YAAAA,SAAS,CAACb,IAAV,GAAiB,CAAjB;AACAa,YAAAA,SAAS,CAACC,EAAV,GAAeD,SAAS,CAAC,OAAD,CAAT,CAAmB,CAAnB,CAAf;AACAP,YAAAA,MAAM,CAACO,SAAS,CAACC,EAAV,CAAaC,OAAd,CAAN,CAA6BC,eAA7B;AACApD,YAAAA,IAAI;;AAEN,eAAK,EAAL;AACA,eAAK,KAAL;AACE,mBAAOiD,SAAS,CAACL,IAAV,EAAP;AArBJ;AAuBD;AACF,KA1BM,EA0BJE,QA1BI,EA0BM,IA1BN,EA0BY,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CA1BZ,CAAP;AA2BD,GA7BD,CAF6B,CAA7B;;AAiCA,SAAO,UAAUO,EAAV,EAAc;AACnB,WAAOR,KAAK,CAACpD,KAAN,CAAY,IAAZ,EAAkBL,SAAlB,CAAP;AACD,GAFD;AAGD,CArCD,EAFI,EAuCC,IAvCD,CAAJ;AAwCAwC,IAAI,CAAC,wFAAD,EACJ,aACA,YAAY;AACV,MAAI0B,KAAK,GAAGtE,iBAAiB,EAC7B,aACA,oBAAmB6C,IAAnB,CAAwB,SAAS0B,QAAT,CAAkBvD,IAAlB,EAAwB;AAC9C,QAAIwD,qBAAJ,EAA2BC,8BAA3B;AACA,WAAO,oBAAmBxB,IAAnB,CAAwB,SAASyB,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,aAAO,CAAP,EAAU;AACR,gBAAQA,SAAS,CAACvB,IAAV,GAAiBuB,SAAS,CAACtB,IAAnC;AACE,eAAK,CAAL;AACEmB,YAAAA,qBAAqB,GAAG,GAAxB;AACAC,YAAAA,8BAA8B,GAAG,IAAjC;AACAhB,YAAAA,UAAU,CAAC,YAAY;AACrBe,cAAAA,qBAAqB,GAAG,IAAxB;AACD,aAFS,EAEPC,8BAFO,CAAV;AAGAE,YAAAA,SAAS,CAACvB,IAAV,GAAiB,CAAjB;AACAuB,YAAAA,SAAS,CAACtB,IAAV,GAAiB,CAAjB;AACA,mBAAO,CAAC,GAAG1D,MAAM,CAACI,OAAX,EAAoB,YAAY;AACrC2D,cAAAA,MAAM,CAACc,qBAAD,CAAN,CAA8Bb,OAA9B,CAAsC,IAAtC;AACD,aAFM,EAEJc,8BAA8B,GAAG,GAF7B,CAAP;;AAIF,eAAK,CAAL;AACEE,YAAAA,SAAS,CAACtB,IAAV,GAAiB,EAAjB;AACA;;AAEF,eAAK,CAAL;AACEsB,YAAAA,SAAS,CAACvB,IAAV,GAAiB,CAAjB;AACAuB,YAAAA,SAAS,CAACT,EAAV,GAAeS,SAAS,CAAC,OAAD,CAAT,CAAmB,CAAnB,CAAf;AACAjB,YAAAA,MAAM,CAACiB,SAAS,CAACT,EAAV,CAAaC,OAAd,CAAN,CAA6BC,eAA7B;AACApD,YAAAA,IAAI;;AAEN,eAAK,EAAL;AACA,eAAK,KAAL;AACE,mBAAO2D,SAAS,CAACf,IAAV,EAAP;AAzBJ;AA2BD;AACF,KA9BM,EA8BJW,QA9BI,EA8BM,IA9BN,EA8BY,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CA9BZ,CAAP;AA+BD,GAjCD,CAF6B,CAA7B;;AAqCA,SAAO,UAAUK,GAAV,EAAe;AACpB,WAAON,KAAK,CAAC7D,KAAN,CAAY,IAAZ,EAAkBL,SAAlB,CAAP;AACD,GAFD;AAGD,CAzCD,EAFI,EA2CC,IA3CD,CAAJ;AA4CAwC,IAAI,CAAC,4EAAD,EACJ,aACA5C,iBAAiB,EACjB,aACA,oBAAmB6C,IAAnB,CAAwB,SAASgC,QAAT,GAAoB;AAC1C,MAAIC,QAAJ,EAAcC,OAAd,EAAuBC,QAAvB,EAAiCC,kBAAjC;AACA,SAAO,oBAAmBhC,IAAnB,CAAwB,SAASiC,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,WAAO,CAAP,EAAU;AACR,cAAQA,SAAS,CAAC/B,IAAV,GAAiB+B,SAAS,CAAC9B,IAAnC;AACE,aAAK,CAAL;AACE;AACA;AACAyB,UAAAA,QAAQ,GAAG,CAAX;AACAC,UAAAA,OAAO,GAAG,GAAV;AACAC,UAAAA,QAAQ,GAAG,GAAX;AACAG,UAAAA,SAAS,CAAC/B,IAAV,GAAiB,CAAjB;AACA+B,UAAAA,SAAS,CAAC9B,IAAV,GAAiB,CAAjB;AACA,iBAAO,CAAC,GAAG1D,MAAM,CAACI,OAAX,EAAoB,YAAY;AACrC+E,YAAAA,QAAQ,IAAI,CAAZ;AACApB,YAAAA,MAAM,CAAC,IAAD,CAAN,CAAaC,OAAb,CAAqB,KAArB;AACD,WAHM,EAGJoB,OAHI,EAGKC,QAHL,CAAP;;AAKF,aAAK,CAAL;AACEG,UAAAA,SAAS,CAAC9B,IAAV,GAAiB,EAAjB;AACA;;AAEF,aAAK,CAAL;AACE8B,UAAAA,SAAS,CAAC/B,IAAV,GAAiB,CAAjB;AACA+B,UAAAA,SAAS,CAACjB,EAAV,GAAeiB,SAAS,CAAC,OAAD,CAAT,CAAmB,CAAnB,CAAf,CAFF,CAGE;;AACAF,UAAAA,kBAAkB,GAAG,IAAI3B,IAAI,CAACC,KAAL,CAAWwB,OAAO,GAAGC,QAArB,CAAzB;AACAtB,UAAAA,MAAM,CAACoB,QAAD,CAAN,CAAiBnB,OAAjB,CAAyBsB,kBAAzB;AACAvB,UAAAA,MAAM,CAACoB,QAAD,CAAN,CAAiBM,WAAjB,CAA6B;AAC3BC,YAAAA,GAAG,EAAEJ,kBAAkB,GAAG,CADC;AAE3BK,YAAAA,GAAG,EAAEL,kBAAkB,GAAG;AAFC,WAA7B;;AAKF,aAAK,EAAL;AACA,aAAK,KAAL;AACE,iBAAOE,SAAS,CAACvB,IAAV,EAAP;AA/BJ;AAiCD;AACF,GApCM,EAoCJiB,QApCI,EAoCM,IApCN,EAoCY,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CApCZ,CAAP;AAqCD,CAvCD,CAFiB,CAFb,CAAJ;AA4CAjC,IAAI,CAAC,uFAAD,EACJ,aACA5C,iBAAiB,EACjB,aACA,oBAAmB6C,IAAnB,CAAwB,SAAS0C,QAAT,GAAoB;AAC1C,MAAIR,OAAJ,EAAaC,QAAb,EAAuBQ,eAAvB,EAAwCP,kBAAxC;AACA,SAAO,oBAAmBhC,IAAnB,CAAwB,SAASwC,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,WAAO,CAAP,EAAU;AACR,cAAQA,SAAS,CAACtC,IAAV,GAAiBsC,SAAS,CAACrC,IAAnC;AACE,aAAK,CAAL;AACE0B,UAAAA,OAAO,GAAG,GAAV;AACAC,UAAAA,QAAQ,GAAG,GAAX;AACArF,UAAAA,MAAM,CAACI,OAAP,CAAe0C,QAAf,CAAwBsC,OAAxB,GAAkCA,OAAlC;AACApF,UAAAA,MAAM,CAACI,OAAP,CAAe0C,QAAf,CAAwBuC,QAAxB,GAAmCA,QAAnC;AACAQ,UAAAA,eAAe,GAAGG,IAAI,CAAC1F,EAAL,EAAlB;AACAuF,UAAAA,eAAe,CAACI,kBAAhB,CAAmC,YAAY;AAC7C,mBAAOlC,MAAM,CAAC,IAAD,CAAN,CAAaC,OAAb,CAAqB,KAArB,CAAP;AACD,WAFD;AAGA+B,UAAAA,SAAS,CAACtC,IAAV,GAAiB,CAAjB;AACAsC,UAAAA,SAAS,CAACrC,IAAV,GAAiB,CAAjB;AACA,iBAAO,CAAC,GAAG1D,MAAM,CAACI,OAAX,EAAoByF,eAApB,CAAP;;AAEF,aAAK,CAAL;AACE,gBAAMK,KAAK,CAAC,kCAAD,CAAX;;AAEF,aAAK,EAAL;AACEH,UAAAA,SAAS,CAACtC,IAAV,GAAiB,EAAjB;AACAsC,UAAAA,SAAS,CAACxB,EAAV,GAAewB,SAAS,CAAC,OAAD,CAAT,CAAmB,CAAnB,CAAf,CAFF,CAGE;;AACAT,UAAAA,kBAAkB,GAAG,IAAI3B,IAAI,CAACC,KAAL,CAAWwB,OAAO,GAAGC,QAArB,CAAzB;AACAtB,UAAAA,MAAM,CAAC8B,eAAD,CAAN,CAAwBM,qBAAxB,CAA8Cb,kBAA9C;;AAEF,aAAK,EAAL;AACA,aAAK,KAAL;AACE,iBAAOS,SAAS,CAAC9B,IAAV,EAAP;AA1BJ;AA4BD;AACF,GA/BM,EA+BJ2B,QA/BI,EA+BM,IA/BN,EA+BY,CAAC,CAAC,CAAD,EAAI,EAAJ,CAAD,CA/BZ,CAAP;AAgCD,CAlCD,CAFiB,CAFb,CAAJ;AAuCA3C,IAAI,CAAC,wBAAD,EACJ,aACA5C,iBAAiB,EACjB,aACA,oBAAmB6C,IAAnB,CAAwB,SAASkD,QAAT,GAAoB;AAC1C,MAAIhD,cAAJ,EAAoBC,aAApB,EAAmCgD,KAAnC;AACA,SAAO,oBAAmB/C,IAAnB,CAAwB,SAASgD,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,WAAO,CAAP,EAAU;AACR,cAAQA,SAAS,CAAC9C,IAAV,GAAiB8C,SAAS,CAAC7C,IAAnC;AACE,aAAK,CAAL;AACEN,UAAAA,cAAc,GAAG,EAAjB;AACAC,UAAAA,aAAa,GAAGM,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAhB;AACAC,UAAAA,UAAU,CAAC,YAAY;AACrBV,YAAAA,cAAc,GAAG,GAAjB;AACD,WAFS,EAEPC,aAFO,CAAV;;AAIAgD,UAAAA,KAAK,GAAG,SAASA,KAAT,CAAeG,EAAf,EAAmB;AACzB,mBAAO,IAAI9F,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpC,qBAAOmD,UAAU,CAAC,YAAY;AAC5B,uBAAOnD,OAAO,EAAd;AACD,eAFgB,EAEd6F,EAFc,CAAjB;AAGD,aAJM,CAAP;AAKD,WAND;;AAQAD,UAAAA,SAAS,CAAC7C,IAAV,GAAiB,CAAjB;AACA,iBAAO,CAAC,GAAG1D,MAAM,CAACI,OAAX,GACP,aACAC,iBAAiB,EACjB,aACA,oBAAmB6C,IAAnB,CAAwB,SAASuD,QAAT,GAAoB;AAC1C,mBAAO,oBAAmBnD,IAAnB,CAAwB,SAASoD,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,qBAAO,CAAP,EAAU;AACR,wBAAQA,SAAS,CAAClD,IAAV,GAAiBkD,SAAS,CAACjD,IAAnC;AACE,uBAAK,CAAL;AACEiD,oBAAAA,SAAS,CAACjD,IAAV,GAAiB,CAAjB;AACA,2BAAO2C,KAAK,CAAC,EAAD,CAAZ;;AAEF,uBAAK,CAAL;AACEtC,oBAAAA,MAAM,CAACX,cAAD,CAAN,CAAuBY,OAAvB,CAA+B,GAA/B;;AAEF,uBAAK,CAAL;AACA,uBAAK,KAAL;AACE,2BAAO2C,SAAS,CAAC1C,IAAV,EAAP;AAVJ;AAYD;AACF,aAfM,EAeJwC,QAfI,EAeM,IAfN,CAAP;AAgBD,WAjBD,CAFiB,CAFV,CAAP;;AAuBF,aAAK,CAAL;AACA,aAAK,KAAL;AACE,iBAAOF,SAAS,CAACtC,IAAV,EAAP;AA1CJ;AA4CD;AACF,GA/CM,EA+CJmC,QA/CI,EA+CM,IA/CN,CAAP;AAgDD,CAlDD,CAFiB,CAFb,CAAJ;AAuDAnD,IAAI,CAAC,+BAAD,EACJ,aACA5C,iBAAiB,EACjB,aACA,oBAAmB6C,IAAnB,CAAwB,SAAS0D,QAAT,GAAoB;AAC1C,MAAIxD,cAAJ;AACA,SAAO,oBAAmBE,IAAnB,CAAwB,SAASuD,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,WAAO,CAAP,EAAU;AACR,cAAQA,SAAS,CAACrD,IAAV,GAAiBqD,SAAS,CAACpD,IAAnC;AACE,aAAK,CAAL;AACEN,UAAAA,cAAc,GAAG,CAAjB;AACAU,UAAAA,UAAU,CAAC,YAAY;AACrBV,YAAAA,cAAc,GAAG,CAAjB;AACD,WAFS,EAEP,EAFO,CAAV;AAGA0D,UAAAA,SAAS,CAACpD,IAAV,GAAiB,CAAjB;AACA,iBAAO,CAAC,GAAG1D,MAAM,CAACI,OAAX,EAAoB,YAAY;AACrC2D,YAAAA,MAAM,CAACX,cAAD,CAAN,CAAuBY,OAAvB,CAA+B,CAA/B;AACD,WAFM,EAEJ,GAFI,EAEC,CAFD,CAAP;;AAIF,aAAK,CAAL;AACA,aAAK,KAAL;AACE,iBAAO8C,SAAS,CAAC7C,IAAV,EAAP;AAbJ;AAeD;AACF,GAlBM,EAkBJ2C,QAlBI,EAkBM,IAlBN,CAAP;AAmBD,CArBD,CAFiB,CAFb,CAAJ","sourcesContent":["\"use strict\";\n\nrequire(\"./toBeInRangeMatcher\");\n\nvar _index = _interopRequireDefault(require(\"./index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } } function _next(value) { step(\"next\", value); } function _throw(err) { step(\"throw\", err); } _next(); }); }; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar originalDefaults = _objectSpread({}, _index.default.defaults);\n\nbeforeEach(function () {\n  Object.assign(_index.default.defaults, originalDefaults);\n});\ntest(\"it waits for expectation to pass\",\n/*#__PURE__*/\n_asyncToGenerator(\n/*#__PURE__*/\nregeneratorRuntime.mark(function _callee() {\n  var numberToChange, randomTimeout;\n  return regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          numberToChange = 10; // we are using random timeout here to simulate a real-time example\n          // of an async operation calling a callback at a non-deterministic time\n\n          randomTimeout = Math.floor(Math.random() * 300);\n          setTimeout(function () {\n            numberToChange = 100;\n          }, randomTimeout);\n          _context.next = 5;\n          return (0, _index.default)(function () {\n            expect(numberToChange).toEqual(100);\n          });\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee, this);\n})));\ntest(\"it fails properly with jest error message when it times out without expectation passing\",\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee2(done) {\n    var numberNotToChange;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            numberNotToChange = 200;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return (0, _index.default)(function () {\n              expect(numberNotToChange).toEqual(2000);\n            }, 300);\n\n          case 4:\n            _context2.next = 10;\n            break;\n\n          case 6:\n            _context2.prev = 6;\n            _context2.t0 = _context2[\"catch\"](1);\n            expect(_context2.t0.message).toMatchSnapshot();\n            done();\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this, [[1, 6]]);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}(), 1000);\ntest(\"it fails when the change didn't happen fast enough, based on the waitForExpect timeout\",\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee3(done) {\n    var numberToChangeTooLate, timeToPassForTheChangeToHappen;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            numberToChangeTooLate = 300;\n            timeToPassForTheChangeToHappen = 1000;\n            setTimeout(function () {\n              numberToChangeTooLate = 3000;\n            }, timeToPassForTheChangeToHappen);\n            _context3.prev = 3;\n            _context3.next = 6;\n            return (0, _index.default)(function () {\n              expect(numberToChangeTooLate).toEqual(3000);\n            }, timeToPassForTheChangeToHappen - 200);\n\n          case 6:\n            _context3.next = 12;\n            break;\n\n          case 8:\n            _context3.prev = 8;\n            _context3.t0 = _context3[\"catch\"](3);\n            expect(_context3.t0.message).toMatchSnapshot();\n            done();\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this, [[3, 8]]);\n  }));\n\n  return function (_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}(), 1500);\ntest(\"it reruns the expectation every x ms, as provided with the second argument\",\n/*#__PURE__*/\n_asyncToGenerator(\n/*#__PURE__*/\nregeneratorRuntime.mark(function _callee4() {\n  var timesRun, timeout, interval, expectedTimesToRun;\n  return regeneratorRuntime.wrap(function _callee4$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          // using this would be preferable but somehow jest shares the expect.assertions between tests!\n          // expect.assertions(1 + Math.floor(timeout / interval));\n          timesRun = 0;\n          timeout = 600;\n          interval = 150;\n          _context4.prev = 3;\n          _context4.next = 6;\n          return (0, _index.default)(function () {\n            timesRun += 1;\n            expect(true).toEqual(false);\n          }, timeout, interval);\n\n        case 6:\n          _context4.next = 13;\n          break;\n\n        case 8:\n          _context4.prev = 8;\n          _context4.t0 = _context4[\"catch\"](3);\n          // initial run + reruns\n          expectedTimesToRun = 1 + Math.floor(timeout / interval);\n          expect(timesRun).toEqual(expectedTimesToRun);\n          expect(timesRun).toBeInRange({\n            min: expectedTimesToRun - 1,\n            max: expectedTimesToRun + 1\n          });\n\n        case 13:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _callee4, this, [[3, 8]]);\n})));\ntest(\"it reruns the expectation every x ms, as provided by the default timeout and interval\",\n/*#__PURE__*/\n_asyncToGenerator(\n/*#__PURE__*/\nregeneratorRuntime.mark(function _callee5() {\n  var timeout, interval, mockExpectation, expectedTimesToRun;\n  return regeneratorRuntime.wrap(function _callee5$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          timeout = 600;\n          interval = 150;\n          _index.default.defaults.timeout = timeout;\n          _index.default.defaults.interval = interval;\n          mockExpectation = jest.fn();\n          mockExpectation.mockImplementation(function () {\n            return expect(true).toEqual(false);\n          });\n          _context5.prev = 6;\n          _context5.next = 9;\n          return (0, _index.default)(mockExpectation);\n\n        case 9:\n          throw Error(\"waitForExpect should have thrown\");\n\n        case 12:\n          _context5.prev = 12;\n          _context5.t0 = _context5[\"catch\"](6);\n          // initial run + reruns\n          expectedTimesToRun = 1 + Math.floor(timeout / interval);\n          expect(mockExpectation).toHaveBeenCalledTimes(expectedTimesToRun);\n\n        case 16:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _callee5, this, [[6, 12]]);\n})));\ntest(\"it works with promises\",\n/*#__PURE__*/\n_asyncToGenerator(\n/*#__PURE__*/\nregeneratorRuntime.mark(function _callee7() {\n  var numberToChange, randomTimeout, sleep;\n  return regeneratorRuntime.wrap(function _callee7$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          numberToChange = 10;\n          randomTimeout = Math.floor(Math.random() * 300);\n          setTimeout(function () {\n            numberToChange = 100;\n          }, randomTimeout);\n\n          sleep = function sleep(ms) {\n            return new Promise(function (resolve) {\n              return setTimeout(function () {\n                return resolve();\n              }, ms);\n            });\n          };\n\n          _context7.next = 6;\n          return (0, _index.default)(\n          /*#__PURE__*/\n          _asyncToGenerator(\n          /*#__PURE__*/\n          regeneratorRuntime.mark(function _callee6() {\n            return regeneratorRuntime.wrap(function _callee6$(_context6) {\n              while (1) {\n                switch (_context6.prev = _context6.next) {\n                  case 0:\n                    _context6.next = 2;\n                    return sleep(10);\n\n                  case 2:\n                    expect(numberToChange).toEqual(100);\n\n                  case 3:\n                  case \"end\":\n                    return _context6.stop();\n                }\n              }\n            }, _callee6, this);\n          })));\n\n        case 6:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _callee7, this);\n})));\ntest(\"it works with a zero interval\",\n/*#__PURE__*/\n_asyncToGenerator(\n/*#__PURE__*/\nregeneratorRuntime.mark(function _callee8() {\n  var numberToChange;\n  return regeneratorRuntime.wrap(function _callee8$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          numberToChange = 1;\n          setTimeout(function () {\n            numberToChange = 2;\n          }, 10);\n          _context8.next = 4;\n          return (0, _index.default)(function () {\n            expect(numberToChange).toEqual(2);\n          }, 100, 0);\n\n        case 4:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _callee8, this);\n})));"]},"metadata":{},"sourceType":"script"}