{"ast":null,"code":"var tape = require('tape');\n\nvar through = require('through2');\n\nvar ndjson = require('ndjson');\n\nvar each = require('./');\n\ntape('each', function (t) {\n  var s = through.obj();\n  s.write('a');\n  s.write('b');\n  s.write('c');\n  s.end();\n  s.on('end', function () {\n    t.end();\n  });\n  var expected = ['a', 'b', 'c'];\n  each(s, function (data, next) {\n    t.same(data, expected.shift());\n    next();\n  });\n});\ntape('each and callback', function (t) {\n  var s = through.obj();\n  s.write('a');\n  s.write('b');\n  s.write('c');\n  s.end();\n  var expected = ['a', 'b', 'c'];\n  each(s, function (data, next) {\n    t.same(data, expected.shift());\n    next();\n  }, function () {\n    t.end();\n  });\n});\ntape('each (write after)', function (t) {\n  var s = through.obj();\n  s.on('end', function () {\n    t.end();\n  });\n  var expected = ['a', 'b', 'c'];\n  each(s, function (data, next) {\n    t.same(data, expected.shift());\n    next();\n  });\n  setTimeout(function () {\n    s.write('a');\n    s.write('b');\n    s.write('c');\n    s.end();\n  }, 100);\n});\ntape('each error', function (t) {\n  var s = through.obj();\n  s.write('hello');\n  s.on('error', function (err) {\n    t.same(err.message, 'stop');\n    t.end();\n  });\n  each(s, function (data, next) {\n    next(new Error('stop'));\n  });\n});\ntape('each error and callback', function (t) {\n  var s = through.obj();\n  s.write('hello');\n  each(s, function (data, next) {\n    next(new Error('stop'));\n  }, function (err) {\n    t.same(err.message, 'stop');\n    t.end();\n  });\n});\ntape('each with falsey values', function (t) {\n  var s = through.obj();\n  s.write(0);\n  s.write(false);\n  s.write(undefined);\n  s.end();\n  s.on('end', function () {\n    t.end();\n  });\n  var expected = [0, false];\n  var count = 0;\n  each(s, function (data, next) {\n    count++;\n    t.same(data, expected.shift());\n    next();\n  }, function () {\n    t.same(count, 2);\n  });\n});\ntape('huge stack', function (t) {\n  var s = through.obj();\n\n  for (var i = 0; i < 5000; i++) {\n    s.write('foo');\n  }\n\n  s.end();\n  each(s, function (data, cb) {\n    if (data !== 'foo') t.fail('bad data');\n    cb();\n  }, function (err) {\n    t.error(err, 'no error');\n    t.end();\n  });\n});\ntape('cb only once', function (t) {\n  var p = ndjson.parse();\n  var once = true;\n  var data = '{\"foo\":\"' + Array(1000).join('x') + '\"}\\n';\n  each(p, ondata, function (err) {\n    t.ok(once, 'only once');\n    t.ok(err, 'had error');\n    once = false;\n    t.end();\n  });\n\n  for (var i = 0; i < 1000; i++) p.write(data);\n\n  p.write('{...}\\n');\n\n  function ondata(data, cb) {\n    process.nextTick(cb);\n  }\n});","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/stream-each/test.js"],"names":["tape","require","through","ndjson","each","t","s","obj","write","end","on","expected","data","next","same","shift","setTimeout","err","message","Error","undefined","count","i","cb","fail","error","p","parse","once","Array","join","ondata","ok","process","nextTick"],"mappings":"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","sourcesContent":["var tape = require('tape')\nvar through = require('through2')\nvar ndjson = require('ndjson')\nvar each = require('./')\n\ntape('each', function (t) {\n  var s = through.obj()\n  s.write('a')\n  s.write('b')\n  s.write('c')\n  s.end()\n\n  s.on('end', function () {\n    t.end()\n  })\n\n  var expected = ['a', 'b', 'c']\n  each(s, function (data, next) {\n    t.same(data, expected.shift())\n    next()\n  })\n})\n\ntape('each and callback', function (t) {\n  var s = through.obj()\n  s.write('a')\n  s.write('b')\n  s.write('c')\n  s.end()\n\n  var expected = ['a', 'b', 'c']\n  each(s, function (data, next) {\n    t.same(data, expected.shift())\n    next()\n  }, function () {\n    t.end()\n  })\n})\n\ntape('each (write after)', function (t) {\n  var s = through.obj()\n  s.on('end', function () {\n    t.end()\n  })\n\n  var expected = ['a', 'b', 'c']\n  each(s, function (data, next) {\n    t.same(data, expected.shift())\n    next()\n  })\n\n  setTimeout(function () {\n    s.write('a')\n    s.write('b')\n    s.write('c')\n    s.end()\n  }, 100)\n})\n\ntape('each error', function (t) {\n  var s = through.obj()\n  s.write('hello')\n  s.on('error', function (err) {\n    t.same(err.message, 'stop')\n    t.end()\n  })\n\n  each(s, function (data, next) {\n    next(new Error('stop'))\n  })\n})\n\ntape('each error and callback', function (t) {\n  var s = through.obj()\n  s.write('hello')\n\n  each(s, function (data, next) {\n    next(new Error('stop'))\n  }, function (err) {\n    t.same(err.message, 'stop')\n    t.end()\n  })\n})\n\ntape('each with falsey values', function (t) {\n  var s = through.obj()\n  s.write(0)\n  s.write(false)\n  s.write(undefined)\n  s.end()\n\n  s.on('end', function () {\n    t.end()\n  })\n\n  var expected = [0, false]\n  var count = 0\n  each(s, function (data, next) {\n    count++\n    t.same(data, expected.shift())\n    next()\n  }, function () {\n    t.same(count, 2)\n  })\n})\n\ntape('huge stack', function (t) {\n  var s = through.obj()\n\n  for (var i = 0; i < 5000; i++) {\n    s.write('foo')\n  }\n\n  s.end()\n\n  each(s, function (data, cb) {\n    if (data !== 'foo') t.fail('bad data')\n    cb()\n  }, function (err) {\n    t.error(err, 'no error')\n    t.end()\n  })\n})\n\ntape('cb only once', function (t) {\n  var p = ndjson.parse()\n  var once = true\n  var data = '{\"foo\":\"' + Array(1000).join('x') + '\"}\\n'\n\n  each(p, ondata, function (err) {\n    t.ok(once, 'only once')\n    t.ok(err, 'had error')\n    once = false\n    t.end()\n  })\n\n  for (var i = 0; i < 1000; i++) p.write(data)\n  p.write('{...}\\n')\n\n  function ondata (data, cb) {\n    process.nextTick(cb)\n  }\n})\n"]},"metadata":{},"sourceType":"script"}