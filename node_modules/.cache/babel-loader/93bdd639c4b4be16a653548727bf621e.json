{"ast":null,"code":"import { epsilon, kappa, wd50X, wd50Y, wd50Z, matrix } from './util';\n/* Convert between Lab and XYZ\n/* ========================================================================== */\n\nexport function lab2xyz(labL, labA, labB) {\n  // compute f, starting with the luminance-related term\n  const f2 = (labL + 16) / 116;\n  const f1 = labA / 500 + f2;\n  const f3 = f2 - labB / 200; // compute pre-scaled XYZ\n\n  const [initX, initY, initZ] = [Math.pow(f1, 3) > epsilon ? Math.pow(f1, 3) : (116 * f1 - 16) / kappa, labL > kappa * epsilon ? Math.pow((labL + 16) / 116, 3) : labL / kappa, Math.pow(f3, 3) > epsilon ? Math.pow(f3, 3) : (116 * f3 - 16) / kappa];\n  const [xyzX, xyzY, xyzZ] = matrix( // compute XYZ by scaling pre-scaled XYZ by reference white\n  [initX * wd50X, initY * wd50Y, initZ * wd50Z], // calculate D65 XYZ from D50 XYZ\n  [[0.9555766, -0.0230393, 0.0631636], [-0.0282895, 1.0099416, 0.0210077], [0.0122982, -0.0204830, 1.3299098]]);\n  return [xyzX, xyzY, xyzZ];\n}\nexport function xyz2lab(xyzX, xyzY, xyzZ) {\n  // calculate D50 XYZ from D65 XYZ\n  const [d50X, d50Y, d50Z] = matrix([xyzX, xyzY, xyzZ], [[1.0478112, 0.0228866, -0.0501270], [0.0295424, 0.9904844, -0.0170491], [-0.0092345, 0.0150436, 0.7521316]]); // calculate f\n\n  const [f1, f2, f3] = [d50X / wd50X, d50Y / wd50Y, d50Z / wd50Z].map(value => value > epsilon ? Math.cbrt(value) : (kappa * value + 16) / 116);\n  const [labL, labA, labB] = [116 * f2 - 16, 500 * (f1 - f2), 200 * (f2 - f3)];\n  return [labL, labA, labB];\n}\n/*\n\nReferences\n----------\n\n- https://www.w3.org/TR/css-color-4/#rgb-to-lab\n- https://www.w3.org/TR/css-color-4/#color-conversion-code\n- https://www.easyrgb.com/en/math.php\n\n/* ========================================================================== */","map":{"version":3,"sources":["/Users/nguyenquytoan/Desktop/PTUDW-17TN-Nhom05-USFL/react-usfl/PTUDW-17TN-Nhom05/node_modules/@csstools/convert-colors/lib/lab-xyz.js"],"names":["epsilon","kappa","wd50X","wd50Y","wd50Z","matrix","lab2xyz","labL","labA","labB","f2","f1","f3","initX","initY","initZ","Math","pow","xyzX","xyzY","xyzZ","xyz2lab","d50X","d50Y","d50Z","map","value","cbrt"],"mappings":"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","sourcesContent":["import { epsilon, kappa, wd50X, wd50Y, wd50Z, matrix } from './util';\n\n/* Convert between Lab and XYZ\n/* ========================================================================== */\n\nexport function lab2xyz(labL, labA, labB) {\n\t// compute f, starting with the luminance-related term\n\tconst f2 = (labL + 16) / 116;\n\tconst f1 = labA / 500 + f2;\n\tconst f3 = f2 - labB / 200;\n\n\t// compute pre-scaled XYZ\n\tconst [ initX, initY, initZ ] = [\n\t\tMath.pow(f1, 3) > epsilon ? Math.pow(f1, 3)                : (116 * f1 - 16) / kappa,\n\t\tlabL > kappa * epsilon    ? Math.pow((labL + 16) / 116, 3) : labL / kappa,\n\t\tMath.pow(f3, 3) > epsilon ? Math.pow(f3, 3)                : (116 * f3 - 16) / kappa\n\t];\n\n\tconst [ xyzX, xyzY, xyzZ ] = matrix(\n\t\t// compute XYZ by scaling pre-scaled XYZ by reference white\n\t\t[ initX * wd50X, initY * wd50Y, initZ * wd50Z ],\n\t\t// calculate D65 XYZ from D50 XYZ\n\t\t[\n\t\t\t[ 0.9555766, -0.0230393,  0.0631636],\n\t\t\t[-0.0282895,  1.0099416,  0.0210077],\n\t\t\t[ 0.0122982, -0.0204830,  1.3299098]\n\t\t]\n\t);\n\n\treturn [ xyzX, xyzY, xyzZ ];\n}\n\nexport function xyz2lab(xyzX, xyzY, xyzZ) {\n\t// calculate D50 XYZ from D65 XYZ\n\tconst [ d50X, d50Y, d50Z ] = matrix([ xyzX, xyzY, xyzZ ], [\n\t\t[ 1.0478112,  0.0228866, -0.0501270],\n\t\t[ 0.0295424,  0.9904844, -0.0170491],\n\t\t[-0.0092345,  0.0150436,  0.7521316]\n\t]);\n\n\t// calculate f\n\tconst [ f1, f2, f3 ] = [\n\t\td50X / wd50X,\n\t\td50Y / wd50Y,\n\t\td50Z / wd50Z\n\t].map(\n\t\tvalue => value > epsilon ? Math.cbrt(value) : (kappa * value + 16) / 116\n\t);\n\n\tconst [ labL, labA, labB ] = [\n\t\t116 * f2 - 16,\n\t\t500 * (f1 - f2),\n\t\t200 * (f2 - f3)\n\t];\n\n\treturn [ labL, labA, labB ];\n}\n\n/*\n\nReferences\n----------\n\n- https://www.w3.org/TR/css-color-4/#rgb-to-lab\n- https://www.w3.org/TR/css-color-4/#color-conversion-code\n- https://www.easyrgb.com/en/math.php\n\n/* ========================================================================== */\n"]},"metadata":{},"sourceType":"module"}